/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StudentRepoPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  stuSettings: {
    grade: "\u5C0F\u5B66\u56DB\u5E74\u7EA7",
    localLanguage: "zh-Hans"
  },
  speechSettings: {
    subscriptionKey: "",
    speechLanguage: "en",
    speechVoice: "en-GB-SoniaNeural",
    speechOutputPath: "_audios"
  },
  ocrSettings: {
    appID: "",
    apiKey: "",
    apiSecret: "",
    accessToken: {
      token: "",
      exp: 0
    }
  },
  llmSettings: {
    apiBase: "",
    apiKey: "",
    modelName: ""
  },
  mtSettings: {
    subscriptionKey: ""
  }
};
var StudentRepoSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: this.plugin.trans.pluginName });
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.studentGrade).setDesc(this.plugin.trans.studentGrade).addText((text) => text.setPlaceholder("\u5C0F\u5B66\u56DB\u5E74\u7EA7").setValue(this.plugin.settings.stuSettings.grade).onChange(async (value) => {
      this.plugin.settings.stuSettings.grade = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.localLanguage).setDesc(this.plugin.trans.localLanguage).addDropdown((dropdown) => {
      dropdown.addOption("en", "English");
      dropdown.addOption("zh-Hans", "\u666E\u901A\u8BDD");
      dropdown.setValue(this.plugin.settings.stuSettings.localLanguage);
      dropdown.onChange((option) => {
        this.plugin.settings.stuSettings.localLanguage = option;
        this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: this.plugin.trans.llmSetting });
    new import_obsidian.Setting(containerEl).setName("API URL").setDesc(`${this.plugin.trans.llmProvider} LLM API URL`).addText((text) => text.setPlaceholder("https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions").setValue(this.plugin.settings.llmSettings.apiBase).onChange(async (value) => {
      this.plugin.settings.llmSettings.apiBase = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc(`${this.plugin.trans.llmProvider} LLM API Key`).addText((text) => text.setPlaceholder("sk-***").setValue(this.plugin.settings.llmSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.llmSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Model Name").setDesc(`${this.plugin.trans.llmProvider} LLM Model Name`).addText((text) => text.setPlaceholder("qwen-turbo").setValue(this.plugin.settings.llmSettings.modelName).onChange(async (value) => {
      this.plugin.settings.llmSettings.modelName = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h2", { text: this.plugin.trans.ocrSetting });
    new import_obsidian.Setting(containerEl).setName("APP ID").setDesc(`${this.plugin.trans.ocrProvider} APP ID`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684APP ID").setValue(this.plugin.settings.ocrSettings.appID).onChange(async (value) => {
      this.plugin.settings.ocrSettings.appID = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc(`${this.plugin.trans.ocrProvider} API Key`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684API Key").setValue(this.plugin.settings.ocrSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.ocrSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Secret").setDesc(`${this.plugin.trans.ocrProvider} API Secret`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684API Secret").setValue(this.plugin.settings.ocrSettings.apiSecret).onChange(async (value) => {
      this.plugin.settings.ocrSettings.apiSecret = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h2", { text: this.plugin.trans.speechSetting });
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.speechSubscriptionKey).setDesc("Microsoft Azure Speech Subscription Key").addText((text) => text.setPlaceholder("Your Azure Speech Subscription Key").setValue(this.plugin.settings.speechSettings.subscriptionKey).onChange(async (value) => {
      this.plugin.settings.speechSettings.subscriptionKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.speechVoiceType).setDesc("Speech Voice Type").addDropdown((dropdown) => {
      dropdown.addOption("en-GB-SoniaNeural", this.plugin.trans.speechVoiceGB);
      dropdown.addOption("en-US-AmandaMultilingualNeural", this.plugin.trans.speechVoiceUS);
      dropdown.addOption("zh-CN-XiaoxiaoNeural", this.plugin.trans.speechVoiceCN);
      dropdown.setValue(this.plugin.settings.speechSettings.speechVoice);
      dropdown.onChange((option) => {
        this.plugin.settings.speechSettings.speechVoice = option;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/ms_azure.ts
var import_obsidian2 = require("obsidian");
var serviceRegion = "eastasia";
var speechApiUrl = `https://${serviceRegion}.tts.speech.microsoft.com/cognitiveservices/v1`;
var visionApiUrl = `https://${serviceRegion}.api.cognitive.microsoft.com/vision/v3.2/ocr`;
async function textToSpeechHttp(text, subscriptionKey, speechVoice) {
  const headers = {
    "Ocp-Apim-Subscription-Key": subscriptionKey,
    "Content-Type": "application/ssml+xml",
    "X-Microsoft-OutputFormat": "audio-16khz-32kbitrate-mono-mp3",
    "User-Agent": "MySDK/1.0"
  };
  const body = `
  <speak version='1.0' xml:lang='en-US'>
      <voice xml:lang='en-US' xml:gender='Female' name='${speechVoice}'>
          ${text}
      </voice>
  </speak>
  `;
  const requestParam = {
    url: speechApiUrl,
    method: "POST",
    headers,
    body
  };
  const response = await (0, import_obsidian2.requestUrl)(requestParam);
  if (response.status != 200) {
    console.error("Text to speech error", response);
    return new ArrayBuffer(0);
  }
  return response.arrayBuffer;
}

// src/baidu_ai.ts
var import_obsidian3 = require("obsidian");
async function createToken(apiKey, apiSecret) {
  if (!apiKey || !apiSecret)
    throw new Error("Invalid API key secret");
  const url = `https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=${apiKey}&client_secret=${apiSecret}`;
  const headers = {
    "Content-Type": "application/json",
    "Accept": "application/json"
  };
  const response = await (0, import_obsidian3.requestUrl)({
    url,
    method: "POST",
    headers
  });
  if (response.status != 200) {
    console.error("create token error", response);
    return {};
  }
  const data = response.json;
  const token = data.access_token;
  const now = Date.now();
  const exp = now + data.expires_in;
  return {
    token,
    exp
  };
}
async function checkAccessToken(ocrSettings) {
  const now = Date.now();
  if (ocrSettings.accessToken && ocrSettings.accessToken.token && ocrSettings.accessToken.exp > now + 3 * 60 * 1e3) {
    return false;
  }
  const newToken = await createToken(ocrSettings.apiKey, ocrSettings.apiSecret);
  console.log("create new token", newToken);
  ocrSettings.accessToken = newToken;
  return true;
}
async function imageToTextHttp(imageBuffer, ocrSettings) {
  const url = `https://aip.baidubce.com/rest/2.0/ocr/v1/accurate_basic?access_token=${ocrSettings.accessToken.token}`;
  const headers = {
    "Content-Type": "application/x-www-form-urlencoded"
  };
  const image_base64 = (0, import_obsidian3.arrayBufferToBase64)(imageBuffer);
  const body = `image=${encodeURIComponent(image_base64)}&paragraph=true`;
  const requestParam = {
    url,
    method: "POST",
    headers,
    body
  };
  const response = await (0, import_obsidian3.requestUrl)(requestParam);
  if (response.status != 200) {
    console.error("Image to text error", response);
    new import_obsidian3.Notice(`Image to text error: ${response.status}`);
    return "";
  }
  const result = response.json;
  let text = "";
  if (result.paragraphs_result) {
    result.paragraphs_result.forEach((item) => {
      for (let i = 0; i < item.words_result_idx.length; i++) {
        text += result.words_result[item.words_result_idx[i]].words + " ";
      }
      text += "\n";
    });
  }
  return text;
}
async function translateTextHttp(text, to_lang, ocrSettings) {
  const url = `https://aip.baidubce.com/rpc/2.0/mt/texttrans/v1?access_token=${ocrSettings.accessToken.token}`;
  const headers = {
    "Content-Type": "application/json;charset=utf-8"
  };
  const body = {
    "q": text,
    "from": "auto",
    "to": to_lang
  };
  const requestParam = {
    url,
    method: "POST",
    headers,
    body: JSON.stringify(body)
  };
  const response = await (0, import_obsidian3.requestUrl)(requestParam);
  if (response.status != 200) {
    console.error("Translate text error", response);
    new import_obsidian3.Notice(`Translate text error: ${response.status}`);
    return "";
  }
  const result = response.json;
  let result_text = "";
  result.result.trans_result.forEach((item) => {
    console.log("\u539F\u6587\uFF1A", item.src);
    console.log("\u8BD1\u6587\uFF1A", item.dst);
    result_text += item.dst;
  });
  return result_text;
}

// src/prompt.ts
var GENERATE_SIMILAR_TOPIC_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6839\u636E\u5DF2\u6709\u7684\u9898\u76EE\u751F\u62105\u9053\u6269\u5C55\u9898\u76EE\uFF0C\u8FD9\u4E9B\u9898\u76EE\u8981\u7B26\u5408{GRADE}\u7684\u77E5\u8BC6\u6C34\u5E73\u3002

\u9996\u5148\uFF0C\u5DF2\u6709\u9898\u76EE\u5982\u4E0B\uFF1A
{TOPIC}

{GRADE}\u77E5\u8BC6\u6C34\u5E73\u7684\u51FA\u9898\u8981\u6C42\u5982\u4E0B\uFF1A
1. \u9898\u76EE\u4E0D\u80FD\u8FC7\u4E8E\u590D\u6742\uFF0C\u8981\u7B26\u5408{GRADE}\u5B66\u751F\u7684\u8BA4\u77E5\u80FD\u529B\u3002
2. \u5E94\u6DB5\u76D6{GRADE}\u8BFE\u7A0B\u4E2D\u7684\u5E38\u89C1\u77E5\u8BC6\u70B9\u3002

\u5728\u51FA\u9898\u65F6\uFF0C\u8BF7\u9075\u5FAA\u4EE5\u4E0B\u6307\u5BFC\uFF1A
1. \u5BF9\u4E8E\u6BCF\u4E00\u9053\u6269\u5C55\u9898\u76EE\uFF0C\u5C3D\u91CF\u4ECE\u4E0D\u540C\u7684\u77E5\u8BC6\u70B9\u89D2\u5EA6\u51FA\u53D1\uFF0C\u4F46\u8981\u57FA\u4E8E\u539F\u59CB\u9898\u76EE\u76F8\u5173\u7684\u77E5\u8BC6\u8303\u7574\u3002
2. \u5982\u679C\u539F\u59CB\u9898\u76EE\u662F\u6570\u5B66\u9898\uFF0C\u6269\u5C55\u9898\u76EE\u53EF\u4EE5\u6539\u53D8\u6570\u5B57\u3001\u8FD0\u7B97\u7B26\u53F7\u6216\u8005\u9898\u578B\u3002\u5982\u679C\u662F\u8BED\u6587\u9898\uFF0C\u53EF\u4EE5\u4ECE\u5B57\u8BCD\u3001\u8BED\u53E5\u7406\u89E3\u7B49\u4E0D\u540C\u65B9\u9762\u51FA\u9898\u3002
3. \u786E\u4FDD\u9898\u76EE\u8868\u8FF0\u6E05\u6670\uFF0C\u6CA1\u6709\u6B67\u4E49\u3002
4. \u8BF7\u7528{LANGUAGE}\u56DE\u7B54\u3002

\u8BF7\u6309\u7167\u4E0B\u9762\u7684\u683C\u5F0F\u7ED9\u51FA\u56DE\u7B54\uFF1A
\u6839\u636E\u4E0A\u8FF0\u9898\u76EE\u751F\u6210\u7684\u6269\u5C55\u9898\u76EE\u5982\u4E0B\uFF1A
...
`;
var GENERATE_SIMILAR_TOPIC_TEMPLATE_EN = `
Your task is to generate 5 extended questions based on the existing question. These questions should be in line with the knowledge level of {GRADE}.
First, the existing question is as follows:
{TOPIC}
The requirements for setting questions at the {GRADE} knowledge level are as follows:
1. The questions should not be overly complex and should match the cognitive abilities of {GRADE} students.
2. They should cover common knowledge points in the {GRADE} curriculum.

When setting the questions, please follow the following guidelines:
1. For each extended question, try to approach from different knowledge - point perspectives, but stay within the knowledge scope related to the original question.
2. If the original question is a math problem, the extended questions can change the numbers, operation symbols, or question types. If it is a Chinese language problem, questions can be set from different aspects such as words and sentence comprehension.
3. Ensure that the questions are clearly stated without ambiguity.
4. Please answer in {LANGUAGE}.

Please provide your answer in the following format:
The extended questions generated based on the above question are as follows:
...
`;
var GENERATE_LEARNING_POINTS_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6839\u636E\u7ED9\u5B9A\u7684\u9898\u76EE\u603B\u7ED3\u76F8\u5173\u77E5\u8BC6\u70B9\u3002\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u9898\u76EE:
{TOPIC}

\u5728\u603B\u7ED3\u77E5\u8BC6\u70B9\u65F6\uFF0C\u8BF7\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u8FDB\u884C:
1. \u4ED4\u7EC6\u9605\u8BFB\u9898\u76EE\u5185\u5BB9\uFF0C\u786E\u5B9A\u9898\u76EE\u6D89\u53CA\u7684\u4E3B\u8981\u9886\u57DF\u6216\u4E3B\u9898\u3002
2. \u8BC6\u522B\u4E0E\u4E3B\u9898\u76F8\u5173\u7684\u5173\u952E\u6982\u5FF5\u3001\u539F\u7406\u6216\u4FE1\u606F\u3002
3. \u5C06\u8FD9\u4E9B\u6982\u5FF5\u3001\u539F\u7406\u6216\u4FE1\u606F\u8FDB\u884C\u5206\u7C7B\u6574\u7406\u3002
4. \u53BB\u9664\u5197\u4F59\u6216\u4E0D\u91CD\u8981\u7684\u4FE1\u606F\u3002
4. \u8BF7\u7528{LANGUAGE}\u56DE\u7B54\u3002

\u8BF7\u6309\u7167\u4E0B\u9762\u7684\u683C\u5F0F\u7ED9\u51FA\u56DE\u7B54\uFF1A
\u672C\u9898\u76EE\u4E3B\u8981\u6D89\u53CA\u5230\u7684\u77E5\u8BC6\u70B9\u5982\u4E0B\uFF1A
...
`;
var GENERATE_LEARNING_POINTS_TEMPLATE_EN = `
Your task is to summarize the relevant knowledge points based on the given question. Please carefully read the following question:
{TOPIC}
When summarizing the knowledge points, please follow these steps:
1. Carefully read the content of the question and determine the main field or theme involved in the question.
2. Identify the key concepts, principles, or information related to the theme.
3. Classify and organize these concepts, principles, and information.
4. Remove redundant or unimportant information.
5. Please answer in {LANGUAGE}.

Please provide your answer in the following format:
The main knowledge points involved in this question are as follows:
...
`;
var GENERATE_WORD_PHONETICS_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6309\u7167\u8981\u6C42\u4E3A\u7ED9\u5B9A\u7684\u8BCD\u8BED\u6807\u6CE8\u8BFB\u97F3\uFF1A
{WORD}

\u5728\u751F\u6210\u97F3\u6807\u65F6,\u8BF7\u9075\u5FAA\u4EE5\u4E0B\u6307\u5357:
1. \u5982\u679C\u662F\u82F1\u8BED\u5355\u8BCD\uFF0C\u8BF7\u4F7F\u7528\u56FD\u9645\u97F3\u6807\u7B26\u53F7\u3002
2. \u5982\u679C\u662F\u4E2D\u6587\u8BCD\u8BED\uFF0C\u8BF7\u4F7F\u7528\u62FC\u97F3\u3002
3. \u76F4\u63A5\u7ED9\u51FA\u8BFB\u97F3\u6807\u6CE8\uFF0C\u4E0D\u8981\u591A\u4F59\u7684\u8BDD\u3002
`;
var SYNTAX_ANALYSIS_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6309\u7167\u8981\u6C42\u5BF9\u7ED9\u5B9A\u7684\u77ED\u6587\u6216\u53E5\u5B50\u8FDB\u884C\u8BED\u6CD5\u5206\u6790\uFF1A
{TEXT}

\u5728\u8FDB\u884C\u8BED\u6CD5\u5206\u6790\u65F6\uFF0C\u8BF7\u9075\u5FAA\u4EE5\u4E0B\u6307\u5357\uFF1A
1. \u8BC6\u522B\u53E5\u5B50\u4E2D\u7684\u5404\u4E2A\u8BED\u6CD5\u6210\u5206\uFF0C\u5982\u4E3B\u8BED\u3001\u8C13\u8BED\u3001\u5BBE\u8BED\u3001\u5B9A\u8BED\u3001\u72B6\u8BED\u3001\u8865\u8BED\u7B49\u3002
2. \u6307\u51FA\u53E5\u5B50\u7684\u7C7B\u578B\uFF0C\u5982\u7B80\u5355\u53E5\u3001\u590D\u5408\u53E5\u3001\u5E76\u5217\u53E5\u7B49\u3002
3. \u68C0\u67E5\u53E5\u5B50\u662F\u5426\u5B58\u5728\u8BED\u6CD5\u9519\u8BEF\uFF0C\u5982\u4E3B\u8C13\u4E0D\u4E00\u81F4\u3001\u65F6\u6001\u9519\u8BEF\u3001\u7528\u8BCD\u4E0D\u5F53\u7B49\uFF0C\u5982\u679C\u6CA1\u6709\u8BED\u6CD5\u9519\u8BEF\u8BE5\u90E8\u5206\u4E0D\u7528\u5305\u542B\u5728\u56DE\u7B54\u4E2D\u3002
4. \u5982\u679C\u6709\u591A\u4E2A\u53E5\u5B50\uFF0C\u8BF7\u5206\u522B\u5BF9\u6BCF\u4E2A\u53E5\u5B50\u8FDB\u884C\u5206\u6790\u3002
5. \u8BF7\u76F4\u63A5\u7ED9\u51FA\u5206\u6790\u7ED3\u679C\u3002

\u8BF7\u6309\u7167\u4E0B\u9762\u7684\u683C\u5F0F\u7ED9\u51FA\u56DE\u7B54\uFF1A
\u8BED\u6CD5\u5206\u6790\u7ED3\u679C\uFF1A
...
`;

// src/llm.ts
var import_obsidian4 = require("obsidian");
async function sendLLMRequest(prompt, llmSettings) {
  try {
    const body = {
      "model": llmSettings.modelName,
      "tempreture": 1,
      "messages": [
        {
          "role": "system",
          "content": "\u4F60\u662F\u4E00\u4E2A\u5B66\u751F\u5B66\u4E60\u52A9\u7406\u3002"
        },
        {
          "role": "user",
          "content": prompt
        }
      ]
    };
    const jsonBody = JSON.stringify(body);
    const headers = {
      "Content-Type": "application/json",
      // 使用 API Key 进行鉴权
      "Authorization": `Bearer ${llmSettings.apiKey}`
    };
    const requestParam = {
      url: llmSettings.apiBase,
      method: "POST",
      headers,
      body: jsonBody
    };
    const response = await (0, import_obsidian4.requestUrl)(requestParam);
    if (response.status != 200) {
      console.error("Send llm request error", response);
      return "";
    }
    const result = response.json;
    return result.choices[0].message.content;
  } catch (error) {
    console.error("\u8C03\u7528\u5927\u6A21\u578B\u51FA\u9519:", error);
    throw error;
  }
}

// src/locales/en.ts
var pluginName = "Student Repo";
var similarTopics = "Similar Topics";
var learningPoints = "Knowledge Points";
var imageToText = "Image to Text";
var textToSpeech = "Text to Speech";
var translateText = "Translate";
var addWordBank = "Add to Word Bank";
var syntaxAnalysis = "Syntax Analysis";
var en_default = {
  pluginName: `${pluginName}`,
  similarTopics: `${similarTopics}`,
  learningPoints: `${learningPoints}`,
  imageToText: `${imageToText}`,
  textToSpeech: `${textToSpeech}`,
  translateText: `${translateText}`,
  addWordBank: `${addWordBank}`,
  syntaxAnalysis: `${syntaxAnalysis}`,
  imageToTextMenu: `${pluginName}: ${imageToText}`,
  textToSpeechMenu: `${pluginName}: ${textToSpeech}`,
  translateTextMenu: `${pluginName}: ${translateText}`,
  addWordBankMenu: `${pluginName}: ${addWordBank}`,
  syntaxAnalysisMenu: `${pluginName}: ${syntaxAnalysis}`,
  genSimilarTopicsMenu: `${pluginName}: ${similarTopics}`,
  genLearningPointsMenu: `${pluginName}: ${learningPoints}`,
  createNodeFromImagesMenu: `${pluginName}: Create note from images`,
  createNodeFromImageMenu: `${pluginName}: Create note from image`,
  analysisAndSummarize: `Analyze & Summarize`,
  // For settings
  llmProvider: "Alibaba Qwen",
  ocrProvider: "Baidu Cloud",
  ttsProvider: "Microsoft Azure",
  studentGrade: `Student Grade`,
  localLanguage: "Local Language",
  llmSetting: `LLM Settings`,
  ocrSetting: "OCR and Translation",
  speechSetting: "Speech Synthesis",
  speechSubscriptionKey: "Speech Subscription Key",
  speechVoiceType: "Speech Voice Type",
  speechVoiceGB: "Great Britain",
  speechVoiceCN: "Mandarin",
  speechVoiceUS: "USA",
  mtSubscriptionKey: "Translation Subscription Key",
  // For status bar
  errorHappen: "Error Happened",
  imageToTexting: "Image to text...",
  textToSpeeching: "Text to speech...",
  translating: "Translating...",
  thinking: "Thinking..."
};

// src/locales/zh-CN.ts
var pluginName2 = "\u5B66\u751F\u77E5\u8BC6\u5E93";
var similarTopics2 = "\u9898\u76EE\u6269\u5C55";
var learningPoints2 = "\u77E5\u8BC6\u70B9\u5206\u6790";
var imageToText2 = "\u6587\u5B57\u8BC6\u522B";
var textToSpeech2 = "\u6587\u5B57\u8F6C\u8BED\u97F3";
var translateText2 = "\u7FFB\u8BD1";
var addWordBank2 = "\u52A0\u5355\u8BCD\u5E93";
var syntaxAnalysis2 = "\u8BED\u6CD5\u5206\u6790";
var zh_CN_default = {
  pluginName: `${pluginName2}`,
  similarTopics: `${similarTopics2}`,
  learningPoints: `${learningPoints2}`,
  imageToText: `${imageToText2}`,
  textToSpeech: `${textToSpeech2}`,
  translateText: `${translateText2}`,
  addWordBank: `${addWordBank2}`,
  syntaxAnalysis: `${syntaxAnalysis2}`,
  imageToTextMenu: `${pluginName2}: ${imageToText2}`,
  textToSpeechMenu: `${pluginName2}: ${textToSpeech2}`,
  translateTextMenu: `${pluginName2}: ${translateText2}`,
  addWordBankMenu: `${pluginName2}: ${addWordBank2}`,
  syntaxAnalysisMenu: `${pluginName2}: ${syntaxAnalysis2}`,
  genSimilarTopicsMenu: `${pluginName2}: ${similarTopics2}`,
  genLearningPointsMenu: `${pluginName2}: ${learningPoints2}`,
  createNodeFromImagesMenu: `${pluginName2}: \u4ECE\u56FE\u7247\u751F\u6210\u7B14\u8BB0`,
  createNodeFromImageMenu: `${pluginName2}: \u4ECE\u56FE\u7247\u751F\u6210\u7B14\u8BB0`,
  analysisAndSummarize: `\u5206\u6790&\u6269\u5C55`,
  // For settings
  llmProvider: "\u963F\u91CC\u5343\u95EE",
  ocrProvider: "\u767E\u5EA6\u4E91",
  ttsProvider: "\u5FAE\u8F6FAzure",
  studentGrade: `\u5B66\u751F\u5E74\u7EA7`,
  localLanguage: "\u672C\u5730\u8BED\u8A00",
  llmSetting: `\u5927\u6A21\u578B\u914D\u7F6E`,
  ocrSetting: "\u6587\u5B57\u8BC6\u522B\u4E0E\u7FFB\u8BD1",
  speechSetting: "\u8BED\u97F3\u5408\u6210",
  speechSubscriptionKey: "\u8BED\u97F3\u670D\u52A1Key",
  speechVoiceType: "\u8BED\u97F3\u98CE\u683C",
  speechVoiceGB: "\u82F1\u5F0F",
  speechVoiceUS: "\u7F8E\u5F0F",
  speechVoiceCN: "\u666E\u901A\u8BDD",
  mtSubscriptionKey: "\u7FFB\u8BD1\u670D\u52A1Key",
  // For status bar
  errorHappen: "\u51FA\u9519\u4E86",
  imageToTexting: "\u6587\u5B57\u8BC6\u522B\u4E2D...",
  textToSpeeching: "\u8BED\u97F3\u5408\u6210\u4E2D...",
  translating: "\u7FFB\u8BD1\u4E2D...",
  thinking: "\u601D\u8003\u4E2D..."
};

// src/main.ts
var StudentRepoPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    var _a;
    const locale = window.localStorage.getItem("language");
    this.isLangZh = (_a = locale == null ? void 0 : locale.startsWith("zh")) != null ? _a : false;
    this.trans = this.isLangZh ? zh_CN_default : en_default;
    this.addSettingTab(new StudentRepoSettingTab(this.app, this));
    await this.loadSettings();
    console.log("Student Repository Helper loaded");
    console.log("Settings:", this.settings);
    console.log("Platform isDesktop:", import_obsidian5.Platform.isDesktop);
    console.log("Platform isMobile:", import_obsidian5.Platform.isMobile);
    console.log("Platform isWin:", import_obsidian5.Platform.isWin);
    this.registerFileMenu();
    this.registerEditorMenu();
    this.registerCommand();
  }
  registerFileMenu() {
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        var isImages = isImageFiles(files);
        if (isImages) {
          if (isImages) {
            menu.addItem((item) => {
              item.setTitle(this.trans.createNodeFromImagesMenu).setIcon("document").onClick(async () => {
                await createImagesNote(files);
              });
            });
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        const isImage = isFileImage(file.path);
        if (isImage) {
          menu.addItem((item) => {
            item.setTitle(this.trans.createNodeFromImageMenu).setIcon("document").onClick(async () => {
              var files = [file];
              await createImagesNote(files);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.imageToTextMenu).setIcon("document").onClick(async () => {
              const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
              if (view) {
                await this.handleOcrRequest(file.path, view.editor);
              }
            });
          });
        }
      })
    );
  }
  async handleOcrRequest(imageFile, editor, line = -1) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.imageToTexting);
    console.log("\u6587\u5B57\u8BC6\u522B:", imageFile);
    try {
      const file = await this.getLinkedFile(imageFile);
      if (!file) {
        new import_obsidian5.Notice(`Image file not exist: ${imageFile}`);
      } else {
        if (this.isLangZh) {
          new import_obsidian5.Notice(`\u5C06<${imageFile}>\u8F6C\u6210\u6587\u5B57`);
        } else {
          new import_obsidian5.Notice(`Convert <${imageFile}> to text`);
        }
        var imageBuffer = await this.app.vault.adapter.readBinary(file.path);
        const isUpdate = await checkAccessToken(this.settings.ocrSettings);
        if (isUpdate) {
          await this.saveSettings();
        }
        const text = await imageToTextHttp(imageBuffer, this.settings.ocrSettings);
        if (line < 0) {
          line = editor.getCursor().line + 1;
        }
        const nextLinePos = { line, ch: 0 };
        editor.replaceRange(`${text}
`, nextLinePos);
        editor.setCursor(nextLinePos);
        editor.scrollIntoView({ from: { line, ch: 0 }, to: { line: line + 20, ch: 0 } });
      }
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleImagesToTextRequest(mdFile, editor) {
    const mdContent = await this.app.vault.read(mdFile);
    const lines = mdContent.split("\n");
    const imageRegex = /!\[\[(.*\.(jpg|jpeg|png|bmp))\]\]/;
    for (let i = lines.length - 1; i >= 0; i--) {
      const line = lines[i];
      const match = line.match(imageRegex);
      if (match) {
        const imagePath = match[1];
        console.log(`Image match: ${imagePath} in line ${i}`);
        await this.handleOcrRequest(imagePath, editor, i + 1);
      }
    }
  }
  async handleTextToSpeechRequest(text, mdFile, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.textToSpeeching);
    try {
      const { full_path, rel_path } = await this.getAudioFilePath(mdFile, this.settings);
      text = removeMarkdownTags(text);
      console.time("textToSpeech");
      let audio_buffer = await textToSpeechHttp(text, this.settings.speechSettings.subscriptionKey, this.settings.speechSettings.speechVoice);
      await this.app.vault.adapter.writeBinary(rel_path, audio_buffer);
      console.timeEnd("textToSpeech");
      console.log(`Audio saved to ${rel_path}`);
      let md_text = `\`\`\`audio-player
 [[${rel_path}]]
\`\`\`
`;
      const startOffset = editor.getCursor("from");
      const nextLinePos = { line: startOffset.line, ch: 0 };
      editor.replaceRange(md_text, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleTranslateTextRequest(text, editor) {
    const isUpdate = await checkAccessToken(this.settings.ocrSettings);
    if (isUpdate) {
      await this.saveSettings();
    }
    let toLang = this.settings.stuSettings.localLanguage === "zh-Hans" ? "zh" : "en";
    const translatedText = await translateTextHttp(text, toLang, this.settings.ocrSettings);
    const endOffset = editor.getCursor("to");
    editor.replaceRange(`(${translatedText})`, endOffset);
  }
  async handleAddToWordBankRequest(word, editor) {
    const prompt = GENERATE_WORD_PHONETICS_TEMPLATE.replace("{WORD}", word);
    var phonetics = await sendLLMRequest(prompt, this.settings.llmSettings);
    if (!phonetics.startsWith("/")) {
      phonetics = `/${phonetics}/`;
    }
    const isUpdate = await checkAccessToken(this.settings.ocrSettings);
    if (isUpdate) {
      await this.saveSettings();
    }
    let toLang = this.settings.stuSettings.localLanguage === "zh-Hans" ? "zh" : "en";
    const translatedText = await translateTextHttp(word, toLang, this.settings.ocrSettings);
    const lastLine = editor.lastLine();
    const lastLineText = editor.getLine(lastLine);
    if (lastLineText.startsWith(" - ")) {
      editor.setLine(lastLine + 1, `
 - ${word} ${phonetics} ${translatedText}`);
    } else {
      editor.setLine(lastLine + 1, `

 Word Bank 
 - ${word} ${phonetics}  ${translatedText}`);
    }
  }
  async handleSyntaxAnalysisRequest(text, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText("\u601D\u8003\u4E2D...");
    try {
      const prompt = SYNTAX_ANALYSIS_TEMPLATE.replace("{TEXT}", text);
      const result = await sendLLMRequest(prompt, this.settings.llmSettings);
      const lastLine = editor.lastLine();
      const displayText = `
${text}

 ${result}`;
      editor.setLine(lastLine + 1, `${addQuoteToText(displayText, this.trans.syntaxAnalysis)}

`);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleGenSimilarTopicRequest(topic, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText("\u601D\u8003\u4E2D...");
    try {
      var prompt = "";
      if (this.settings.stuSettings.localLanguage === "zh-Hans") {
        prompt = GENERATE_SIMILAR_TOPIC_TEMPLATE.replace("{GRADE}", this.settings.stuSettings.grade).replace("{TOPIC}", topic).replace("{LANGUAGE}", "\u4E2D\u6587");
      } else {
        prompt = GENERATE_SIMILAR_TOPIC_TEMPLATE_EN.replace("{GRADE}", this.settings.stuSettings.grade).replace("{TOPIC}", topic).replace("{LANGUAGE}", "English");
      }
      const result = await sendLLMRequest(prompt, this.settings.llmSettings);
      const endOffset = editor.getCursor("to");
      const nextLinePos = { line: endOffset.line + 1, ch: 0 };
      editor.replaceRange(`${addQuoteToText(result, this.trans.similarTopics)}

`, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleGenLearningPointRequest(topic, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.thinking);
    try {
      var prompt = "";
      if (this.settings.stuSettings.localLanguage === "zh-Hans") {
        prompt = GENERATE_LEARNING_POINTS_TEMPLATE.replace("{TOPIC}", topic).replace("{LANGUAGE}", "\u4E2D\u6587");
      } else {
        prompt = GENERATE_LEARNING_POINTS_TEMPLATE_EN.replace("{TOPIC}", topic).replace("{LANGUAGE}", "English");
      }
      const result = await sendLLMRequest(prompt, this.settings.llmSettings);
      const endOffset = editor.getCursor("to");
      const nextLinePos = { line: endOffset.line + 1, ch: 0 };
      editor.replaceRange(`${addQuoteToText(result, this.trans.learningPoints)}

`, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handlePluginUpdate() {
    if (await this.app.vault.adapter.exists("plugins")) {
      const listFiles = await this.app.vault.adapter.list("plugins");
      for (let i = 0; i < listFiles.folders.length; i++) {
        const plugin = listFiles.folders[i];
        const pluginInstallPath = `.obsidian/${plugin}`;
        await this.app.vault.adapter.rmdir(pluginInstallPath, true);
        await this.app.vault.adapter.copy(`${plugin}`, pluginInstallPath);
        console.log(`${plugin} install to ${pluginInstallPath}`);
      }
      const statusBarItem = this.addStatusBarItem();
      statusBarItem.setText("\u63D2\u4EF6\u66F4\u65B0\u5B8C\u6210");
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  registerEditorMenu() {
    if (!import_obsidian5.Platform.isDesktop) {
      return;
    }
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        const imageRegex = /!?\[?\[?(.*\.(jpg|jpeg|png|bmp))\]?\]?/;
        const match = selection.match(imageRegex);
        if (!match) {
          menu.addItem((item) => {
            item.setTitle(this.trans.textToSpeechMenu).setIcon("document").onClick(async () => {
              this.handleTextToSpeechRequest(selection, view.file, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.translateTextMenu).setIcon("document").onClick(async () => {
              this.handleTranslateTextRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.addWordBankMenu).setIcon("document").onClick(async () => {
              this.handleAddToWordBankRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.syntaxAnalysisMenu).setIcon("document").onClick(async () => {
              this.handleSyntaxAnalysisRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.genSimilarTopicsMenu).setIcon("document").onClick(async () => {
              this.handleGenSimilarTopicRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.genLearningPointsMenu).setIcon("document").onClick(async () => {
              this.handleGenLearningPointRequest(selection, editor);
            });
          });
        }
      })
    );
  }
  registerCommand() {
    this.addCommand({
      id: "translate",
      name: this.trans.translateText,
      icon: "languages",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleTranslateTextRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "word_bank",
      name: this.trans.addWordBank,
      icon: "rss",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleAddToWordBankRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "syntax_analysis",
      name: this.trans.syntaxAnalysis,
      icon: "brain",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleSyntaxAnalysisRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "text_to_speech",
      name: this.trans.textToSpeech,
      icon: "activity",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleTextToSpeechRequest(selection, view.file, editor);
      }
    });
    this.addCommand({
      id: "gen_learning_point",
      name: this.trans.analysisAndSummarize,
      icon: "brain",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleGenSimilarTopicRequest(selection, editor);
        this.handleGenLearningPointRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "image_to_text",
      name: this.trans.imageToText,
      icon: "type",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        const imageRegex = /!?\[?\[?(.*\.(jpg|jpeg|png|bmp))\]?\]?/;
        const match = selection.match(imageRegex);
        if (match) {
          let imageFile = match[1];
          this.handleOcrRequest(imageFile, editor);
        } else {
          if (view) {
            this.handleImagesToTextRequest(view.file, editor);
          }
        }
      }
    });
    this.addCommand({
      id: "plugin_update",
      name: "Plugin Update",
      icon: "arrow-up",
      callback: async () => {
        this.handlePluginUpdate();
      }
    });
  }
  async getLinkedFile(link) {
    const file = this.app.metadataCache.getFirstLinkpathDest(link, "");
    if (!file) {
      return null;
    }
    return this.app.vault.getAbstractFileByPath(file.path);
  }
  async getAudioFilePath(tfile, settings) {
    const audio_path = (0, import_obsidian5.normalizePath)(`${tfile.parent.path}/${settings.speechSettings.speechOutputPath}`);
    if (!await this.app.vault.adapter.exists(audio_path)) {
      await this.app.vault.adapter.mkdir(audio_path);
    }
    var audio_full_path = this.app.vault.adapter.getFullPath(audio_path);
    var full_path = "";
    var rel_path = "";
    var i = 0;
    do {
      var output_fname = "";
      if (i > 0) {
        output_fname = `${tfile.basename}_${i}.mp3`;
      } else {
        output_fname = `${tfile.basename}.mp3`;
      }
      full_path = (0, import_obsidian5.normalizePath)(`${audio_full_path}/${output_fname}`);
      rel_path = (0, import_obsidian5.normalizePath)(`${audio_path}/${output_fname}`);
      i++;
    } while (await this.app.vault.adapter.exists(rel_path));
    return { full_path, rel_path };
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
function isFileImage(path) {
  return path.endsWith(".png") || path.endsWith(".jpg") || path.endsWith(".jpeg") || path.endsWith(".webp") || path.endsWith(".gif") || path.endsWith(".bmp");
}
function isImageFiles(files) {
  var j;
  for (j in files) {
    var f_path = files[j].path;
    if (!isFileImage(f_path)) {
      return false;
    }
  }
  return true;
}
async function createNote(name, contents = "") {
  var _a, _b, _c;
  try {
    let pathPrefix;
    switch (app.vault.getConfig("newFileLocation")) {
      case "current":
        pathPrefix = (_c = (_b = (_a = app.workspace.getActiveFile()) == null ? void 0 : _a.parent) == null ? void 0 : _b.path) != null ? _c : "";
        break;
      case "folder":
        pathPrefix = app.vault.getConfig("newFileFolderPath");
        break;
      default:
        pathPrefix = "";
        break;
    }
    if (pathPrefix) {
      pathPrefix += "/";
    }
    let path = `${pathPrefix}${name}`;
    console.log(`pathPrefix: ${pathPrefix}, name: ${name}`);
    if (app.vault.getAbstractFileByPath(`${path}.md`)) {
      let i = 1;
      while (await app.vault.getAbstractFileByPath(`${path} ${i}.md`)) {
        i++;
      }
      path += ` ${i}`;
    }
    await app.vault.create(`${path}.md`, contents);
    await app.workspace.openLinkText(path, "");
  } catch (e) {
    new import_obsidian5.Notice("Text Extract - Could not create note: " + e.message);
    throw e;
  }
}
async function createImagesNote(files) {
  var j;
  var file_paths = new Array(files.length);
  for (j in files) {
    console.log(`ppath: ${files[j].parent.path}, pname: ${files[j].parent.name}`);
    file_paths[j] = files[j].path;
  }
  file_paths.sort();
  var contents = "";
  for (j in file_paths) {
    console.log(file_paths[j]);
    contents += `![[${file_paths[j]}]]
`;
  }
  console.log(contents);
  await createNote("Untitled", contents);
}
function addQuoteToText(text, note) {
  return `
> [!NOTE] ${note}
` + text.split("\n").map((line) => `> ${line}`).join("\n");
}
function removeMarkdownTags(text) {
  text = text.replace(/^(#+)\s/gm, "");
  text = text.replace(/(\*\*|__|_|\*)/g, "");
  text = text.replace(/^([-*+]\s|\d+\.\s)/gm, "");
  text = text.replace(/```[\s\S]*?```/g, "");
  text = text.replace(/`([^`]*)`/g, "$1");
  text = text.replace(/!?\[[^\]]*\]\([^)]*\)/g, "");
  text = text.replace(/^---+$/gm, "");
  text = text.replace(/<[^>]*>/g, "");
  return text;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9tc19henVyZS50cyIsICJzcmMvYmFpZHVfYWkudHMiLCAic3JjL3Byb21wdC50cyIsICJzcmMvbGxtLnRzIiwgInNyYy9sb2NhbGVzL2VuLnRzIiwgInNyYy9sb2NhbGVzL3poLUNOLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgUGxhdGZvcm0sIEVkaXRvciwgTWFya2Rvd25WaWV3LCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU3R1ZGVudFJlcG9TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgU3R1ZGVudFJlcG9TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyB0ZXh0VG9TcGVlY2hIdHRwIH0gZnJvbSBcIi4vbXNfYXp1cmVcIjtcbmltcG9ydCB7IGNoZWNrQWNjZXNzVG9rZW4sIGltYWdlVG9UZXh0SHR0cCwgdHJhbnNsYXRlVGV4dEh0dHAgfSBmcm9tIFwiLi9iYWlkdV9haVwiO1xuaW1wb3J0IHsgXG4gIEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUsXG4gIEdFTkVSQVRFX0xFQVJOSU5HX1BPSU5UU19URU1QTEFURSxcbiAgR0VORVJBVEVfV09SRF9QSE9ORVRJQ1NfVEVNUExBVEUsXG4gIEdFTkVSQVRFX0xFQVJOSU5HX1BPSU5UU19URU1QTEFURV9FTixcbiAgR0VORVJBVEVfU0lNSUxBUl9UT1BJQ19URU1QTEFURV9FTixcbiAgU1lOVEFYX0FOQUxZU0lTX1RFTVBMQVRFXG59IGZyb20gJy4vcHJvbXB0J1xuXG5pbXBvcnQgeyBzZW5kTExNUmVxdWVzdCB9IGZyb20gJy4vbGxtJ1xuaW1wb3J0IGVuIGZyb20gJy4vbG9jYWxlcy9lbidcbmltcG9ydCB6aCBmcm9tICcuL2xvY2FsZXMvemgtQ04nXG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHVkZW50UmVwb1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBTdHVkZW50UmVwb1NldHRpbmdzO1xuICB0cmFuczogYW55O1xuICBpc0xhbmdaaDogYm9vbGVhbjs7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnN0IGxvY2FsZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKVxuICAgIHRoaXMuaXNMYW5nWmggPSBsb2NhbGU/LnN0YXJ0c1dpdGgoJ3poJykgPz8gZmFsc2U7XG4gICAgdGhpcy50cmFucyA9IHRoaXMuaXNMYW5nWmggPyB6aCA6IGVuO1xuXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTdHVkZW50UmVwb1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgY29uc29sZS5sb2coJ1N0dWRlbnQgUmVwb3NpdG9yeSBIZWxwZXIgbG9hZGVkJyk7XG4gICAgY29uc29sZS5sb2coJ1NldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgIGNvbnNvbGUubG9nKCdQbGF0Zm9ybSBpc0Rlc2t0b3A6JywgUGxhdGZvcm0uaXNEZXNrdG9wKTtcbiAgICBjb25zb2xlLmxvZygnUGxhdGZvcm0gaXNNb2JpbGU6JywgUGxhdGZvcm0uaXNNb2JpbGUpO1xuICAgIGNvbnNvbGUubG9nKCdQbGF0Zm9ybSBpc1dpbjonLCBQbGF0Zm9ybS5pc1dpbik7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRmlsZU1lbnUoKTtcbiAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yTWVudSgpO1xuICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKCk7XG5cdH1cblxuICByZWdpc3RlckZpbGVNZW51KCk6IHZvaWQge1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICB2YXIgaXNJbWFnZXMgPSBpc0ltYWdlRmlsZXMoZmlsZXMpXG4gICAgICAgIGlmIChpc0ltYWdlcykge1xuICAgICAgICAgIGlmIChpc0ltYWdlcykge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUodGhpcy50cmFucy5jcmVhdGVOb2RlRnJvbUltYWdlc01lbnUpXG4gICAgICAgICAgICAgIC5zZXRJY29uKCdkb2N1bWVudCcpXG4gICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUltYWdlc05vdGUoZmlsZXMpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzSW1hZ2UgPSBpc0ZpbGVJbWFnZShmaWxlLnBhdGgpXG4gICAgICAgIGlmIChpc0ltYWdlKSB7XG4gICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKHRoaXMudHJhbnMuY3JlYXRlTm9kZUZyb21JbWFnZU1lbnUpXG4gICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgIHZhciBmaWxlcyA9IFtmaWxlXVxuICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVJbWFnZXNOb3RlKGZpbGVzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUodGhpcy50cmFucy5pbWFnZVRvVGV4dE1lbnUpXG4gICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2NyUmVxdWVzdChmaWxlLnBhdGgsIHZpZXcuZWRpdG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXHRcdFx0fSlcblx0XHQpO1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlT2NyUmVxdWVzdChpbWFnZUZpbGU6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IsIGxpbmU6IG51bWJlciA9IC0xKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLmltYWdlVG9UZXh0aW5nKTtcbiAgICBjb25zb2xlLmxvZygnXHU2NTg3XHU1QjU3XHU4QkM2XHU1MjJCOicsIGltYWdlRmlsZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmdldExpbmtlZEZpbGUoaW1hZ2VGaWxlKTtcbiAgICAgIGlmICghZmlsZSkge1xuICAgICAgICBuZXcgTm90aWNlKGBJbWFnZSBmaWxlIG5vdCBleGlzdDogJHtpbWFnZUZpbGV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5pc0xhbmdaaCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NUMwNjwke2ltYWdlRmlsZX0+XHU4RjZDXHU2MjEwXHU2NTg3XHU1QjU3YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgQ29udmVydCA8JHtpbWFnZUZpbGV9PiB0byB0ZXh0YCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlQnVmZmVyOiBBcnJheUJ1ZmZlciA9ICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWRCaW5hcnkoZmlsZS5wYXRoKVxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTc2N0VcdTVFQTZcdTRFOTFcdTYzRDBcdTRGOUJcdTc2ODRcdTY1ODdcdTVCNTdcdThCQzZcdTUyMkJcdTY3MERcdTUyQTFcbiAgICAgICAgY29uc3QgaXNVcGRhdGUgPSBhd2FpdCBjaGVja0FjY2Vzc1Rva2VuKHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpO1xuICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBpbWFnZVRvVGV4dEh0dHAoaW1hZ2VCdWZmZXIsIHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpXG4gICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NUZBRVx1OEY2Rlx1NjNEMFx1NEY5Qlx1NzY4NG9jclx1NjcwRFx1NTJBMVxuICAgICAgICAvL2NvbnN0IHRleHQgPSBhd2FpdCBpbWFnZVRvVGV4dChpbWFnZUJ1ZmZlciwgXCJ0Y0k5NER4d2tTNXE3ZVg5UWpLc2p0V3NVTmd1NjBtOEJqcFRtblZjeDA0blFkYXU3UWRYSlFRSjk5QkJBQzNwS2FSWEozdzNBQUFGQUNPRzJSQzJcIilcbiAgICAgICAgaWYgKGxpbmUgPCAwKSB7XG4gICAgICAgICAgbGluZSA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lICsgMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBsaW5lLCBjaDogMH07XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7dGV4dH1cXG5gLG5leHRMaW5lUG9zKTtcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcihuZXh0TGluZVBvcyk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7ZnJvbToge2xpbmUsIGNoOiAwfSwgdG86IHtsaW5lOiBsaW5lICsgMjAsIGNoOiAwfX0pO1xuICAgICAgfVxuICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLmVycm9ySGFwcGVuICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcIik7XG4gICAgICB9LCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVJbWFnZXNUb1RleHRSZXF1ZXN0KG1kRmlsZTogVEZpbGUsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICAvLyBQYXJzZSBtZCBmaWxlLCBnZXQgYWxsIGltYWdlIGxpbmtzXG4gICAgY29uc3QgbWRDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChtZEZpbGUpO1xuICAgIGNvbnN0IGxpbmVzID0gbWRDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBpbWFnZVJlZ2V4ID0gLyFcXFtcXFsoLipcXC4oanBnfGpwZWd8cG5nfGJtcCkpXFxdXFxdLztcbiAgICBmb3IgKGxldCBpID0gbGluZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaChpbWFnZVJlZ2V4KTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGltYWdlUGF0aCA9IG1hdGNoWzFdO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBJbWFnZSBtYXRjaDogJHtpbWFnZVBhdGh9IGluIGxpbmUgJHtpfWApXG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVPY3JSZXF1ZXN0KGltYWdlUGF0aCwgZWRpdG9yLCBpICsgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVGV4dFRvU3BlZWNoUmVxdWVzdCh0ZXh0OiBzdHJpbmcsIG1kRmlsZTogVEZpbGUsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLnRleHRUb1NwZWVjaGluZyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZnVsbF9wYXRoLCByZWxfcGF0aCB9ID0gYXdhaXQgdGhpcy5nZXRBdWRpb0ZpbGVQYXRoKG1kRmlsZSwgdGhpcy5zZXR0aW5ncylcbiAgICAgIHRleHQgPSByZW1vdmVNYXJrZG93blRhZ3ModGV4dCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUudGltZSgndGV4dFRvU3BlZWNoJylcbiAgICAgIGxldCBhdWRpb19idWZmZXIgPSBhd2FpdCB0ZXh0VG9TcGVlY2hIdHRwKHRleHQsIHRoaXMuc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5LCB0aGlzLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnNwZWVjaFZvaWNlKVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZUJpbmFyeShyZWxfcGF0aCwgYXVkaW9fYnVmZmVyKVxuICAgICAgLy9hd2FpdCB0ZXh0VG9TcGVlY2godGV4dCwgZnVsbF9wYXRoLCB0aGlzLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnN1YnNjcmlwdGlvbktleSwgdGhpcy5zZXR0aW5ncy5zcGVlY2hTZXR0aW5ncy5zcGVlY2hWb2ljZSlcbiAgICAgIGNvbnNvbGUudGltZUVuZCgndGV4dFRvU3BlZWNoJylcbiAgICAgIGNvbnNvbGUubG9nKGBBdWRpbyBzYXZlZCB0byAke3JlbF9wYXRofWApO1xuICAgICAgXG4gICAgICBsZXQgbWRfdGV4dCA9IGBcXGBcXGBcXGBhdWRpby1wbGF5ZXJcXG4gW1ske3JlbF9wYXRofV1dXFxuXFxgXFxgXFxgXFxuYFxuICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBlZGl0b3IuZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBzdGFydE9mZnNldC5saW5lLCBjaDogMH07XG4gICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG1kX3RleHQsIG5leHRMaW5lUG9zKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy5lcnJvckhhcHBlbiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVHJhbnNsYXRlVGV4dFJlcXVlc3QodGV4dDogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFx1NEY3Rlx1NzUyOFx1NUZBRVx1OEY2Rlx1NzY4NFx1NjczQVx1NTY2OFx1N0ZGQlx1OEJEMVx1NjcwRFx1NTJBMVxuICAgIC8vbGV0IHRyYW5zbGF0ZWRUZXh0ID0gYXdhaXQgdHJhbnNsYXRlVGV4dCh0ZXh0LCB0aGlzLnNldHRpbmdzLnN0dVNldHRpbmdzLmxvY2FsTGFuZ3VhZ2UsIHRoaXMuc2V0dGluZ3MubXRTZXR0aW5ncy5zdWJzY3JpcHRpb25LZXkpXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU3NjdFXHU1RUE2XHU0RTkxXHU2M0QwXHU0RjlCXHU3Njg0XHU2NzNBXHU1NjY4XHU3RkZCXHU4QkQxXHU2NzBEXHU1MkExXG4gICAgY29uc3QgaXNVcGRhdGUgPSBhd2FpdCBjaGVja0FjY2Vzc1Rva2VuKHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpO1xuICAgIGlmIChpc1VwZGF0ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG4gICAgbGV0IHRvTGFuZyA9IHRoaXMuc2V0dGluZ3Muc3R1U2V0dGluZ3MubG9jYWxMYW5ndWFnZSA9PT0gJ3poLUhhbnMnID8gJ3poJyA6ICdlbic7XG4gICAgY29uc3QgdHJhbnNsYXRlZFRleHQgPSBhd2FpdCB0cmFuc2xhdGVUZXh0SHR0cCh0ZXh0LCB0b0xhbmcsIHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpXG4gICAgY29uc3QgZW5kT2Zmc2V0ID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAoJHt0cmFuc2xhdGVkVGV4dH0pYCwgZW5kT2Zmc2V0KTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUFkZFRvV29yZEJhbmtSZXF1ZXN0KHdvcmQ6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBHRU5FUkFURV9XT1JEX1BIT05FVElDU19URU1QTEFURS5yZXBsYWNlKCd7V09SRH0nLCB3b3JkKTtcbiAgICB2YXIgcGhvbmV0aWNzID0gYXdhaXQgc2VuZExMTVJlcXVlc3QocHJvbXB0LCB0aGlzLnNldHRpbmdzLmxsbVNldHRpbmdzKTtcbiAgICBpZiAoIXBob25ldGljcy5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHBob25ldGljcyA9IGAvJHtwaG9uZXRpY3N9L2A7XG4gICAgfVxuICAgIC8vY29uc3QgdHJhbnNsYXRlZFRleHQgPSBhd2FpdCB0cmFuc2xhdGVUZXh0KHdvcmQsIHRoaXMuc2V0dGluZ3Muc3R1U2V0dGluZ3MubG9jYWxMYW5ndWFnZSwgdGhpcy5zZXR0aW5ncy5tdFNldHRpbmdzLnN1YnNjcmlwdGlvbktleSlcbiAgICAvLyBcdTRGN0ZcdTc1MjhcdTc2N0VcdTVFQTZcdTRFOTFcdTYzRDBcdTRGOUJcdTc2ODRcdTY3M0FcdTU2NjhcdTdGRkJcdThCRDFcdTY3MERcdTUyQTFcbiAgICBjb25zdCBpc1VwZGF0ZSA9IGF3YWl0IGNoZWNrQWNjZXNzVG9rZW4odGhpcy5zZXR0aW5ncy5vY3JTZXR0aW5ncyk7XG4gICAgaWYgKGlzVXBkYXRlKSB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH1cbiAgICBsZXQgdG9MYW5nID0gdGhpcy5zZXR0aW5ncy5zdHVTZXR0aW5ncy5sb2NhbExhbmd1YWdlID09PSAnemgtSGFucycgPyAnemgnIDogJ2VuJztcbiAgICBjb25zdCB0cmFuc2xhdGVkVGV4dCA9IGF3YWl0IHRyYW5zbGF0ZVRleHRIdHRwKHdvcmQsIHRvTGFuZywgdGhpcy5zZXR0aW5ncy5vY3JTZXR0aW5ncylcbiAgICBjb25zdCBsYXN0TGluZSA9IGVkaXRvci5sYXN0TGluZSgpO1xuICAgIGNvbnN0IGxhc3RMaW5lVGV4dCA9IGVkaXRvci5nZXRMaW5lKGxhc3RMaW5lKTtcbiAgICBpZiAobGFzdExpbmVUZXh0LnN0YXJ0c1dpdGgoJyAtICcpKSB7XG4gICAgICBlZGl0b3Iuc2V0TGluZShsYXN0TGluZSArIDEsIGBcXG4gLSAke3dvcmR9ICR7cGhvbmV0aWNzfSAke3RyYW5zbGF0ZWRUZXh0fWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3Iuc2V0TGluZShsYXN0TGluZSArIDEsIGBcXG5cXG4gV29yZCBCYW5rIFxcbiAtICR7d29yZH0gJHtwaG9uZXRpY3N9ICAke3RyYW5zbGF0ZWRUZXh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVN5bnRheEFuYWx5c2lzUmVxdWVzdCh0ZXh0OiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlx1NjAxRFx1ODAwM1x1NEUyRC4uLlwiKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvbXB0ID0gU1lOVEFYX0FOQUxZU0lTX1RFTVBMQVRFLnJlcGxhY2UoJ3tURVhUfScsIHRleHQpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZExMTVJlcXVlc3QocHJvbXB0LCB0aGlzLnNldHRpbmdzLmxsbVNldHRpbmdzKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gZWRpdG9yLmxhc3RMaW5lKCk7XG4gICAgICBjb25zdCBkaXNwbGF5VGV4dCA9IGBcXG4ke3RleHR9XFxuXFxuICR7cmVzdWx0fWA7XG4gICAgICBlZGl0b3Iuc2V0TGluZShsYXN0TGluZSArIDEsIGAke2FkZFF1b3RlVG9UZXh0KGRpc3BsYXlUZXh0LCB0aGlzLnRyYW5zLnN5bnRheEFuYWx5c2lzKX1cXG5cXG5gKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy5lcnJvckhhcHBlbiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlR2VuU2ltaWxhclRvcGljUmVxdWVzdCh0b3BpYzogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXR1c0Jhckl0ZW0gPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcdTYwMURcdTgwMDNcdTRFMkQuLi5cIik7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBwcm9tcHQgPSAnJztcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLnN0dVNldHRpbmdzLmxvY2FsTGFuZ3VhZ2UgPT09ICd6aC1IYW5zJykge1xuICAgICAgICBwcm9tcHQgPSBHRU5FUkFURV9TSU1JTEFSX1RPUElDX1RFTVBMQVRFLnJlcGxhY2UoJ3tHUkFERX0nLCB0aGlzLnNldHRpbmdzLnN0dVNldHRpbmdzLmdyYWRlKS5yZXBsYWNlKCd7VE9QSUN9JywgdG9waWMpLnJlcGxhY2UoJ3tMQU5HVUFHRX0nLCAnXHU0RTJEXHU2NTg3Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9tcHQgPSBHRU5FUkFURV9TSU1JTEFSX1RPUElDX1RFTVBMQVRFX0VOLnJlcGxhY2UoJ3tHUkFERX0nLCB0aGlzLnNldHRpbmdzLnN0dVNldHRpbmdzLmdyYWRlKS5yZXBsYWNlKCd7VE9QSUN9JywgdG9waWMpLnJlcGxhY2UoJ3tMQU5HVUFHRX0nLCAnRW5nbGlzaCcpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZExMTVJlcXVlc3QocHJvbXB0LCB0aGlzLnNldHRpbmdzLmxsbVNldHRpbmdzKTtcbiAgICAgIGNvbnN0IGVuZE9mZnNldCA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBlbmRPZmZzZXQubGluZSArIDEsIGNoOiAwfTtcbiAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7YWRkUXVvdGVUb1RleHQocmVzdWx0LCB0aGlzLnRyYW5zLnNpbWlsYXJUb3BpY3MpfVxcblxcbmAsIG5leHRMaW5lUG9zKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy5lcnJvckhhcHBlbiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlR2VuTGVhcm5pbmdQb2ludFJlcXVlc3QodG9waWM6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KHRoaXMudHJhbnMudGhpbmtpbmcpO1xuICAgIHRyeSB7XG4gICAgICB2YXIgcHJvbXB0ID0gJyc7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5zdHVTZXR0aW5ncy5sb2NhbExhbmd1YWdlID09PSAnemgtSGFucycpIHtcbiAgICAgICAgcHJvbXB0ID0gR0VORVJBVEVfTEVBUk5JTkdfUE9JTlRTX1RFTVBMQVRFLnJlcGxhY2UoJ3tUT1BJQ30nLCB0b3BpYykucmVwbGFjZSgne0xBTkdVQUdFfScsICdcdTRFMkRcdTY1ODcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21wdCA9IEdFTkVSQVRFX0xFQVJOSU5HX1BPSU5UU19URU1QTEFURV9FTi5yZXBsYWNlKCd7VE9QSUN9JywgdG9waWMpLnJlcGxhY2UoJ3tMQU5HVUFHRX0nLCAnRW5nbGlzaCcpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZExMTVJlcXVlc3QocHJvbXB0LCB0aGlzLnNldHRpbmdzLmxsbVNldHRpbmdzKTtcbiAgICAgIGNvbnN0IGVuZE9mZnNldCA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBlbmRPZmZzZXQubGluZSArIDEsIGNoOiAwfTtcbiAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7YWRkUXVvdGVUb1RleHQocmVzdWx0LCB0aGlzLnRyYW5zLmxlYXJuaW5nUG9pbnRzKX1cXG5cXG5gLCBuZXh0TGluZVBvcyk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KHRoaXMudHJhbnMuZXJyb3JIYXBwZW4gKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICAgIH0sIDUwMDApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVBsdWdpblVwZGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoJ3BsdWdpbnMnKSkge1xuICAgICAgY29uc3QgbGlzdEZpbGVzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KCdwbHVnaW5zJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RGaWxlcy5mb2xkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGxpc3RGaWxlcy5mb2xkZXJzW2ldO1xuICAgICAgICBjb25zdCBwbHVnaW5JbnN0YWxsUGF0aCA9IGAub2JzaWRpYW4vJHtwbHVnaW59YDtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5ybWRpcihwbHVnaW5JbnN0YWxsUGF0aCwgdHJ1ZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuY29weShgJHtwbHVnaW59YCwgcGx1Z2luSW5zdGFsbFBhdGgpO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtwbHVnaW59IGluc3RhbGwgdG8gJHtwbHVnaW5JbnN0YWxsUGF0aH1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0YXR1c0Jhckl0ZW0gPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCgnXHU2M0QyXHU0RUY2XHU2NkY0XHU2NUIwXHU1QjhDXHU2MjEwJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcIik7XG4gICAgICB9LCA1MDAwKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJlZ2lzdGVyRWRpdG9yTWVudSgpOiB2b2lkIHtcbiAgICBpZiAoIVBsYXRmb3JtLmlzRGVza3RvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1tZW51JywgKG1lbnUsIGVkaXRvciwgdmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb246Jywgc2VsZWN0aW9uKTtcbiAgICAgICAgY29uc3QgaW1hZ2VSZWdleCA9IC8hP1xcWz9cXFs/KC4qXFwuKGpwZ3xqcGVnfHBuZ3xibXApKVxcXT9cXF0/LztcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBzZWxlY3Rpb24ubWF0Y2goaW1hZ2VSZWdleCk7XG5cbiAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgIC8vIENyZWF0ZSBBdWRpb1xuICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMudHJhbnMudGV4dFRvU3BlZWNoTWVudSlcbiAgICAgICAgICAgICAgLnNldEljb24oJ2RvY3VtZW50JylcbiAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUZXh0VG9TcGVlY2hSZXF1ZXN0KHNlbGVjdGlvbiwgdmlldy5maWxlLCBlZGl0b3IpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBUcmFuc2xhdGVcbiAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgIC5zZXRUaXRsZSh0aGlzLnRyYW5zLnRyYW5zbGF0ZVRleHRNZW51KVxuICAgICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgICAub25DbGljayhhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRyYW5zbGF0ZVRleHRSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIFx1NTJBMFx1NTM1NVx1OEJDRFx1NUU5M1xuICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMudHJhbnMuYWRkV29yZEJhbmtNZW51KVxuICAgICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgICAub25DbGljayhhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFkZFRvV29yZEJhbmtSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAvLyBcdThCRURcdTZDRDVcdTUyMDZcdTY3OTBcbiAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgIC5zZXRUaXRsZSh0aGlzLnRyYW5zLnN5bnRheEFuYWx5c2lzTWVudSlcbiAgICAgICAgICAgICAgLnNldEljb24oJ2RvY3VtZW50JylcbiAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTeW50YXhBbmFseXNpc1JlcXVlc3Qoc2VsZWN0aW9uLCBlZGl0b3IpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC8vIFx1OTg5OFx1NzZFRVx1NjI2OVx1NUM1NVxuICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMudHJhbnMuZ2VuU2ltaWxhclRvcGljc01lbnUpXG4gICAgICAgICAgICAgIC5zZXRJY29uKCdkb2N1bWVudCcpXG4gICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlR2VuU2ltaWxhclRvcGljUmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBcdTc3RTVcdThCQzZcdTcwQjlcdTUyMDZcdTY3OTBcbiAgICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgIC5zZXRUaXRsZSh0aGlzLnRyYW5zLmdlbkxlYXJuaW5nUG9pbnRzTWVudSlcbiAgICAgICAgICAgICAgLnNldEljb24oJ2RvY3VtZW50JylcbiAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVHZW5MZWFybmluZ1BvaW50UmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgfSlcbiAgICApXG4gIH1cblxuICByZWdpc3RlckNvbW1hbmQoKTogdm9pZCB7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAndHJhbnNsYXRlJyxcbiAgICAgIG5hbWU6IHRoaXMudHJhbnMudHJhbnNsYXRlVGV4dCxcbiAgICAgIGljb246IFwibGFuZ3VhZ2VzXCIsXG4gICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uOicsIHNlbGVjdGlvbik7XG4gICAgICAgIHRoaXMuaGFuZGxlVHJhbnNsYXRlVGV4dFJlcXVlc3Qoc2VsZWN0aW9uLCBlZGl0b3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3dvcmRfYmFuaycsXG4gICAgICBuYW1lOiB0aGlzLnRyYW5zLmFkZFdvcmRCYW5rLFxuICAgICAgaWNvbjogXCJyc3NcIixcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb246Jywgc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYW5kbGVBZGRUb1dvcmRCYW5rUmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc3ludGF4X2FuYWx5c2lzJyxcbiAgICAgIG5hbWU6IHRoaXMudHJhbnMuc3ludGF4QW5hbHlzaXMsXG4gICAgICBpY29uOiBcImJyYWluXCIsXG4gICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uOicsIHNlbGVjdGlvbik7XG4gICAgICAgIHRoaXMuaGFuZGxlU3ludGF4QW5hbHlzaXNSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3RleHRfdG9fc3BlZWNoJyxcbiAgICAgIG5hbWU6IHRoaXMudHJhbnMudGV4dFRvU3BlZWNoLFxuICAgICAgaWNvbjogXCJhY3Rpdml0eVwiLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbjonLCBzZWxlY3Rpb24pO1xuICAgICAgICB0aGlzLmhhbmRsZVRleHRUb1NwZWVjaFJlcXVlc3Qoc2VsZWN0aW9uLCB2aWV3LmZpbGUsIGVkaXRvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdnZW5fbGVhcm5pbmdfcG9pbnQnLFxuICAgICAgbmFtZTogdGhpcy50cmFucy5hbmFseXNpc0FuZFN1bW1hcml6ZSxcbiAgICAgIGljb246IFwiYnJhaW5cIixcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb246Jywgc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYW5kbGVHZW5TaW1pbGFyVG9waWNSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgICAgdGhpcy5oYW5kbGVHZW5MZWFybmluZ1BvaW50UmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdpbWFnZV90b190ZXh0JyxcbiAgICAgIG5hbWU6IHRoaXMudHJhbnMuaW1hZ2VUb1RleHQsXG4gICAgICBpY29uOiBcInR5cGVcIixcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnN0IGltYWdlUmVnZXggPSAvIT9cXFs/XFxbPyguKlxcLihqcGd8anBlZ3xwbmd8Ym1wKSlcXF0/XFxdPy87XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtYXRjaCA9IHNlbGVjdGlvbi5tYXRjaChpbWFnZVJlZ2V4KTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgbGV0IGltYWdlRmlsZSA9IG1hdGNoWzFdXG4gICAgICAgICAgdGhpcy5oYW5kbGVPY3JSZXF1ZXN0KGltYWdlRmlsZSwgZWRpdG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbWFnZXNUb1RleHRSZXF1ZXN0KHZpZXcuZmlsZSwgZWRpdG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsdWdpbl91cGRhdGUnLFxuICAgICAgbmFtZTogXCJQbHVnaW4gVXBkYXRlXCIsXG4gICAgICBpY29uOiBcImFycm93LXVwXCIsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZVBsdWdpblVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGlua2VkRmlsZShsaW5rOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmssICcnKTtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUucGF0aCk7XG4gIH1cblxuICBhc3luYyBnZXRBdWRpb0ZpbGVQYXRoKHRmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFN0dWRlbnRSZXBvU2V0dGluZ3MpOiB7ZnVsbF9wYXRoOiBzdHJpbmc7IHJlbF9wYXRoOiBzdHJpbmd9IHtcbiAgICAvLyBDcmVhdGUgb3V0cHV0IGF1ZGlvIGRpclxuICAgIGNvbnN0IGF1ZGlvX3BhdGggPSBub3JtYWxpemVQYXRoKGAke3RmaWxlLnBhcmVudC5wYXRofS8ke3NldHRpbmdzLnNwZWVjaFNldHRpbmdzLnNwZWVjaE91dHB1dFBhdGh9YClcbiAgICAvL2NvbnNvbGUubG9nKGBhdWRpb19wYXRoOiAke2F1ZGlvX3BhdGh9YClcbiAgICBpZiAoIWF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGF1ZGlvX3BhdGgpKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGF1ZGlvX3BhdGgpXG4gICAgfVxuICAgIC8vIEdldCBvdXRwdXQgbXAzIGZpbGUgcGF0aFxuICAgIHZhciBhdWRpb19mdWxsX3BhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEZ1bGxQYXRoKGF1ZGlvX3BhdGgpXG4gICAgLy9jb25zb2xlLmxvZyhgYXVkaW9fZnVsbF9wYXRoOiAke2F1ZGlvX2Z1bGxfcGF0aH1gKVxuICAgIHZhciBmdWxsX3BhdGggPSAnJztcbiAgICB2YXIgcmVsX3BhdGggPSAnJztcbiAgICB2YXIgaSA9IDA7XG4gICAgZG8ge1xuICAgICAgdmFyIG91dHB1dF9mbmFtZSA9ICcnXG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgb3V0cHV0X2ZuYW1lID0gYCR7dGZpbGUuYmFzZW5hbWV9XyR7aX0ubXAzYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dHB1dF9mbmFtZSA9IGAke3RmaWxlLmJhc2VuYW1lfS5tcDNgO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvL2NvbnNvbGUubG9nKGBvdXRwdXRfZm5hbWU6ICR7b3V0cHV0X2ZuYW1lfWApXG5cbiAgICAgIGZ1bGxfcGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7YXVkaW9fZnVsbF9wYXRofS8ke291dHB1dF9mbmFtZX1gKTtcbiAgICAgIC8vY29uc29sZS5sb2coYGZ1bGxfcGF0aDogJHtmdWxsX3BhdGh9YClcbiAgICAgIHJlbF9wYXRoID0gbm9ybWFsaXplUGF0aChgJHthdWRpb19wYXRofS8ke291dHB1dF9mbmFtZX1gKTtcbiAgICAgIC8vY29uc29sZS5sb2coYHJlbF9wYXRoOiAke3JlbF9wYXRofWApXG4gICAgICBpKys7XG4gICAgfSB3aGlsZSAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocmVsX3BhdGgpKTtcbiAgICBcbiAgICByZXR1cm4ge2Z1bGxfcGF0aCwgcmVsX3BhdGh9O1xuICB9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0ZpbGVNYXJrZG93bihwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHBhdGguZW5kc1dpdGgoJy5tZCcpXG59XG5cbmZ1bmN0aW9uIGlzRmlsZUltYWdlKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIHBhdGguZW5kc1dpdGgoJy5wbmcnKSB8fCBwYXRoLmVuZHNXaXRoKCcuanBnJykgfHwgcGF0aC5lbmRzV2l0aCgnLmpwZWcnKSB8fFxuICAgIHBhdGguZW5kc1dpdGgoJy53ZWJwJykgfHwgcGF0aC5lbmRzV2l0aCgnLmdpZicpIHx8IHBhdGguZW5kc1dpdGgoJy5ibXAnKVxuICApXG59XG5cbmZ1bmN0aW9uIGlzSW1hZ2VGaWxlcyhmaWxlczogVEZpbGVbXSk6IGJvb2xlYW4ge1xuICB2YXIgajphbnlcbiAgZm9yIChqIGluIGZpbGVzKSB7XG4gICAgdmFyIGZfcGF0aCA9IGZpbGVzW2pdLnBhdGhcbiAgICBpZiAoIWlzRmlsZUltYWdlKGZfcGF0aCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RlKG5hbWU6IHN0cmluZywgY29udGVudHMgPSAnJyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGxldCBwYXRoUHJlZml4OiBzdHJpbmdcbiAgICBzd2l0Y2ggKGFwcC52YXVsdC5nZXRDb25maWcoJ25ld0ZpbGVMb2NhdGlvbicpKSB7XG4gICAgICBjYXNlICdjdXJyZW50JzpcbiAgICAgICAgcGF0aFByZWZpeCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpPy5wYXJlbnQ/LnBhdGggPz8gJydcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2ZvbGRlcic6XG4gICAgICAgIHBhdGhQcmVmaXggPSBhcHAudmF1bHQuZ2V0Q29uZmlnKCduZXdGaWxlRm9sZGVyUGF0aCcpIGFzIHN0cmluZ1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDogLy8gJ3Jvb3QnXG4gICAgICAgIHBhdGhQcmVmaXggPSAnJ1xuICAgICAgICBicmVha1xuICAgIH1cbiAgICBcbiAgICBpZiAocGF0aFByZWZpeCkge1xuICAgICAgcGF0aFByZWZpeCArPSAnLydcbiAgICB9XG4gICAgbGV0IHBhdGggPSBgJHtwYXRoUHJlZml4fSR7bmFtZX1gXG4gICAgY29uc29sZS5sb2coYHBhdGhQcmVmaXg6ICR7cGF0aFByZWZpeH0sIG5hbWU6ICR7bmFtZX1gKVxuICAgIC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBpZiAoYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgJHtwYXRofS5tZGApKSB7XG4gICAgICAvLyBBcHBlbmQgYSBudW1iZXIgdG8gdGhlIGVuZCBvZiB0aGUgZmlsZSBuYW1lXG4gICAgICBsZXQgaSA9IDFcbiAgICAgIHdoaWxlIChhd2FpdCBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke3BhdGh9ICR7aX0ubWRgKSkge1xuICAgICAgICBpKytcbiAgICAgIH1cbiAgICAgIHBhdGggKz0gYCAke2l9YFxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgb3BlbiB0aGUgZmlsZVxuICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoYCR7cGF0aH0ubWRgLCBjb250ZW50cylcbiAgICBhd2FpdCBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCAnJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIG5ldyBOb3RpY2UoJ1RleHQgRXh0cmFjdCAtIENvdWxkIG5vdCBjcmVhdGUgbm90ZTogJyArIChlIGFzIGFueSkubWVzc2FnZSlcbiAgICB0aHJvdyBlXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSW1hZ2VzTm90ZShmaWxlczogVEZpbGVbXSkge1xuICB2YXIgajphbnlcbiAgdmFyIGZpbGVfcGF0aHM6c3RyaW5nW10gPSBuZXcgQXJyYXkoZmlsZXMubGVuZ3RoKVxuICBmb3IgKGogaW4gZmlsZXMpIHtcbiAgICBjb25zb2xlLmxvZyhgcHBhdGg6ICR7ZmlsZXNbal0ucGFyZW50LnBhdGh9LCBwbmFtZTogJHtmaWxlc1tqXS5wYXJlbnQubmFtZX1gKVxuICAgIGZpbGVfcGF0aHNbal0gPSBmaWxlc1tqXS5wYXRoXG4gIH1cbiAgZmlsZV9wYXRocy5zb3J0KClcbiAgdmFyIGNvbnRlbnRzOnN0cmluZyA9ICcnXG4gIGZvciAoaiBpbiBmaWxlX3BhdGhzKSB7XG4gICAgY29uc29sZS5sb2coZmlsZV9wYXRoc1tqXSlcbiAgICBjb250ZW50cyArPSBgIVtbJHtmaWxlX3BhdGhzW2pdfV1dXFxuYFxuICB9XG4gIGNvbnNvbGUubG9nKGNvbnRlbnRzKVxuICAvLyBDcmVhdGUgYSBuZXcgbm90ZSBhbmQgb3BlbiBpdFxuICBhd2FpdCBjcmVhdGVOb3RlKFwiVW50aXRsZWRcIiwgY29udGVudHMpXG59XG5cbmZ1bmN0aW9uIGFkZFF1b3RlVG9UZXh0KHRleHQ6IHN0cmluZywgbm90ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcXG4+IFshTk9URV0gJHtub3RlfVxcbmAgKyB0ZXh0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBgPiAke2xpbmV9YCkuam9pbignXFxuJylcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTWFya2Rvd25UYWdzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIFx1NTNCQlx1OTY2NFx1NjgwN1x1OTg5OFx1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eKCMrKVxccy9nbSwgJycpO1xuICAvLyBcdTUzQkJcdTk2NjRcdTUyQTBcdTdDOTdcdTMwMDFcdTY1OUNcdTRGNTNcdTdCNDlcdTY4MDdcdThCQjBcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvKFxcKlxcKnxfX3xffFxcKikvZywgJycpO1xuICAvLyBcdTUzQkJcdTk2NjRcdTUyMTdcdTg4NjhcdTY4MDdcdThCQjBcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXihbLSorXVxcc3xcXGQrXFwuXFxzKS9nbSwgJycpO1xuICAvLyBcdTUzQkJcdTk2NjRcdTRFRTNcdTc4MDFcdTU3NTdcdTY4MDdcdThCQjBcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvYGBgW1xcc1xcU10qP2BgYC9nLCAnJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1ODg0Q1x1NTE4NVx1NEVFM1x1NzgwMVx1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9gKFteYF0qKWAvZywgJyQxJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1OTRGRVx1NjNBNVx1NTQ4Q1x1NTZGRVx1NzI0N1x1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8hP1xcW1teXFxdXSpcXF1cXChbXildKlxcKS9nLCAnJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1NkMzNFx1NUU3M1x1N0VCRlxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eLS0tKyQvZ20sICcnKTtcbiAgLy8gXHU1M0JCXHU5NjY0IEhUTUwgXHU2ODA3XHU3QjdFXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxbXj5dKj4vZywgJycpO1xuICByZXR1cm4gdGV4dDtcbn0iLCAiaW1wb3J0IFN0dWRlbnRSZXBvUGx1Z2luIGZyb20gXCIuL21haW5cIjtcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0dWRlbnRTZXR0aW5ncyB7XG4gIGdyYWRlOiBzdHJpbmc7XG4gIGxvY2FsTGFuZ3VhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY2Nlc3NUb2tlbiB7XG4gIHRva2VuOiBzdHJpbmdcblx0ZXhwOiBudW1iZXJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgT2NyU2V0dGluZ3Mge1xuICBhcHBJRDogc3RyaW5nO1xuICBhcGlLZXk6IHN0cmluZztcbiAgYXBpU2VjcmV0OiBzdHJpbmc7XG4gIGFjY2Vzc1Rva2VuOiBBY2Nlc3NUb2tlbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMTE1TZXR0aW5ncyB7XG4gIGFwaUJhc2U6IHN0cmluZztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIG1vZGVsTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uU2V0dGluZ3Mge1xuICBzdWJzY3JpcHRpb25LZXk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGVlY2hTZXR0aW5ncyB7XG4gIHN1YnNjcmlwdGlvbktleTogc3RyaW5nO1xuICBzcGVlY2hWb2ljZTogc3RyaW5nXG4gIHNwZWVjaExhbmd1YWdlOiBzdHJpbmcsXG4gIHNwZWVjaE91dHB1dFBhdGg6IHN0cmluZyxcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZGVudFJlcG9TZXR0aW5ncyB7XG4gIHN0dVNldHRpbmdzOiBTdHVkZW50U2V0dGluZ3M7XG4gIHNwZWVjaFNldHRpbmdzOiBTcGVlY2hTZXR0aW5ncztcbiAgb2NyU2V0dGluZ3M6IE9jclNldHRpbmdzO1xuICBsbG1TZXR0aW5nczogTExNU2V0dGluZ3M7XG4gIG10U2V0dGluZ3M6IFRyYW5zbGF0aW9uU2V0dGluZ3M7XG59XG5cblxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogU3R1ZGVudFJlcG9TZXR0aW5ncyA9IHtcbiAgc3R1U2V0dGluZ3M6IHtcbiAgICBncmFkZTogJ1x1NUMwRlx1NUI2Nlx1NTZEQlx1NUU3NFx1N0VBNycsXG4gICAgbG9jYWxMYW5ndWFnZTogJ3poLUhhbnMnLFxuICB9LFxuICBzcGVlY2hTZXR0aW5nczoge1xuICAgIHN1YnNjcmlwdGlvbktleTogJycsXG4gICAgc3BlZWNoTGFuZ3VhZ2U6ICdlbicsXG4gICAgc3BlZWNoVm9pY2U6ICdlbi1HQi1Tb25pYU5ldXJhbCcsXG4gICAgc3BlZWNoT3V0cHV0UGF0aDogJ19hdWRpb3MnLFxuICB9LFxuICBvY3JTZXR0aW5nczoge1xuICAgIGFwcElEOiAnJyxcbiAgICBhcGlLZXk6ICcnLFxuICAgIGFwaVNlY3JldDogJycsXG4gICAgYWNjZXNzVG9rZW46IHtcbiAgICAgIHRva2VuOiAnJyxcbiAgICAgIGV4cDogMFxuICAgIH0sXG4gIH0sXG4gIGxsbVNldHRpbmdzOiB7XG4gICAgYXBpQmFzZTogJycsXG4gICAgYXBpS2V5OiAnJyxcbiAgICBtb2RlbE5hbWU6ICcnXG4gIH0sXG4gIG10U2V0dGluZ3M6IHtcbiAgICBzdWJzY3JpcHRpb25LZXk6ICcnXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0dWRlbnRSZXBvU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFN0dWRlbnRSZXBvUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN0dWRlbnRSZXBvUGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHt0ZXh0OiB0aGlzLnBsdWdpbi50cmFucy5wbHVnaW5OYW1lfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSh0aGlzLnBsdWdpbi50cmFucy5zdHVkZW50R3JhZGUpXG4gICAgICAuc2V0RGVzYyh0aGlzLnBsdWdpbi50cmFucy5zdHVkZW50R3JhZGUpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTVDMEZcdTVCNjZcdTU2REJcdTVFNzRcdTdFQTcnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3R1U2V0dGluZ3MuZ3JhZGUpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdHVTZXR0aW5ncy5ncmFkZSA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUodGhpcy5wbHVnaW4udHJhbnMubG9jYWxMYW5ndWFnZSlcbiAgICAuc2V0RGVzYyh0aGlzLnBsdWdpbi50cmFucy5sb2NhbExhbmd1YWdlKVxuICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZW4nLCAnRW5nbGlzaCcpO1xuICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCd6aC1IYW5zJywgJ1x1NjY2RVx1OTAxQVx1OEJERCcpO1xuICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3R1U2V0dGluZ3MubG9jYWxMYW5ndWFnZSk7XG4gICAgICBkcm9wZG93bi5vbkNoYW5nZSgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3R1U2V0dGluZ3MubG9jYWxMYW5ndWFnZSA9IG9wdGlvbjtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiB0aGlzLnBsdWdpbi50cmFucy5sbG1TZXR0aW5nfSk7XG4gICAgXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIFVSTCcpXG4gICAgICAuc2V0RGVzYyhgJHt0aGlzLnBsdWdpbi50cmFucy5sbG1Qcm92aWRlcn0gTExNIEFQSSBVUkxgKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9kYXNoc2NvcGUuYWxpeXVuY3MuY29tL2NvbXBhdGlibGUtbW9kZS92MS9jaGF0L2NvbXBsZXRpb25zJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVNldHRpbmdzLmFwaUJhc2UpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1TZXR0aW5ncy5hcGlCYXNlID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBUEkgS2V5JylcbiAgICAgIC5zZXREZXNjKGAke3RoaXMucGx1Z2luLnRyYW5zLmxsbVByb3ZpZGVyfSBMTE0gQVBJIEtleWApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdzay0qKionKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtU2V0dGluZ3MuYXBpS2V5KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtU2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdNb2RlbCBOYW1lJylcbiAgICAgIC5zZXREZXNjKGAke3RoaXMucGx1Z2luLnRyYW5zLmxsbVByb3ZpZGVyfSBMTE0gTW9kZWwgTmFtZWApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdxd2VuLXR1cmJvJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVNldHRpbmdzLm1vZGVsTmFtZSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVNldHRpbmdzLm1vZGVsTmFtZSA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6IHRoaXMucGx1Z2luLnRyYW5zLm9jclNldHRpbmd9KTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBUFAgSUQnKVxuICAgICAgLnNldERlc2MoYCR7dGhpcy5wbHVnaW4udHJhbnMub2NyUHJvdmlkZXJ9IEFQUCBJRGApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUFAgSUQnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBwSUQpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY3JTZXR0aW5ncy5hcHBJRCA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAuc2V0RGVzYyhgJHt0aGlzLnBsdWdpbi50cmFucy5vY3JQcm92aWRlcn0gQVBJIEtleWApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUEkgS2V5JylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaUtleSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIFNlY3JldCcpXG4gICAgICAuc2V0RGVzYyhgJHt0aGlzLnBsdWdpbi50cmFucy5vY3JQcm92aWRlcn0gQVBJIFNlY3JldGApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUEkgU2VjcmV0JylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaVNlY3JldClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaVNlY3JldCA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgLyoqXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTk3RjNcdTk4OTFcdTU0MDhcdTYyMTAnfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnXHU5N0YzXHU5ODkxXHU4QkVEXHU4QTAwJylcbiAgICAgIC5zZXREZXNjKCdcdTc1MUZcdTYyMTBcdTk3RjNcdTk4OTFcdTc2ODRcdThCRURcdThBMDAnKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2VuJywgJ1x1ODJGMVx1OEJFRCcpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3poLWNuJywgJ1x1NjY2RVx1OTAxQVx1OEJERCcpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hMYW5ndWFnZSk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaExhbmd1YWdlID0gb3B0aW9uO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnXHU5N0YzXHU5ODkxXHU0RkREXHU1QjU4XHU3NkVFXHU1RjU1JylcbiAgICAgIC5zZXREZXNjKCdcdTk3RjNcdTk4OTFcdTVCNThcdTY1M0VcdTRGNERcdTdGNkUnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignX2F1ZGlvJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaE91dHB1dFBhdGgpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hPdXRwdXRQYXRoID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICAqL1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hTZXR0aW5nfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSh0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hTdWJzY3JpcHRpb25LZXkpXG4gICAgICAuc2V0RGVzYygnTWljcm9zb2Z0IEF6dXJlIFNwZWVjaCBTdWJzY3JpcHRpb24gS2V5JylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdXIgQXp1cmUgU3BlZWNoIFN1YnNjcmlwdGlvbiBLZXknKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5ID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKHRoaXMucGx1Z2luLnRyYW5zLnNwZWVjaFZvaWNlVHlwZSlcbiAgICAgIC5zZXREZXNjKCdTcGVlY2ggVm9pY2UgVHlwZScpXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZW4tR0ItU29uaWFOZXVyYWwnLCB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hWb2ljZUdCKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdlbi1VUy1BbWFuZGFNdWx0aWxpbmd1YWxOZXVyYWwnLCB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hWb2ljZVVTKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCd6aC1DTi1YaWFveGlhb05ldXJhbCcsIHRoaXMucGx1Z2luLnRyYW5zLnNwZWVjaFZvaWNlQ04pO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hTZXR0aW5ncy5zcGVlY2hWb2ljZSk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnNwZWVjaFZvaWNlID0gb3B0aW9uO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgLyoqXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUodGhpcy5wbHVnaW4udHJhbnMubXRTdWJzY3JpcHRpb25LZXkpXG4gICAgLnNldERlc2MoJ01pY3Jvc29mdCBBenVyZSBUcmFuc2xhdG9yIFN1YnNjcmlwdGlvbiBLZXknKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIEF6dXJlIFRyYW5zbGF0b3IgU3Vic2NyaXB0aW9uIEtleScpXG4gICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXRTZXR0aW5ncy5zdWJzY3JpcHRpb25LZXkpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm10U2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuICAgICovXG4gIH07XG59IiwgImltcG9ydCB7IHJlcXVlc3RVcmwsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmNvbnN0IHNlcnZpY2VSZWdpb24gPSBcImVhc3Rhc2lhXCI7XG5cbi8vIFx1OTE0RFx1N0Y2RSBBenVyZSBcdThCRURcdTk3RjNcdTY3MERcdTUyQTFcbmNvbnN0IHNwZWVjaFN1YnNjcmlwdGlvbktleSA9IFwiRVcxekEzbWJTamoxaTdxZmtwVU42SFhhU3RjdVVhWG5HbGdERUZKQ0ZuWVFsY1hMemE2dEpRUUo5OUJCQUMzcEthUlhKM3czQUFBWUFDT0dwWDBLXCI7XG5jb25zdCBzcGVlY2hBcGlVcmwgPSBgaHR0cHM6Ly8ke3NlcnZpY2VSZWdpb259LnR0cy5zcGVlY2gubWljcm9zb2Z0LmNvbS9jb2duaXRpdmVzZXJ2aWNlcy92MWA7XG5cbi8vXHU5MTREXHU3RjZFIEF6dXJlIFx1N0ZGQlx1OEJEMVx1NjcwRFx1NTJBMVxuY29uc3QgbXRTdWJzY3JpcHRpb25LZXkgPSBcIkM2dzN5ZEpnWjU4SHptS1lDS2I0ejVEU29SQ3U5SnRPbGZSOG1ZN1EwZXliY2RrTG5GNkJKUVFKOTlCQkFDM3BLYVJYSjN3M0FBQWJBQ09HUHVzUlwiO1xuY29uc3QgbXRFbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkuY29nbml0aXZlLm1pY3Jvc29mdHRyYW5zbGF0b3IuY29tL1wiO1xuXG4vLyBcdTkxNERcdTdGNkUgQXp1cmUgXHU2NTg3XHU1QjU3XHU4QkM2XHU1MjJCXHU2NzBEXHU1MkExXG5jb25zdCB2aXNpb25TdWJzY3JpcHRpb25LZXkgPSBcInRjSTk0RHh3a1M1cTdlWDlRaktzanRXc1VOZ3U2MG04QmpwVG1uVmN4MDRuUWRhdTdRZFhKUVFKOTlCQkFDM3BLYVJYSjN3M0FBQUZBQ09HMlJDMlwiO1xuLy9jb25zdCB2aXNpb25FbmRwb2ludCA9IFwiaHR0cHM6Ly9lYXN0YXNpYS5hcGkuY29nbml0aXZlLm1pY3Jvc29mdC5jb21cIjtcbmNvbnN0IHZpc2lvbkFwaVVybCA9IGBodHRwczovLyR7c2VydmljZVJlZ2lvbn0uYXBpLmNvZ25pdGl2ZS5taWNyb3NvZnQuY29tL3Zpc2lvbi92My4yL29jcmA7XG5cbi8vIFx1NTZGRVx1NzI0N1x1OEY2Q1x1NjU4N1x1NUI1N1x1NTFGRFx1NjU3MFxuLy8gXHU0RTJEXHU2NTg3XHU4QkM2XHU1MjJCXHU0RTBEXHU1OTdEXHVGRjBDXHU3NkVFXHU1MjREXHU2NTNFXHU1RjAzXHU0RjdGXHU3NTI4XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1hZ2VUb1RleHQoaW1hZ2VCdWZmZXI6IEFycmF5QnVmZmVyLCBzdWJzY3JpcHRpb25LZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgJ09jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXknOiBzdWJzY3JpcHRpb25LZXksXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gIH07XG4gIGNvbnN0IHJlcXVlc3RQYXJhbSA9IHtcbiAgICB1cmw6IHZpc2lvbkFwaVVybCxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIGJvZHk6IGltYWdlQnVmZmVyLFxuICB9O1xuICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3RQYXJhbSk7XG5cbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbWFnZSB0byB0ZXh0IGVycm9yJywgcmVzcG9uc2UpXG4gICAgbmV3IE5vdGljZShgSW1hZ2UgdG8gdGV4dCBlcnJvciAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlLmpzb247XG4gIC8vIFx1NjNEMFx1NTNENlx1OEJDNlx1NTIyQlx1NTIzMFx1NzY4NFx1NjU4N1x1NUI1N1xuICBsZXQgdG90YWxfdGV4dCA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5yZWdpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcmVnaW9uID0gcmVzdWx0LnJlZ2lvbnNbaV07XG4gICAgbGV0IHRleHQgPSAnJztcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlZ2lvbi5saW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3QgbGluZSA9IHJlZ2lvbi5saW5lc1tqXTtcbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGluZS53b3Jkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICBjb25zdCB3b3JkID0gbGluZS53b3Jkc1trXTtcbiAgICAgICAgdGV4dCArPSB3b3JkLnRleHQgKyAnICc7XG4gICAgICB9XG4gICAgICB0ZXh0ICs9ICdcXG4nO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnXHU1NkZFXHU3MjQ3XHU4RjZDXHU2NTg3XHU1QjU3XHU3RUQzXHU2NzlDOicsIHRleHQpO1xuICAgIHRvdGFsX3RleHQgKz0gdGV4dDtcbiAgfVxuICByZXR1cm4gdG90YWxfdGV4dDtcbn1cblxuLy8gXHU2NTg3XHU2NzJDXHU4RjZDXHU4QkVEXHU5N0YzXHU1MUZEXHU2NTcwXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXh0VG9TcGVlY2hIdHRwKHRleHQ6IHN0cmluZywgc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmcsIHNwZWVjaFZvaWNlOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gIC8vIFxuICBjb25zdCBoZWFkZXJzID0ge1xuICAgICdPY3AtQXBpbS1TdWJzY3JpcHRpb24tS2V5Jzogc3Vic2NyaXB0aW9uS2V5LFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vc3NtbCt4bWwnLFxuICAgICdYLU1pY3Jvc29mdC1PdXRwdXRGb3JtYXQnOiAnYXVkaW8tMTZraHotMzJrYml0cmF0ZS1tb25vLW1wMycsXG4gICAgJ1VzZXItQWdlbnQnOiAnTXlTREsvMS4wJ1xuICB9O1xuICBcbiAgY29uc3QgYm9keSA9IGBcbiAgPHNwZWFrIHZlcnNpb249JzEuMCcgeG1sOmxhbmc9J2VuLVVTJz5cbiAgICAgIDx2b2ljZSB4bWw6bGFuZz0nZW4tVVMnIHhtbDpnZW5kZXI9J0ZlbWFsZScgbmFtZT0nJHtzcGVlY2hWb2ljZX0nPlxuICAgICAgICAgICR7dGV4dH1cbiAgICAgIDwvdm9pY2U+XG4gIDwvc3BlYWs+XG4gIGA7XG4gIC8vIFx1Njc4NFx1NUVGQVx1OEJGN1x1NkM0Mlx1NEY1M1xuICBjb25zdCByZXF1ZXN0UGFyYW0gPSB7XG4gICAgICB1cmw6IHNwZWVjaEFwaVVybCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgIGJvZHk6IGJvZHksXG4gIH07XG4gIC8vY29uc29sZS5sb2cocmVxdWVzdFBhcmFtKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwocmVxdWVzdFBhcmFtKTtcblxuICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgICAgY29uc29sZS5lcnJvcignVGV4dCB0byBzcGVlY2ggZXJyb3InLCByZXNwb25zZSlcbiAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gIH1cbiAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gIC8vIFx1OEZENFx1NTZERVx1OTdGM1x1OTg5MVx1NjU3MFx1NjM2RVxuICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXI7XG59XG5cbi8vIFx1N0ZGQlx1OEJEMVx1NTFGRFx1NjU3MFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0ZVRleHQodGV4dDogc3RyaW5nLCB0YXJnZXRMYW5ndWFnZTogc3RyaW5nLCBzdWJzY3JpcHRpb25LZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgICBjb25zdCBhcGlVcmwgPSBgJHttdEVuZHBvaW50fS90cmFuc2xhdGU/YXBpLXZlcnNpb249My4wJnRvPSR7dGFyZ2V0TGFuZ3VhZ2V9YDtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgJ09jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXknOiBzdWJzY3JpcHRpb25LZXksXG4gICAgICAgICAgJ09jcC1BcGltLVN1YnNjcmlwdGlvbi1SZWdpb24nOiBzZXJ2aWNlUmVnaW9uLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH07XG4gICAgICBjb25zdCBib2R5ID0gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICAgJ3RleHQnOiB0ZXh0XG4gICAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbSA9IHtcbiAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIH07XG4gICAgICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG4gICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwocmVxdWVzdFBhcmFtKTtcbiAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlbmQgbGxtIHJlcXVlc3QgZXJyb3InLCByZXNwb25zZSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgXG4gICAgICBjb25zdCByZXN1bHQgPSByZXNwb25zZS5qc29uO1xuXG4gICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdLnRyYW5zbGF0aW9uc1swXS50ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1NjcyQVx1ODNCN1x1NTNENlx1NTIzMFx1NjcwOVx1NjU0OFx1NzY4NFx1N0ZGQlx1OEJEMVx1N0VEM1x1Njc5QycpO1xuICAgICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignXHU3RkZCXHU4QkQxXHU1MUZBXHU5NTE5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgcmVxdWVzdFVybCwgTm90aWNlLCBhcnJheUJ1ZmZlclRvQmFzZTY0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQWNjZXNzVG9rZW4sIE9jclNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncydcblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVG9rZW4oYXBpS2V5OiBzdHJpbmcsIGFwaVNlY3JldDogc3RyaW5nKTogUHJvbWlzZTxBY2Nlc3NUb2tlbj4ge1xuXHRpZiAoIWFwaUtleSB8fCAhYXBpU2VjcmV0KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQVBJIGtleSBzZWNyZXQnKVxuXG5cdGNvbnN0IHVybCA9IGBodHRwczovL2FpcC5iYWlkdWJjZS5jb20vb2F1dGgvMi4wL3Rva2VuP2dyYW50X3R5cGU9Y2xpZW50X2NyZWRlbnRpYWxzJmNsaWVudF9pZD0ke2FwaUtleX0mY2xpZW50X3NlY3JldD0ke2FwaVNlY3JldH1gXG5cbiAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH07XG4gIFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgIHVybDogdXJsLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gIH0pO1xuXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7XG4gICAgY29uc29sZS5lcnJvcignY3JlYXRlIHRva2VuIGVycm9yJywgcmVzcG9uc2UpXG4gICAgcmV0dXJuIHt9IGFzIEFjY2Vzc1Rva2VuO1xuICB9XG5cbiAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb247XG5cdGNvbnN0IHRva2VuID0gZGF0YS5hY2Nlc3NfdG9rZW5cblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuXHRjb25zdCBleHAgPSBub3cgKyBkYXRhLmV4cGlyZXNfaW5cblx0cmV0dXJuIHtcblx0XHR0b2tlbixcblx0XHRleHBcblx0fSBhcyBBY2Nlc3NUb2tlblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tBY2Nlc3NUb2tlbihvY3JTZXR0aW5nczogT2NyU2V0dGluZ3MpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuXHRpZiAoXG4gICAgb2NyU2V0dGluZ3MuYWNjZXNzVG9rZW4gJiZcblx0XHRvY3JTZXR0aW5ncy5hY2Nlc3NUb2tlbi50b2tlbiAmJlxuXHRcdG9jclNldHRpbmdzLmFjY2Vzc1Rva2VuLmV4cCA+IG5vdyArIDMgKiA2MCAqIDEwMDBcblx0KSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgY3JlYXRlVG9rZW4ob2NyU2V0dGluZ3MuYXBpS2V5LCBvY3JTZXR0aW5ncy5hcGlTZWNyZXQpXG4gIGNvbnNvbGUubG9nKCdjcmVhdGUgbmV3IHRva2VuJywgbmV3VG9rZW4pO1xuICBvY3JTZXR0aW5ncy5hY2Nlc3NUb2tlbiA9IG5ld1Rva2VuO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltYWdlVG9UZXh0SHR0cChpbWFnZUJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9jclNldHRpbmdzOiBPY3JTZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FpcC5iYWlkdWJjZS5jb20vcmVzdC8yLjAvb2NyL3YxL2FjY3VyYXRlX2Jhc2ljP2FjY2Vzc190b2tlbj0ke29jclNldHRpbmdzLmFjY2Vzc1Rva2VuLnRva2VufWBcbiAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gIH07XG5cbiAgY29uc3QgaW1hZ2VfYmFzZTY0ID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChpbWFnZUJ1ZmZlcik7XG4gIGNvbnN0IGJvZHkgPSBgaW1hZ2U9JHtlbmNvZGVVUklDb21wb25lbnQoaW1hZ2VfYmFzZTY0KX0mcGFyYWdyYXBoPXRydWVgO1xuXG4gIGNvbnN0IHJlcXVlc3RQYXJhbSA9IHtcbiAgICB1cmw6IHVybCxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIGJvZHk6IGJvZHksXG4gIH07XG4gIC8vY29uc29sZS5sb2cocmVxdWVzdFBhcmFtKTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3RQYXJhbSk7XG5cbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbWFnZSB0byB0ZXh0IGVycm9yJywgcmVzcG9uc2UpXG4gICAgbmV3IE5vdGljZShgSW1hZ2UgdG8gdGV4dCBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlLmpzb247XG4gIC8vIFx1NjNEMFx1NTNENlx1OEJDNlx1NTIyQlx1N0VEM1x1Njc5Q1x1NEUyRFx1NzY4NFx1NjU4N1x1NUI1N1xuICBsZXQgdGV4dCA9ICcnO1xuICBpZiAocmVzdWx0LnBhcmFncmFwaHNfcmVzdWx0KSB7XG4gICAgcmVzdWx0LnBhcmFncmFwaHNfcmVzdWx0LmZvckVhY2goKGl0ZW06IHsgd29yZHNfcmVzdWx0X2lkeDogbnVtYmVyW10gfSkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLndvcmRzX3Jlc3VsdF9pZHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGV4dCArPSByZXN1bHQud29yZHNfcmVzdWx0W2l0ZW0ud29yZHNfcmVzdWx0X2lkeFtpXV0ud29yZHMgKyAnICc7XG4gICAgICB9XG4gICAgICB0ZXh0ICs9ICdcXG4nO1xuICAgIH0pO1xuICB9XG4gIC8vY29uc29sZS5sb2coJ1x1NTZGRVx1NzI0N1x1OEY2Q1x1NjU4N1x1NUI1N1x1NkJCNVx1ODQzRFx1N0VEM1x1Njc5QzonLCB0ZXh0KTtcbiAgcmV0dXJuIHRleHQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2xhdGVUZXh0SHR0cCh0ZXh0OiBzdHJpbmcsIHRvX2xhbmc6IHN0cmluZywgb2NyU2V0dGluZ3M6IE9jclNldHRpbmdzKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYWlwLmJhaWR1YmNlLmNvbS9ycGMvMi4wL210L3RleHR0cmFucy92MT9hY2Nlc3NfdG9rZW49JHtvY3JTZXR0aW5ncy5hY2Nlc3NUb2tlbi50b2tlbn1gXG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnLFxuICB9O1xuICBjb25zdCBib2R5ID0ge1xuICAgICdxJzogdGV4dCxcbiAgICAnZnJvbSc6ICdhdXRvJyxcbiAgICAndG8nOiB0b19sYW5nLFxuICB9O1xuICBjb25zdCByZXF1ZXN0UGFyYW0gPSB7XG4gICAgdXJsOiB1cmwsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgfTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3RQYXJhbSk7XG5cbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdUcmFuc2xhdGUgdGV4dCBlcnJvcicsIHJlc3BvbnNlKVxuICAgIG5ldyBOb3RpY2UoYFRyYW5zbGF0ZSB0ZXh0IGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlLmpzb247XG4gIGxldCByZXN1bHRfdGV4dCA9ICcnO1xuICByZXN1bHQucmVzdWx0LnRyYW5zX3Jlc3VsdC5mb3JFYWNoKChpdGVtOiB7IHNyYzogc3RyaW5nOyBkc3Q6IHN0cmluZyB9KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1x1NTM5Rlx1NjU4N1x1RkYxQScsIGl0ZW0uc3JjKTtcbiAgICBjb25zb2xlLmxvZygnXHU4QkQxXHU2NTg3XHVGRjFBJywgaXRlbS5kc3QpO1xuICAgIHJlc3VsdF90ZXh0ICs9IGl0ZW0uZHN0O1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdF90ZXh0O1xufVxuXG4vKipcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXh0VG9TcGVlY2godGV4dDogc3RyaW5nLCB0ZmlsZTogVEFic3RyYWN0RmlsZSwgc2V0dGluZ3M6IFN0dWRlbnRSZXBvU2V0dGluZ3MpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gIGNvbnN0IFBhdGhMaWIgPSByZXF1aXJlKCdwYXRoJylcbiAgY29uc3QgQWlwU3BlZWNoID0gcmVxdWlyZSgnYmFpZHUtYWlwLXNkaycpLnNwZWVjaDtcbiAgXG4gIC8vIEdlbmVyYXRlIFRUUyBhdWRpb1xuICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFBaXBTcGVlY2hcdTc2ODRcdTVCOUVcdTRGOEJcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFpcFNwZWVjaChzZXR0aW5ncy5vY3JTZXR0aW5ncy5hcHBJRCwgc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBpS2V5LCBzZXR0aW5ncy5vY3JTZXR0aW5ncy5hcGlTZWNyZXQpO1xuICAvLyBcdThDMDNcdTc1Mjh0ZXh0MmF1ZGlvXHU2NUI5XHU2Q0Q1XHU4RkRCXHU4ODRDXHU2NTg3XHU2NzJDXHU4RjZDXHU4QkVEXHU5N0YzXHU3Njg0XHU1NDA4XHU2MjEwXG4gIC8vIFx1NTNDMlx1NjU3MFx1NTMwNVx1NjJFQ1x1RkYxQVx1ODk4MVx1NTQwOFx1NjIxMFx1NzY4NFx1NjU4N1x1NjcyQ1x1MzAwMVx1NTQwOFx1NjIxMFx1N0VEM1x1Njc5Q1x1NzY4NFx1NjgzQ1x1NUYwRlx1RkYwOFx1NTNFRlx1OTAwOVx1RkYwQ1x1OUVEOFx1OEJBNFx1NjYyRm1wM1x1RkYwOVx1MzAwMVx1NTQwOFx1NjIxMFx1OEJFRFx1OTdGM1x1NzY4NFx1OEJFRFx1OTAxRlx1RkYwOFx1NTNFRlx1OTAwOVx1RkYwQ1x1NTNENlx1NTAzQ1x1ODMwM1x1NTZGNFx1NjYyRjAtOVx1RkYwQ1x1OUVEOFx1OEJBNFx1NjYyRjVcdUZGMDlcdTMwMDFcdTU0MDhcdTYyMTBcdThCRURcdTk3RjNcdTc2ODRcdTk3RjNcdThDMDNcdUZGMDhcdTUzRUZcdTkwMDlcdUZGMENcdTUzRDZcdTUwM0NcdTgzMDNcdTU2RjRcdTY2MkYwLTlcdUZGMENcdTlFRDhcdThCQTRcdTY2MkY1XHVGRjA5XHUzMDAxXHU1NDA4XHU2MjEwXHU4QkVEXHU5N0YzXHU3Njg0XHU5N0YzXHU5MUNGXHVGRjA4XHU1M0VGXHU5MDA5XHVGRjBDXHU1M0Q2XHU1MDNDXHU4MzAzXHU1NkY0XHU2NjJGMC05XHVGRjBDXHU5RUQ4XHU4QkE0XHU2NjJGNVx1RkYwOVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQudGV4dDJhdWRpbyh0ZXh0LCB7bGFuOiBzZXR0aW5ncy50dHNMYW5ndWFnZX0pXG4gIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gIC8vIHJlc3VsdFx1NjYyRlx1NEUwMFx1NEUyQVx1NTMwNVx1NTQyQlx1OEJFRFx1OTdGM1x1NEU4Q1x1OEZEQlx1NTIzNlx1NjU3MFx1NjM2RVx1NzY4NEJ1ZmZlclx1NUJGOVx1OEM2MVxuICByZXR1cm4gcmVzdWx0LmRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2xhdGVUZXh0KHRleHQ6IHN0cmluZywgdG9fbGFuZzogc3RyaW5nLCBzZXR0aW5nczogU3R1ZGVudFJlcG9TZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IEFpcE10ID0gcmVxdWlyZSgnYmFpZHUtYWlwLXNkaycpLm1hY2hpbmVUcmFuc2xhdGlvbjtcbiAgY29uc3QgY2xpZW50ID0gbmV3IEFpcE10KHNldHRpbmdzLm9jclNldHRpbmdzLmFwcElELCBzZXR0aW5ncy5vY3JTZXR0aW5ncy5hcGlLZXksIHNldHRpbmdzLm9jclNldHRpbmdzLmFwaVNlY3JldCk7XG4gIC8vIFx1OEMwM1x1NzUyOFx1N0ZGQlx1OEJEMVx1NjNBNVx1NTNFM1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQudGV4dHRyYW5zVjEoJ2F1dG8nLCB0b19sYW5nLCB0ZXh0KTtcbiAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgY29uc29sZS5sb2cocmVzdWx0LnJlc3VsdC50cmFuc19yZXN1bHQpO1xuICBsZXQgcmVzdWx0X3RleHQgPSAnJztcbiAgcmVzdWx0LnJlc3VsdC50cmFuc19yZXN1bHQuZm9yRWFjaCgoaXRlbTogeyBzcmM6IHN0cmluZzsgZHN0OiBzdHJpbmcgfSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdcdTUzOUZcdTY1ODdcdUZGMUEnLCBpdGVtLnNyYyk7XG4gICAgY29uc29sZS5sb2coJ1x1OEJEMVx1NjU4N1x1RkYxQScsIGl0ZW0uZHN0KTtcbiAgICByZXN1bHRfdGV4dCArPSBpdGVtLmRzdDtcbiAgfSk7XG4gIHJldHVybiByZXN1bHRfdGV4dDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltYWdlVG9UZXh0KGZpbGU6IFRBYnN0cmFjdEZpbGUsIG9jclNldHRpbmdzOiBPY3JTZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IEFpcE9jckNsaWVudCA9IHJlcXVpcmUoJ2JhaWR1LWFpcC1zZGsnKS5vY3I7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IEFpcE9jckNsaWVudChvY3JTZXR0aW5ncy5hcHBJRCwgb2NyU2V0dGluZ3MuYXBpS2V5LCBvY3JTZXR0aW5ncy5hcGlTZWNyZXQpO1xuICAgIC8vIFx1OEJGQlx1NTNENlx1NTZGRVx1NzI0N1x1NjU4N1x1NEVGNlx1NUU3Nlx1OEY2Q1x1NjM2Mlx1NEUzQSBCYXNlNjQgXHU3RjE2XHU3ODAxXG4gICAgdmFyIGltYWdlX2NvbnRlbnQgPSAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIucmVhZEJpbmFyeShmaWxlLnBhdGgpXG4gICAgdmFyIGltYWdlID0gQnVmZmVyLmZyb20oaW1hZ2VfY29udGVudCkudG9TdHJpbmcoJ2Jhc2U2NCcpXG5cbiAgICAvLyBcdThDMDNcdTc1MjhcdTc2N0VcdTVFQTZcdTRFOTEgT0NSIFx1NzY4NFx1OTAxQVx1NzUyOFx1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlx1NjNBNVx1NTNFM1xuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgb3B0aW9uc1tcImxhbmd1YWdlX3R5cGVcIl0gPSBcIkNITl9FTkdcIjtcbiAgICBvcHRpb25zW1wicGFyYWdyYXBoXCJdID0gXCJ0cnVlXCI7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQuYWNjdXJhdGVCYXNpYyhpbWFnZSwgb3B0aW9ucyk7XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgLy8gXHU2M0QwXHU1M0Q2XHU4QkM2XHU1MjJCXHU3RUQzXHU2NzlDXHU0RTJEXHU3Njg0XHU2NTg3XHU1QjU3XG4gICAgbGV0IHRleHQgPSAnJztcbiAgICBpZiAocmVzdWx0LnBhcmFncmFwaHNfcmVzdWx0KSB7XG4gICAgICByZXN1bHQucGFyYWdyYXBoc19yZXN1bHQuZm9yRWFjaCgoaXRlbTogeyB3b3Jkc19yZXN1bHRfaWR4OiBudW1iZXJbXSB9KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS53b3Jkc19yZXN1bHRfaWR4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGV4dCArPSByZXN1bHQud29yZHNfcmVzdWx0W2l0ZW0ud29yZHNfcmVzdWx0X2lkeFtpXV0ud29yZHMgKyAnICc7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSAnXFxuJztcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnXHU1NkZFXHU3MjQ3XHU4RjZDXHU2NTg3XHU1QjU3XHU2QkI1XHU4NDNEXHU3RUQzXHU2NzlDOicsIHRleHQpO1xuICAgIHJldHVybiB0ZXh0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignXHU1NkZFXHU3MjQ3XHU4RjZDXHU2NTg3XHU1QjU3XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICB9XG59XG4qL1xuIiwgIlxuZXhwb3J0IGNvbnN0IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUgPSBgXG5cdTRGNjBcdTc2ODRcdTRFRkJcdTUyQTFcdTY2MkZcdTY4MzlcdTYzNkVcdTVERjJcdTY3MDlcdTc2ODRcdTk4OThcdTc2RUVcdTc1MUZcdTYyMTA1XHU5MDUzXHU2MjY5XHU1QzU1XHU5ODk4XHU3NkVFXHVGRjBDXHU4RkQ5XHU0RTlCXHU5ODk4XHU3NkVFXHU4OTgxXHU3QjI2XHU1NDA4e0dSQURFfVx1NzY4NFx1NzdFNVx1OEJDNlx1NkMzNFx1NUU3M1x1MzAwMlxuXG5cdTk5OTZcdTUxNDhcdUZGMENcdTVERjJcdTY3MDlcdTk4OThcdTc2RUVcdTU5ODJcdTRFMEJcdUZGMUFcbntUT1BJQ31cblxue0dSQURFfVx1NzdFNVx1OEJDNlx1NkMzNFx1NUU3M1x1NzY4NFx1NTFGQVx1OTg5OFx1ODk4MVx1NkM0Mlx1NTk4Mlx1NEUwQlx1RkYxQVxuMS4gXHU5ODk4XHU3NkVFXHU0RTBEXHU4MEZEXHU4RkM3XHU0RThFXHU1OTBEXHU2NzQyXHVGRjBDXHU4OTgxXHU3QjI2XHU1NDA4e0dSQURFfVx1NUI2Nlx1NzUxRlx1NzY4NFx1OEJBNFx1NzdFNVx1ODBGRFx1NTI5Qlx1MzAwMlxuMi4gXHU1RTk0XHU2REI1XHU3NkQ2e0dSQURFfVx1OEJGRVx1N0EwQlx1NEUyRFx1NzY4NFx1NUUzOFx1ODlDMVx1NzdFNVx1OEJDNlx1NzBCOVx1MzAwMlxuXG5cdTU3MjhcdTUxRkFcdTk4OThcdTY1RjZcdUZGMENcdThCRjdcdTkwNzVcdTVGQUFcdTRFRTVcdTRFMEJcdTYzMDdcdTVCRkNcdUZGMUFcbjEuIFx1NUJGOVx1NEU4RVx1NkJDRlx1NEUwMFx1OTA1M1x1NjI2OVx1NUM1NVx1OTg5OFx1NzZFRVx1RkYwQ1x1NUMzRFx1OTFDRlx1NEVDRVx1NEUwRFx1NTQwQ1x1NzY4NFx1NzdFNVx1OEJDNlx1NzBCOVx1ODlEMlx1NUVBNlx1NTFGQVx1NTNEMVx1RkYwQ1x1NEY0Nlx1ODk4MVx1NTdGQVx1NEU4RVx1NTM5Rlx1NTlDQlx1OTg5OFx1NzZFRVx1NzZGOFx1NTE3M1x1NzY4NFx1NzdFNVx1OEJDNlx1ODMwM1x1NzU3NFx1MzAwMlxuMi4gXHU1OTgyXHU2NzlDXHU1MzlGXHU1OUNCXHU5ODk4XHU3NkVFXHU2NjJGXHU2NTcwXHU1QjY2XHU5ODk4XHVGRjBDXHU2MjY5XHU1QzU1XHU5ODk4XHU3NkVFXHU1M0VGXHU0RUU1XHU2NTM5XHU1M0Q4XHU2NTcwXHU1QjU3XHUzMDAxXHU4RkQwXHU3Qjk3XHU3QjI2XHU1M0Y3XHU2MjE2XHU4MDA1XHU5ODk4XHU1NzhCXHUzMDAyXHU1OTgyXHU2NzlDXHU2NjJGXHU4QkVEXHU2NTg3XHU5ODk4XHVGRjBDXHU1M0VGXHU0RUU1XHU0RUNFXHU1QjU3XHU4QkNEXHUzMDAxXHU4QkVEXHU1M0U1XHU3NDA2XHU4OUUzXHU3QjQ5XHU0RTBEXHU1NDBDXHU2NUI5XHU5NzYyXHU1MUZBXHU5ODk4XHUzMDAyXG4zLiBcdTc4NkVcdTRGRERcdTk4OThcdTc2RUVcdTg4NjhcdThGRjBcdTZFMDVcdTY2NzBcdUZGMENcdTZDQTFcdTY3MDlcdTZCNjdcdTRFNDlcdTMwMDJcbjQuIFx1OEJGN1x1NzUyOHtMQU5HVUFHRX1cdTU2REVcdTdCNTRcdTMwMDJcblxuXHU4QkY3XHU2MzA5XHU3MTY3XHU0RTBCXHU5NzYyXHU3Njg0XHU2ODNDXHU1RjBGXHU3RUQ5XHU1MUZBXHU1NkRFXHU3QjU0XHVGRjFBXG5cdTY4MzlcdTYzNkVcdTRFMEFcdThGRjBcdTk4OThcdTc2RUVcdTc1MUZcdTYyMTBcdTc2ODRcdTYyNjlcdTVDNTVcdTk4OThcdTc2RUVcdTU5ODJcdTRFMEJcdUZGMUFcbi4uLlxuYDtcblxuZXhwb3J0IGNvbnN0IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEVfRU4gPSBgXG5Zb3VyIHRhc2sgaXMgdG8gZ2VuZXJhdGUgNSBleHRlbmRlZCBxdWVzdGlvbnMgYmFzZWQgb24gdGhlIGV4aXN0aW5nIHF1ZXN0aW9uLiBUaGVzZSBxdWVzdGlvbnMgc2hvdWxkIGJlIGluIGxpbmUgd2l0aCB0aGUga25vd2xlZGdlIGxldmVsIG9mIHtHUkFERX0uXG5GaXJzdCwgdGhlIGV4aXN0aW5nIHF1ZXN0aW9uIGlzIGFzIGZvbGxvd3M6XG57VE9QSUN9XG5UaGUgcmVxdWlyZW1lbnRzIGZvciBzZXR0aW5nIHF1ZXN0aW9ucyBhdCB0aGUge0dSQURFfSBrbm93bGVkZ2UgbGV2ZWwgYXJlIGFzIGZvbGxvd3M6XG4xLiBUaGUgcXVlc3Rpb25zIHNob3VsZCBub3QgYmUgb3Zlcmx5IGNvbXBsZXggYW5kIHNob3VsZCBtYXRjaCB0aGUgY29nbml0aXZlIGFiaWxpdGllcyBvZiB7R1JBREV9IHN0dWRlbnRzLlxuMi4gVGhleSBzaG91bGQgY292ZXIgY29tbW9uIGtub3dsZWRnZSBwb2ludHMgaW4gdGhlIHtHUkFERX0gY3VycmljdWx1bS5cblxuV2hlbiBzZXR0aW5nIHRoZSBxdWVzdGlvbnMsIHBsZWFzZSBmb2xsb3cgdGhlIGZvbGxvd2luZyBndWlkZWxpbmVzOlxuMS4gRm9yIGVhY2ggZXh0ZW5kZWQgcXVlc3Rpb24sIHRyeSB0byBhcHByb2FjaCBmcm9tIGRpZmZlcmVudCBrbm93bGVkZ2UgLSBwb2ludCBwZXJzcGVjdGl2ZXMsIGJ1dCBzdGF5IHdpdGhpbiB0aGUga25vd2xlZGdlIHNjb3BlIHJlbGF0ZWQgdG8gdGhlIG9yaWdpbmFsIHF1ZXN0aW9uLlxuMi4gSWYgdGhlIG9yaWdpbmFsIHF1ZXN0aW9uIGlzIGEgbWF0aCBwcm9ibGVtLCB0aGUgZXh0ZW5kZWQgcXVlc3Rpb25zIGNhbiBjaGFuZ2UgdGhlIG51bWJlcnMsIG9wZXJhdGlvbiBzeW1ib2xzLCBvciBxdWVzdGlvbiB0eXBlcy4gSWYgaXQgaXMgYSBDaGluZXNlIGxhbmd1YWdlIHByb2JsZW0sIHF1ZXN0aW9ucyBjYW4gYmUgc2V0IGZyb20gZGlmZmVyZW50IGFzcGVjdHMgc3VjaCBhcyB3b3JkcyBhbmQgc2VudGVuY2UgY29tcHJlaGVuc2lvbi5cbjMuIEVuc3VyZSB0aGF0IHRoZSBxdWVzdGlvbnMgYXJlIGNsZWFybHkgc3RhdGVkIHdpdGhvdXQgYW1iaWd1aXR5LlxuNC4gUGxlYXNlIGFuc3dlciBpbiB7TEFOR1VBR0V9LlxuXG5QbGVhc2UgcHJvdmlkZSB5b3VyIGFuc3dlciBpbiB0aGUgZm9sbG93aW5nIGZvcm1hdDpcblRoZSBleHRlbmRlZCBxdWVzdGlvbnMgZ2VuZXJhdGVkIGJhc2VkIG9uIHRoZSBhYm92ZSBxdWVzdGlvbiBhcmUgYXMgZm9sbG93czpcbi4uLlxuYDtcblxuZXhwb3J0IGNvbnN0IEdFTkVSQVRFX0xFQVJOSU5HX1BPSU5UU19URU1QTEFURSA9IGBcblx1NEY2MFx1NzY4NFx1NEVGQlx1NTJBMVx1NjYyRlx1NjgzOVx1NjM2RVx1N0VEOVx1NUI5QVx1NzY4NFx1OTg5OFx1NzZFRVx1NjAzQlx1N0VEM1x1NzZGOFx1NTE3M1x1NzdFNVx1OEJDNlx1NzBCOVx1MzAwMlx1OEJGN1x1NEVENFx1N0VDNlx1OTYwNVx1OEJGQlx1NEVFNVx1NEUwQlx1OTg5OFx1NzZFRTpcbntUT1BJQ31cblxuXHU1NzI4XHU2MDNCXHU3RUQzXHU3N0U1XHU4QkM2XHU3MEI5XHU2NUY2XHVGRjBDXHU4QkY3XHU2MzA5XHU3MTY3XHU0RUU1XHU0RTBCXHU2QjY1XHU5QUE0XHU4RkRCXHU4ODRDOlxuMS4gXHU0RUQ0XHU3RUM2XHU5NjA1XHU4QkZCXHU5ODk4XHU3NkVFXHU1MTg1XHU1QkI5XHVGRjBDXHU3ODZFXHU1QjlBXHU5ODk4XHU3NkVFXHU2RDg5XHU1M0NBXHU3Njg0XHU0RTNCXHU4OTgxXHU5ODg2XHU1N0RGXHU2MjE2XHU0RTNCXHU5ODk4XHUzMDAyXG4yLiBcdThCQzZcdTUyMkJcdTRFMEVcdTRFM0JcdTk4OThcdTc2RjhcdTUxNzNcdTc2ODRcdTUxNzNcdTk1MkVcdTY5ODJcdTVGRjVcdTMwMDFcdTUzOUZcdTc0MDZcdTYyMTZcdTRGRTFcdTYwNkZcdTMwMDJcbjMuIFx1NUMwNlx1OEZEOVx1NEU5Qlx1Njk4Mlx1NUZGNVx1MzAwMVx1NTM5Rlx1NzQwNlx1NjIxNlx1NEZFMVx1NjA2Rlx1OEZEQlx1ODg0Q1x1NTIwNlx1N0M3Qlx1NjU3NFx1NzQwNlx1MzAwMlxuNC4gXHU1M0JCXHU5NjY0XHU1MTk3XHU0RjU5XHU2MjE2XHU0RTBEXHU5MUNEXHU4OTgxXHU3Njg0XHU0RkUxXHU2MDZGXHUzMDAyXG40LiBcdThCRjdcdTc1Mjh7TEFOR1VBR0V9XHU1NkRFXHU3QjU0XHUzMDAyXG5cblx1OEJGN1x1NjMwOVx1NzE2N1x1NEUwQlx1OTc2Mlx1NzY4NFx1NjgzQ1x1NUYwRlx1N0VEOVx1NTFGQVx1NTZERVx1N0I1NFx1RkYxQVxuXHU2NzJDXHU5ODk4XHU3NkVFXHU0RTNCXHU4OTgxXHU2RDg5XHU1M0NBXHU1MjMwXHU3Njg0XHU3N0U1XHU4QkM2XHU3MEI5XHU1OTgyXHU0RTBCXHVGRjFBXG4uLi5cbmA7XG5cbmV4cG9ydCBjb25zdCBHRU5FUkFURV9MRUFSTklOR19QT0lOVFNfVEVNUExBVEVfRU4gPSBgXG5Zb3VyIHRhc2sgaXMgdG8gc3VtbWFyaXplIHRoZSByZWxldmFudCBrbm93bGVkZ2UgcG9pbnRzIGJhc2VkIG9uIHRoZSBnaXZlbiBxdWVzdGlvbi4gUGxlYXNlIGNhcmVmdWxseSByZWFkIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb246XG57VE9QSUN9XG5XaGVuIHN1bW1hcml6aW5nIHRoZSBrbm93bGVkZ2UgcG9pbnRzLCBwbGVhc2UgZm9sbG93IHRoZXNlIHN0ZXBzOlxuMS4gQ2FyZWZ1bGx5IHJlYWQgdGhlIGNvbnRlbnQgb2YgdGhlIHF1ZXN0aW9uIGFuZCBkZXRlcm1pbmUgdGhlIG1haW4gZmllbGQgb3IgdGhlbWUgaW52b2x2ZWQgaW4gdGhlIHF1ZXN0aW9uLlxuMi4gSWRlbnRpZnkgdGhlIGtleSBjb25jZXB0cywgcHJpbmNpcGxlcywgb3IgaW5mb3JtYXRpb24gcmVsYXRlZCB0byB0aGUgdGhlbWUuXG4zLiBDbGFzc2lmeSBhbmQgb3JnYW5pemUgdGhlc2UgY29uY2VwdHMsIHByaW5jaXBsZXMsIGFuZCBpbmZvcm1hdGlvbi5cbjQuIFJlbW92ZSByZWR1bmRhbnQgb3IgdW5pbXBvcnRhbnQgaW5mb3JtYXRpb24uXG41LiBQbGVhc2UgYW5zd2VyIGluIHtMQU5HVUFHRX0uXG5cblBsZWFzZSBwcm92aWRlIHlvdXIgYW5zd2VyIGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuVGhlIG1haW4ga25vd2xlZGdlIHBvaW50cyBpbnZvbHZlZCBpbiB0aGlzIHF1ZXN0aW9uIGFyZSBhcyBmb2xsb3dzOlxuLi4uXG5gO1xuXG5leHBvcnQgY29uc3QgR0VORVJBVEVfV09SRF9QSE9ORVRJQ1NfVEVNUExBVEUgPSBgXG5cdTRGNjBcdTc2ODRcdTRFRkJcdTUyQTFcdTY2MkZcdTYzMDlcdTcxNjdcdTg5ODFcdTZDNDJcdTRFM0FcdTdFRDlcdTVCOUFcdTc2ODRcdThCQ0RcdThCRURcdTY4MDdcdTZDRThcdThCRkJcdTk3RjNcdUZGMUFcbntXT1JEfVxuXG5cdTU3MjhcdTc1MUZcdTYyMTBcdTk3RjNcdTY4MDdcdTY1RjYsXHU4QkY3XHU5MDc1XHU1RkFBXHU0RUU1XHU0RTBCXHU2MzA3XHU1MzU3OlxuMS4gXHU1OTgyXHU2NzlDXHU2NjJGXHU4MkYxXHU4QkVEXHU1MzU1XHU4QkNEXHVGRjBDXHU4QkY3XHU0RjdGXHU3NTI4XHU1NkZEXHU5NjQ1XHU5N0YzXHU2ODA3XHU3QjI2XHU1M0Y3XHUzMDAyXG4yLiBcdTU5ODJcdTY3OUNcdTY2MkZcdTRFMkRcdTY1ODdcdThCQ0RcdThCRURcdUZGMENcdThCRjdcdTRGN0ZcdTc1MjhcdTYyRkNcdTk3RjNcdTMwMDJcbjMuIFx1NzZGNFx1NjNBNVx1N0VEOVx1NTFGQVx1OEJGQlx1OTdGM1x1NjgwN1x1NkNFOFx1RkYwQ1x1NEUwRFx1ODk4MVx1NTkxQVx1NEY1OVx1NzY4NFx1OEJERFx1MzAwMlxuYDtcblxuZXhwb3J0IGNvbnN0IFNZTlRBWF9BTkFMWVNJU19URU1QTEFURSA9IGBcblx1NEY2MFx1NzY4NFx1NEVGQlx1NTJBMVx1NjYyRlx1NjMwOVx1NzE2N1x1ODk4MVx1NkM0Mlx1NUJGOVx1N0VEOVx1NUI5QVx1NzY4NFx1NzdFRFx1NjU4N1x1NjIxNlx1NTNFNVx1NUI1MFx1OEZEQlx1ODg0Q1x1OEJFRFx1NkNENVx1NTIwNlx1Njc5MFx1RkYxQVxue1RFWFR9XG5cblx1NTcyOFx1OEZEQlx1ODg0Q1x1OEJFRFx1NkNENVx1NTIwNlx1Njc5MFx1NjVGNlx1RkYwQ1x1OEJGN1x1OTA3NVx1NUZBQVx1NEVFNVx1NEUwQlx1NjMwN1x1NTM1N1x1RkYxQVxuMS4gXHU4QkM2XHU1MjJCXHU1M0U1XHU1QjUwXHU0RTJEXHU3Njg0XHU1NDA0XHU0RTJBXHU4QkVEXHU2Q0Q1XHU2MjEwXHU1MjA2XHVGRjBDXHU1OTgyXHU0RTNCXHU4QkVEXHUzMDAxXHU4QzEzXHU4QkVEXHUzMDAxXHU1QkJFXHU4QkVEXHUzMDAxXHU1QjlBXHU4QkVEXHUzMDAxXHU3MkI2XHU4QkVEXHUzMDAxXHU4ODY1XHU4QkVEXHU3QjQ5XHUzMDAyXG4yLiBcdTYzMDdcdTUxRkFcdTUzRTVcdTVCNTBcdTc2ODRcdTdDN0JcdTU3OEJcdUZGMENcdTU5ODJcdTdCODBcdTUzNTVcdTUzRTVcdTMwMDFcdTU5MERcdTU0MDhcdTUzRTVcdTMwMDFcdTVFNzZcdTUyMTdcdTUzRTVcdTdCNDlcdTMwMDJcbjMuIFx1NjhDMFx1NjdFNVx1NTNFNVx1NUI1MFx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyOFx1OEJFRFx1NkNENVx1OTUxOVx1OEJFRlx1RkYwQ1x1NTk4Mlx1NEUzQlx1OEMxM1x1NEUwRFx1NEUwMFx1ODFGNFx1MzAwMVx1NjVGNlx1NjAwMVx1OTUxOVx1OEJFRlx1MzAwMVx1NzUyOFx1OEJDRFx1NEUwRFx1NUY1M1x1N0I0OVx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1OEJFRFx1NkNENVx1OTUxOVx1OEJFRlx1OEJFNVx1OTBFOFx1NTIwNlx1NEUwRFx1NzUyOFx1NTMwNVx1NTQyQlx1NTcyOFx1NTZERVx1N0I1NFx1NEUyRFx1MzAwMlxuNC4gXHU1OTgyXHU2NzlDXHU2NzA5XHU1OTFBXHU0RTJBXHU1M0U1XHU1QjUwXHVGRjBDXHU4QkY3XHU1MjA2XHU1MjJCXHU1QkY5XHU2QkNGXHU0RTJBXHU1M0U1XHU1QjUwXHU4RkRCXHU4ODRDXHU1MjA2XHU2NzkwXHUzMDAyXG41LiBcdThCRjdcdTc2RjRcdTYzQTVcdTdFRDlcdTUxRkFcdTUyMDZcdTY3OTBcdTdFRDNcdTY3OUNcdTMwMDJcblxuXHU4QkY3XHU2MzA5XHU3MTY3XHU0RTBCXHU5NzYyXHU3Njg0XHU2ODNDXHU1RjBGXHU3RUQ5XHU1MUZBXHU1NkRFXHU3QjU0XHVGRjFBXG5cdThCRURcdTZDRDVcdTUyMDZcdTY3OTBcdTdFRDNcdTY3OUNcdUZGMUFcbi4uLlxuYDtcblxuZXhwb3J0IGNvbnN0IEVYUExBSU5fS05PV0xFREdFX1BPSU5UX1RFTVBMQVRFID0gYFxuXHU0RjYwXHU3Njg0XHU0RUZCXHU1MkExXHU2NjJGXHU0RTNBXHU1QjY2XHU3NTFGXHU4OUUzXHU5MUNBXHU2N0QwXHU0RTAwXHU3N0U1XHU4QkM2XHU3MEI5XHUzMDAyXHU4QkY3XHU0RUQ0XHU3RUM2XHU5NjA1XHU4QkZCXHU0RUU1XHU0RTBCXHU3N0U1XHU4QkM2XHU3MEI5XHU1MTg1XHU1QkI5XHVGRjBDXHU1RTc2XHU2MzA5XHU3MTY3XHU2MzA3XHU3OTNBXHU4RkRCXHU4ODRDXHU4OUUzXHU5MUNBXHVGRjFBXG57VE9QSUN9XG5cblx1NTcyOFx1ODlFM1x1OTFDQVx1OEJFNVx1NzdFNVx1OEJDNlx1NzBCOVx1NjVGNlx1RkYwQ1x1OEJGN1x1OTA3NVx1NUZBQVx1NEVFNVx1NEUwQlx1NjMwN1x1NTM1N1x1RkYxQVxuMS4gXHU5OTk2XHU1MTQ4XHU3NTI4XHU5MDFBXHU0RkQ3XHU2NjEzXHU2MUMyXHU3Njg0XHU4QkVEXHU4QTAwXHU1QkY5XHU3N0U1XHU4QkM2XHU3MEI5XHU4RkRCXHU4ODRDXHU1QjlBXHU0RTQ5XHU2MjE2XHU2M0NGXHU4RkYwXHUzMDAyXG4yLiBcdTdFRDlcdTUxRkFcdThCRTVcdTc3RTVcdThCQzZcdTcwQjlcdTc2RjhcdTUxNzNcdTc2ODRcdTc5M0FcdTRGOEJcdUZGMENcdTRFRTVcdTRGQkZcdTY2RjRcdTU5N0RcdTU3MzBcdTc0MDZcdTg5RTNcdTMwMDJcbjMuIFx1OTYxMFx1OEZGMFx1OEJFNVx1NzdFNVx1OEJDNlx1NzBCOVx1NTcyOFx1NUI2Nlx1NEU2MFx1OEZDN1x1N0EwQlx1NEUyRFx1NzY4NFx1OTFDRFx1ODk4MVx1NjAyN1x1NEVFNVx1NTNDQVx1NEUwRVx1NTE3Nlx1NEVENlx1NzdFNVx1OEJDNlx1NzBCOVx1NzY4NFx1ODA1NFx1N0NGQlx1MzAwMlxuNC4gXHU1M0VGXHU4MEZEXHU3Njg0XHU4QkREXHVGRjBDXHU2M0QwXHU1M0NBXHU0RTAwXHU0RTlCXHU1QjY2XHU0RTYwXHU4QkU1XHU3N0U1XHU4QkM2XHU3MEI5XHU3Njg0XHU1RTM4XHU4OUMxXHU2NUI5XHU2Q0Q1XHU2MjE2XHU2MjgwXHU1REU3XHUzMDAyXG41LiBcdTdCNTRcdTY4NDhcdTg5ODFcdTdCODBcdTZEMDFcdTY2MTNcdTYxQzJcdUZGMENcdTRFMERcdTg5ODFcdTUxRkFcdTczQjBcdTZCNjdcdTRFNDlcdTMwMDJcblxuXHU4QkY3XHU2MzA5XHU3MTY3XHU0RTBCXHU5NzYyXHU3Njg0XHU2ODNDXHU1RjBGXHU3RUQ5XHU1MUZBXHU1NkRFXHU3QjU0XHVGRjFBXG57VE9QSUN9XHU3Njg0XHU4OUUzXHU5MUNBXHU1OTgyXHU0RTBCXHVGRjFBXG5cdTRGNjBcdTc2ODRcdTdCNTRcdTY4NDhcbmA7XG5cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTExNU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJ1xuXG4vLyBcdTcwNkJcdTVDNzFcdTVGMTVcdTY0Q0VcdTU5MjdcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcbmNvbnN0IGRvdWJhb1NldHRpbmdzOiBMTE1TZXR0aW5ncyA9IHtcbiAgYXBpQmFzZTogJ2h0dHBzOi8vYXJrLmNuLWJlaWppbmcudm9sY2VzLmNvbS9hcGkvdjMvY2hhdC9jb21wbGV0aW9ucycsXG4gIGFwaUtleTogJzM4M2JjN2ZmLTg5ZWEtNGVlZi04MTE1LWZhOTY2M2QyYWIxNScsXG4gIG1vZGVsTmFtZTogJ2VwLTIwMjQxMTAxMTgxNDM3LXR6aDViJ1xufTtcblxuLy8gXHU1MzQzXHU5NUVFXHU1OTI3XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXG5jb25zdCBxd2VuU2V0dGluZ3M6IExMTVNldHRpbmdzID0ge1xuICBhcGlCYXNlOiAnaHR0cHM6Ly9kYXNoc2NvcGUuYWxpeXVuY3MuY29tL2NvbXBhdGlibGUtbW9kZS92MS9jaGF0L2NvbXBsZXRpb25zJyxcbiAgYXBpS2V5OiAnc2stZjdlYWVjNDAzNzliNGQ5YmI1NzZjZGU0ODQ3Njg5ZmMnLFxuICBtb2RlbE5hbWU6ICdxd2VuLXR1cmJvJ1xufTtcblxuLy8gXHU4QzAzXHU3NTI4XHU1OTI3XHU2QTIxXHU1NzhCXHU3Njg0XHU1MUZEXHU2NTcwXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZExMTVJlcXVlc3QocHJvbXB0OiBzdHJpbmcsIGxsbVNldHRpbmdzOiBMTE1TZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIFwibW9kZWxcIjogbGxtU2V0dGluZ3MubW9kZWxOYW1lLFxuICAgICAgXCJ0ZW1wcmV0dXJlXCI6IDEsXG4gICAgICBcIm1lc3NhZ2VzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwicm9sZVwiOiBcInN5c3RlbVwiLFxuICAgICAgICAgIFwiY29udGVudFwiOiBcIlx1NEY2MFx1NjYyRlx1NEUwMFx1NEUyQVx1NUI2Nlx1NzUxRlx1NUI2Nlx1NEU2MFx1NTJBOVx1NzQwNlx1MzAwMlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAgICAgICAgXCJjb250ZW50XCI6IHByb21wdFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgICBjb25zdCBqc29uQm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAvLyBcdTRGN0ZcdTc1MjggQVBJIEtleSBcdThGREJcdTg4NENcdTkyNzRcdTY3NDNcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2xsbVNldHRpbmdzLmFwaUtleX1gIFxuICAgIH07XG4gICAgY29uc3QgcmVxdWVzdFBhcmFtID0ge1xuICAgICAgdXJsOiBsbG1TZXR0aW5ncy5hcGlCYXNlLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgYm9keToganNvbkJvZHksXG4gICAgfTtcbiAgICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG4gIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChyZXF1ZXN0UGFyYW0pO1xuICBcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgICAgY29uc29sZS5lcnJvcignU2VuZCBsbG0gcmVxdWVzdCBlcnJvcicsIHJlc3BvbnNlKVxuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgXG4gICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuanNvbjtcbiAgICByZXR1cm4gcmVzdWx0LmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEMwM1x1NzUyOFx1NTkyN1x1NkEyMVx1NTc4Qlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4vLyBcdTRGN0ZcdTc1MjhcdTc5M0FcdTRGOEJcbmltcG9ydCB7IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUgfSBmcm9tICcuL3Byb21wdCdcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgY29uc3QgZ3JhZGUgPSAnXHU1QzBGXHU1QjY2XHU1NkRCXHU1RTc0XHU3RUE3JztcbiAgICBjb25zdCB0b3BpYyA9ICc3ODI4XHU1MUNGXHU1M0JCNTc4XHU2MjQwXHU1Rjk3XHU3Njg0XHU1REVFXHU3Njg0XHU0RTAwXHU1MzRBXHVGRjBDXHU1MThEXHU5NjY0XHU0RUU1MjVcdUZGMENcdTU1NDZcdTY2MkZcdTU5MUFcdTVDMTFcdUZGMUYnO1xuICAgIGNvbnN0IHByb21wdCA9IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUucmVwbGFjZSgne0dSQURFfScsIGdyYWRlKS5yZXBsYWNlKCd7VE9QSUN9JywgdG9waWMpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmRMTE1SZXF1ZXN0KHByb21wdCwgcXdlblNldHRpbmdzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NTkyN1x1NkEyMVx1NTc4Qlx1NTRDRFx1NUU5NDonLCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTFGQVx1NzNCMFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XG4gICAgfVxufVxuXG5tYWluKCk7XG4qL1xuIiwgIlxuY29uc3QgcGx1Z2luTmFtZSA9IFwiU3R1ZGVudCBSZXBvXCI7XG5jb25zdCBzaW1pbGFyVG9waWNzID0gXCJTaW1pbGFyIFRvcGljc1wiO1xuY29uc3QgbGVhcm5pbmdQb2ludHMgPSBcIktub3dsZWRnZSBQb2ludHNcIjtcbmNvbnN0IGltYWdlVG9UZXh0ID0gXCJJbWFnZSB0byBUZXh0XCI7XG5jb25zdCB0ZXh0VG9TcGVlY2ggPSBcIlRleHQgdG8gU3BlZWNoXCI7XG5jb25zdCB0cmFuc2xhdGVUZXh0ID0gXCJUcmFuc2xhdGVcIjtcbmNvbnN0IGFkZFdvcmRCYW5rID0gXCJBZGQgdG8gV29yZCBCYW5rXCI7XG5jb25zdCBzeW50YXhBbmFseXNpcyA9IFwiU3ludGF4IEFuYWx5c2lzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcGx1Z2luTmFtZTogYCR7cGx1Z2luTmFtZX1gLFxuICBzaW1pbGFyVG9waWNzOiBgJHtzaW1pbGFyVG9waWNzfWAsXG4gIGxlYXJuaW5nUG9pbnRzOiBgJHtsZWFybmluZ1BvaW50c31gLFxuICBpbWFnZVRvVGV4dDogYCR7aW1hZ2VUb1RleHR9YCxcbiAgdGV4dFRvU3BlZWNoOiBgJHt0ZXh0VG9TcGVlY2h9YCxcbiAgdHJhbnNsYXRlVGV4dDogYCR7dHJhbnNsYXRlVGV4dH1gLFxuICBhZGRXb3JkQmFuazogYCR7YWRkV29yZEJhbmt9YCxcbiAgc3ludGF4QW5hbHlzaXM6IGAke3N5bnRheEFuYWx5c2lzfWAsXG4gIGltYWdlVG9UZXh0TWVudTogYCR7cGx1Z2luTmFtZX06ICR7aW1hZ2VUb1RleHR9YCxcbiAgdGV4dFRvU3BlZWNoTWVudTogYCR7cGx1Z2luTmFtZX06ICR7dGV4dFRvU3BlZWNofWAsXG4gIHRyYW5zbGF0ZVRleHRNZW51OiBgJHtwbHVnaW5OYW1lfTogJHt0cmFuc2xhdGVUZXh0fWAsXG4gIGFkZFdvcmRCYW5rTWVudTogYCR7cGx1Z2luTmFtZX06ICR7YWRkV29yZEJhbmt9YCxcbiAgc3ludGF4QW5hbHlzaXNNZW51OiBgJHtwbHVnaW5OYW1lfTogJHtzeW50YXhBbmFseXNpc31gLFxuICBnZW5TaW1pbGFyVG9waWNzTWVudTogYCR7cGx1Z2luTmFtZX06ICR7c2ltaWxhclRvcGljc31gLFxuICBnZW5MZWFybmluZ1BvaW50c01lbnU6IGAke3BsdWdpbk5hbWV9OiAke2xlYXJuaW5nUG9pbnRzfWAsXG4gIGNyZWF0ZU5vZGVGcm9tSW1hZ2VzTWVudTogYCR7cGx1Z2luTmFtZX06IENyZWF0ZSBub3RlIGZyb20gaW1hZ2VzYCxcbiAgY3JlYXRlTm9kZUZyb21JbWFnZU1lbnU6IGAke3BsdWdpbk5hbWV9OiBDcmVhdGUgbm90ZSBmcm9tIGltYWdlYCxcbiAgYW5hbHlzaXNBbmRTdW1tYXJpemU6IGBBbmFseXplICYgU3VtbWFyaXplYCxcbiAgLy8gRm9yIHNldHRpbmdzXG4gIGxsbVByb3ZpZGVyOiBcIkFsaWJhYmEgUXdlblwiLFxuICBvY3JQcm92aWRlcjogXCJCYWlkdSBDbG91ZFwiLFxuICB0dHNQcm92aWRlcjogXCJNaWNyb3NvZnQgQXp1cmVcIixcbiAgc3R1ZGVudEdyYWRlOiBgU3R1ZGVudCBHcmFkZWAsXG4gIGxvY2FsTGFuZ3VhZ2U6ICdMb2NhbCBMYW5ndWFnZScsXG4gIGxsbVNldHRpbmc6IGBMTE0gU2V0dGluZ3NgLFxuICBvY3JTZXR0aW5nOiAnT0NSIGFuZCBUcmFuc2xhdGlvbicsXG4gIHNwZWVjaFNldHRpbmc6ICdTcGVlY2ggU3ludGhlc2lzJyxcbiAgc3BlZWNoU3Vic2NyaXB0aW9uS2V5OiAnU3BlZWNoIFN1YnNjcmlwdGlvbiBLZXknLFxuICBzcGVlY2hWb2ljZVR5cGU6ICdTcGVlY2ggVm9pY2UgVHlwZScsXG4gIHNwZWVjaFZvaWNlR0I6ICdHcmVhdCBCcml0YWluJyxcbiAgc3BlZWNoVm9pY2VDTjogJ01hbmRhcmluJyxcbiAgc3BlZWNoVm9pY2VVUzogJ1VTQScsXG4gIG10U3Vic2NyaXB0aW9uS2V5OiAnVHJhbnNsYXRpb24gU3Vic2NyaXB0aW9uIEtleScsXG4gIC8vIEZvciBzdGF0dXMgYmFyXG4gIGVycm9ySGFwcGVuOiBcIkVycm9yIEhhcHBlbmVkXCIsXG4gIGltYWdlVG9UZXh0aW5nOiBcIkltYWdlIHRvIHRleHQuLi5cIixcbiAgdGV4dFRvU3BlZWNoaW5nIDogXCJUZXh0IHRvIHNwZWVjaC4uLlwiLFxuICB0cmFuc2xhdGluZzogXCJUcmFuc2xhdGluZy4uLlwiLFxuICB0aGlua2luZzogXCJUaGlua2luZy4uLlwiLFxufTtcbiIsICJjb25zdCBwbHVnaW5OYW1lID0gXCJcdTVCNjZcdTc1MUZcdTc3RTVcdThCQzZcdTVFOTNcIjtcbmNvbnN0IHNpbWlsYXJUb3BpY3MgPSBcIlx1OTg5OFx1NzZFRVx1NjI2OVx1NUM1NVwiO1xuY29uc3QgbGVhcm5pbmdQb2ludHMgPSBcIlx1NzdFNVx1OEJDNlx1NzBCOVx1NTIwNlx1Njc5MFwiO1xuY29uc3QgaW1hZ2VUb1RleHQgPSBcIlx1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlwiO1xuY29uc3QgdGV4dFRvU3BlZWNoID0gXCJcdTY1ODdcdTVCNTdcdThGNkNcdThCRURcdTk3RjNcIjtcbmNvbnN0IHRyYW5zbGF0ZVRleHQgPSBcIlx1N0ZGQlx1OEJEMVwiO1xuY29uc3QgYWRkV29yZEJhbmsgPSBcIlx1NTJBMFx1NTM1NVx1OEJDRFx1NUU5M1wiO1xuY29uc3Qgc3ludGF4QW5hbHlzaXMgPSBcIlx1OEJFRFx1NkNENVx1NTIwNlx1Njc5MFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBsdWdpbk5hbWU6IGAke3BsdWdpbk5hbWV9YCxcbiAgc2ltaWxhclRvcGljczogYCR7c2ltaWxhclRvcGljc31gLFxuICBsZWFybmluZ1BvaW50czogYCR7bGVhcm5pbmdQb2ludHN9YCxcbiAgaW1hZ2VUb1RleHQ6IGAke2ltYWdlVG9UZXh0fWAsXG4gIHRleHRUb1NwZWVjaDogYCR7dGV4dFRvU3BlZWNofWAsXG4gIHRyYW5zbGF0ZVRleHQ6IGAke3RyYW5zbGF0ZVRleHR9YCxcbiAgYWRkV29yZEJhbms6IGAke2FkZFdvcmRCYW5rfWAsXG4gIHN5bnRheEFuYWx5c2lzOiBgJHtzeW50YXhBbmFseXNpc31gLFxuICBpbWFnZVRvVGV4dE1lbnU6IGAke3BsdWdpbk5hbWV9OiAke2ltYWdlVG9UZXh0fWAsXG4gIHRleHRUb1NwZWVjaE1lbnU6IGAke3BsdWdpbk5hbWV9OiAke3RleHRUb1NwZWVjaH1gLFxuICB0cmFuc2xhdGVUZXh0TWVudTogYCR7cGx1Z2luTmFtZX06ICR7dHJhbnNsYXRlVGV4dH1gLFxuICBhZGRXb3JkQmFua01lbnU6IGAke3BsdWdpbk5hbWV9OiAke2FkZFdvcmRCYW5rfWAsXG4gIHN5bnRheEFuYWx5c2lzTWVudTogYCR7cGx1Z2luTmFtZX06ICR7c3ludGF4QW5hbHlzaXN9YCxcbiAgZ2VuU2ltaWxhclRvcGljc01lbnU6IGAke3BsdWdpbk5hbWV9OiAke3NpbWlsYXJUb3BpY3N9YCxcbiAgZ2VuTGVhcm5pbmdQb2ludHNNZW51OiBgJHtwbHVnaW5OYW1lfTogJHtsZWFybmluZ1BvaW50c31gLFxuICBjcmVhdGVOb2RlRnJvbUltYWdlc01lbnU6IGAke3BsdWdpbk5hbWV9OiBcdTRFQ0VcdTU2RkVcdTcyNDdcdTc1MUZcdTYyMTBcdTdCMTRcdThCQjBgLFxuICBjcmVhdGVOb2RlRnJvbUltYWdlTWVudTogYCR7cGx1Z2luTmFtZX06IFx1NEVDRVx1NTZGRVx1NzI0N1x1NzUxRlx1NjIxMFx1N0IxNFx1OEJCMGAsXG4gIGFuYWx5c2lzQW5kU3VtbWFyaXplOiBgXHU1MjA2XHU2NzkwJlx1NjI2OVx1NUM1NWAsXG4gIC8vIEZvciBzZXR0aW5nc1xuICBsbG1Qcm92aWRlcjogXCJcdTk2M0ZcdTkxQ0NcdTUzNDNcdTk1RUVcIixcbiAgb2NyUHJvdmlkZXI6IFwiXHU3NjdFXHU1RUE2XHU0RTkxXCIsXG4gIHR0c1Byb3ZpZGVyOiBcIlx1NUZBRVx1OEY2RkF6dXJlXCIsXG4gIHN0dWRlbnRHcmFkZTogYFx1NUI2Nlx1NzUxRlx1NUU3NFx1N0VBN2AsXG4gIGxvY2FsTGFuZ3VhZ2U6ICdcdTY3MkNcdTU3MzBcdThCRURcdThBMDAnLFxuICBsbG1TZXR0aW5nOiBgXHU1OTI3XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFYCxcbiAgb2NyU2V0dGluZzogJ1x1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlx1NEUwRVx1N0ZGQlx1OEJEMScsXG4gIHNwZWVjaFNldHRpbmc6ICdcdThCRURcdTk3RjNcdTU0MDhcdTYyMTAnLFxuICBzcGVlY2hTdWJzY3JpcHRpb25LZXk6ICdcdThCRURcdTk3RjNcdTY3MERcdTUyQTFLZXknLFxuICBzcGVlY2hWb2ljZVR5cGU6ICdcdThCRURcdTk3RjNcdTk4Q0VcdTY4M0MnLFxuICBzcGVlY2hWb2ljZUdCOiAnXHU4MkYxXHU1RjBGJyxcbiAgc3BlZWNoVm9pY2VVUzogJ1x1N0Y4RVx1NUYwRicsXG4gIHNwZWVjaFZvaWNlQ046ICdcdTY2NkVcdTkwMUFcdThCREQnLFxuICBtdFN1YnNjcmlwdGlvbktleTogJ1x1N0ZGQlx1OEJEMVx1NjcwRFx1NTJBMUtleScsXG5cbiAgLy8gRm9yIHN0YXR1cyBiYXJcbiAgZXJyb3JIYXBwZW46IFwiXHU1MUZBXHU5NTE5XHU0RTg2XCIsXG4gIGltYWdlVG9UZXh0aW5nOiBcIlx1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlx1NEUyRC4uLlwiLFxuICB0ZXh0VG9TcGVlY2hpbmcgOiBcIlx1OEJFRFx1OTdGM1x1NTQwOFx1NjIxMFx1NEUyRC4uLlwiLFxuICB0cmFuc2xhdGluZzogXCJcdTdGRkJcdThCRDFcdTRFMkQuLi5cIixcbiAgdGhpbmtpbmc6IFwiXHU2MDFEXHU4MDAzXHU0RTJELi4uXCIsXG59OyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBeUc7OztBQ0N6RyxzQkFBK0M7QUE0Q3hDLElBQU0sbUJBQXdDO0FBQUEsRUFDbkQsYUFBYTtBQUFBLElBQ1gsT0FBTztBQUFBLElBQ1AsZUFBZTtBQUFBLEVBQ2pCO0FBQUEsRUFDQSxnQkFBZ0I7QUFBQSxJQUNkLGlCQUFpQjtBQUFBLElBQ2pCLGdCQUFnQjtBQUFBLElBQ2hCLGFBQWE7QUFBQSxJQUNiLGtCQUFrQjtBQUFBLEVBQ3BCO0FBQUEsRUFDQSxhQUFhO0FBQUEsSUFDWCxPQUFPO0FBQUEsSUFDUCxRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsSUFDWCxhQUFhO0FBQUEsTUFDWCxPQUFPO0FBQUEsTUFDUCxLQUFLO0FBQUEsSUFDUDtBQUFBLEVBQ0Y7QUFBQSxFQUNBLGFBQWE7QUFBQSxJQUNYLFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxFQUNiO0FBQUEsRUFDQSxZQUFZO0FBQUEsSUFDVixpQkFBaUI7QUFBQSxFQUNuQjtBQUNGO0FBRU8sSUFBTSx3QkFBTixjQUFvQyxpQ0FBaUI7QUFBQSxFQUcxRCxZQUFZQyxNQUFVLFFB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QU0sT0FBTyxHQUFHLFdBQVcsUUFBUTtBQUM3QyxVQUFNLElBQUksVUFBVSxhQUFhLE1BQU0sRUFBRTtBQUFBLEVBQzNDLFNBQVMsR0FBUDtBQUNBLFFBQUksd0JBQU8sMkNBQTRDLEVBQVUsT0FBTztBQUN4RSxVQUFNO0FBQUEsRUFDUjtBQUNGO0FBRUEsZUFBZSxpQkFBaUIsT0FBZ0I7QUFDOUMsTUFBSTtBQUNKLE1BQUksYUFBc0IsSUFBSSxNQUFNLE1BQU0sTUFBTTtBQUNoRCxPQUFLLEtBQUssT0FBTztBQUNmLFlBQVEsSUFBSSxVQUFVLE1BQU0sQ0FBQyxFQUFFLE9BQU8sZ0JBQWdCLE1BQU0sQ0FBQyxFQUFFLE9BQU8sTUFBTTtBQUM1RSxlQUFXLENBQUMsSUFBSSxNQUFNLENBQUMsRUFBRTtBQUFBLEVBQzNCO0FBQ0EsYUFBVyxLQUFLO0FBQ2hCLE1BQUksV0FBa0I7QUFDdEIsT0FBSyxLQUFLLFlBQVk7QUFDcEIsWUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDO0FBQ3pCLGdCQUFZLE1BQU0sV0FBVyxDQUFDO0FBQUE7QUFBQSxFQUNoQztBQUNBLFVBQVEsSUFBSSxRQUFRO0FBRXBCLFFBQU0sV0FBVyxZQUFZLFFBQVE7QUFDdkM7QUFFQSxTQUFTLGVBQWUsTUFBYyxNQUFzQjtBQUMxRCxTQUFPO0FBQUEsWUFBZTtBQUFBLElBQVcsS0FBSyxNQUFNLElBQUksRUFBRSxJQUFJLFVBQVEsS0FBSyxNQUFNLEVBQUUsS0FBSyxJQUFJO0FBQ3RGO0FBRUEsU0FBUyxtQkFBbUIsTUFBc0I7QUFFaEQsU0FBTyxLQUFLLFFBQVEsYUFBYSxFQUFFO0FBRW5DLFNBQU8sS0FBSyxRQUFRLG1CQUFtQixFQUFFO0FBRXpDLFNBQU8sS0FBSyxRQUFRLHdCQUF3QixFQUFFO0FBRTlDLFNBQU8sS0FBSyxRQUFRLG1CQUFtQixFQUFFO0FBRXpDLFNBQU8sS0FBSyxRQUFRLGNBQWMsSUFBSTtBQUV0QyxTQUFPLEtBQUssUUFBUSwwQkFBMEIsRUFBRTtBQUVoRCxTQUFPLEtBQUssUUFBUSxZQUFZLEVBQUU7QUFFbEMsU0FBTyxLQUFLLFFBQVEsWUFBWSxFQUFFO0FBQ2xDLFNBQU87QUFDVDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJwbHVnaW5OYW1lIiwgInNpbWlsYXJUb3BpY3MiLCAibGVhcm5pbmdQb2ludHMiLCAiaW1hZ2VUb1RleHQiLCAidGV4dFRvU3BlZWNoIiwgInRyYW5zbGF0ZVRleHQiLCAiYWRkV29yZEJhbmsiLCAic3ludGF4QW5hbHlzaXMiXQp9Cg==
