/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StudentRepoPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  stuSettings: {
    grade: "\u5C0F\u5B66\u56DB\u5E74\u7EA7",
    localLanguage: "zh-Hans"
  },
  speechSettings: {
    subscriptionKey: "",
    speechLanguage: "en",
    speechVoice: "en-GB-SoniaNeural",
    speechOutputPath: "_audios"
  },
  ocrSettings: {
    appID: "",
    apiKey: "",
    apiSecret: "",
    accessToken: {
      token: "",
      exp: 0
    }
  },
  llmSettings: {
    apiBase: "",
    apiKey: "",
    modelName: ""
  },
  mtSettings: {
    subscriptionKey: ""
  }
};
var StudentRepoSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: this.plugin.trans.pluginName });
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.studentGrade).setDesc(this.plugin.trans.studentGrade).addText((text) => text.setPlaceholder("\u5C0F\u5B66\u56DB\u5E74\u7EA7").setValue(this.plugin.settings.stuSettings.grade).onChange(async (value) => {
      this.plugin.settings.stuSettings.grade = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.localLanguage).setDesc(this.plugin.trans.localLanguage).addDropdown((dropdown) => {
      dropdown.addOption("en", "English");
      dropdown.addOption("zh-Hans", "\u666E\u901A\u8BDD");
      dropdown.setValue(this.plugin.settings.stuSettings.localLanguage);
      dropdown.onChange((option) => {
        this.plugin.settings.stuSettings.localLanguage = option;
        this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: this.plugin.trans.llmSetting });
    new import_obsidian.Setting(containerEl).setName("API URL").setDesc(`${this.plugin.trans.llmProvider} LLM API URL`).addText((text) => text.setPlaceholder("https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions").setValue(this.plugin.settings.llmSettings.apiBase).onChange(async (value) => {
      this.plugin.settings.llmSettings.apiBase = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc(`${this.plugin.trans.llmProvider} LLM API Key`).addText((text) => text.setPlaceholder("sk-***").setValue(this.plugin.settings.llmSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.llmSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Model Name").setDesc(`${this.plugin.trans.llmProvider} LLM Model Name`).addText((text) => text.setPlaceholder("qwen-turbo").setValue(this.plugin.settings.llmSettings.modelName).onChange(async (value) => {
      this.plugin.settings.llmSettings.modelName = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h2", { text: this.plugin.trans.imageToText });
    new import_obsidian.Setting(containerEl).setName("APP ID").setDesc(`${this.plugin.trans.ocrProvider} APP ID`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684APP ID").setValue(this.plugin.settings.ocrSettings.appID).onChange(async (value) => {
      this.plugin.settings.ocrSettings.appID = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc(`${this.plugin.trans.ocrProvider} API Key`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684API Key").setValue(this.plugin.settings.ocrSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.ocrSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Secret").setDesc(`${this.plugin.trans.ocrProvider} API Secret`).addText((text) => text.setPlaceholder("\u4F60\u7533\u8BF7\u5230\u7684API Secret").setValue(this.plugin.settings.ocrSettings.apiSecret).onChange(async (value) => {
      this.plugin.settings.ocrSettings.apiSecret = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h2", { text: this.plugin.trans.speechSetting });
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.speechSubscriptionKey).setDesc("Microsoft Azure Speech Subscription Key").addText((text) => text.setPlaceholder("Your Azure Speech Subscription Key").setValue(this.plugin.settings.speechSettings.subscriptionKey).onChange(async (value) => {
      this.plugin.settings.speechSettings.subscriptionKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.speechVoiceType).setDesc("Speech Voice Type").addDropdown((dropdown) => {
      dropdown.addOption("en-GB-SoniaNeural", this.plugin.trans.speechVoiceGB);
      dropdown.addOption("en-US-AmandaMultilingualNeural", this.plugin.trans.speechVoiceUS);
      dropdown.addOption("zh-CN-XiaoxiaoNeural", this.plugin.trans.speechVoiceCN);
      dropdown.setValue(this.plugin.settings.speechSettings.speechVoice);
      dropdown.onChange((option) => {
        this.plugin.settings.speechSettings.speechVoice = option;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName(this.plugin.trans.mtSubscriptionKey).setDesc("Microsoft Azure Translator Subscription Key").addText((text) => text.setPlaceholder("Your Azure Translator Subscription Key").setValue(this.plugin.settings.mtSettings.subscriptionKey).onChange(async (value) => {
      this.plugin.settings.mtSettings.subscriptionKey = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/ms_azure.ts
var import_obsidian2 = require("obsidian");
var serviceRegion = "eastasia";
var speechApiUrl = `https://${serviceRegion}.tts.speech.microsoft.com/cognitiveservices/v1`;
var mtEndpoint = "https://api.cognitive.microsofttranslator.com/";
var visionApiUrl = `https://${serviceRegion}.api.cognitive.microsoft.com/vision/v3.2/ocr`;
async function textToSpeechHttp(text, subscriptionKey, speechVoice) {
  const headers = {
    "Ocp-Apim-Subscription-Key": subscriptionKey,
    "Content-Type": "application/ssml+xml",
    "X-Microsoft-OutputFormat": "audio-16khz-32kbitrate-mono-mp3",
    "User-Agent": "MySDK/1.0"
  };
  const body = `
  <speak version='1.0' xml:lang='en-US'>
      <voice xml:lang='en-US' xml:gender='Female' name='${speechVoice}'>
          ${text}
      </voice>
  </speak>
  `;
  const requestParam = {
    url: speechApiUrl,
    method: "POST",
    headers,
    body
  };
  const response = await (0, import_obsidian2.requestUrl)(requestParam);
  if (response.status != 200) {
    console.error("Text to speech error", response);
    return new ArrayBuffer(0);
  }
  return response.arrayBuffer;
}
async function translateText(text, targetLanguage, subscriptionKey) {
  try {
    const apiUrl = `${mtEndpoint}/translate?api-version=3.0&to=${targetLanguage}`;
    const headers = {
      "Ocp-Apim-Subscription-Key": subscriptionKey,
      "Ocp-Apim-Subscription-Region": serviceRegion,
      "Content-Type": "application/json"
    };
    const body = [
      {
        "text": text
      }
    ];
    const requestParam = {
      url: apiUrl,
      method: "POST",
      headers,
      body: JSON.stringify(body)
    };
    const response = await (0, import_obsidian2.requestUrl)(requestParam);
    if (response.status != 200) {
      console.error("Send llm request error", response);
      return "";
    }
    const result = response.json;
    if (result.length > 0) {
      return result[0].translations[0].text;
    } else {
      throw new Error("\u672A\u83B7\u53D6\u5230\u6709\u6548\u7684\u7FFB\u8BD1\u7ED3\u679C");
    }
  } catch (error) {
    console.error("\u7FFB\u8BD1\u51FA\u9519:", error);
    throw error;
  }
}

// src/baidu_ai.ts
var import_obsidian3 = require("obsidian");
async function createToken(apiKey, apiSecret) {
  if (!apiKey || !apiSecret)
    throw new Error("Invalid API key secret");
  const url = `https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=${apiKey}&client_secret=${apiSecret}`;
  const headers = {
    "Content-Type": "application/json",
    "Accept": "application/json"
  };
  const response = await (0, import_obsidian3.requestUrl)({
    url,
    method: "POST",
    headers
  });
  if (response.status != 200) {
    console.error("create token error", response);
    return {};
  }
  const data = response.json;
  const token = data.access_token;
  const now = Date.now();
  const exp = now + data.expires_in;
  return {
    token,
    exp
  };
}
async function checkAccessToken(ocrSettings) {
  const now = Date.now();
  if (ocrSettings.accessToken && ocrSettings.accessToken.token && ocrSettings.accessToken.exp > now + 3 * 60 * 1e3) {
    return false;
  }
  const newToken = await createToken(ocrSettings.apiKey, ocrSettings.apiSecret);
  console.log("create new token", newToken);
  ocrSettings.accessToken = newToken;
  return true;
}
async function imageToTextHttp(imageBuffer, ocrSettings) {
  const url = `https://aip.baidubce.com/rest/2.0/ocr/v1/accurate_basic?access_token=${ocrSettings.accessToken.token}`;
  const headers = {
    "Content-Type": "application/x-www-form-urlencoded"
  };
  const image_base64 = (0, import_obsidian3.arrayBufferToBase64)(imageBuffer);
  const body = `image=${encodeURIComponent(image_base64)}&paragraph=true`;
  const requestParam = {
    url,
    method: "POST",
    headers,
    body
  };
  const response = await (0, import_obsidian3.requestUrl)(requestParam);
  if (response.status != 200) {
    console.error("Image to text error", response);
    new import_obsidian3.Notice(`Image to text error: ${response.status}`);
    return "";
  }
  const result = response.json;
  let text = "";
  if (result.paragraphs_result) {
    result.paragraphs_result.forEach((item) => {
      for (let i = 0; i < item.words_result_idx.length; i++) {
        text += result.words_result[item.words_result_idx[i]].words + " ";
      }
      text += "\n";
    });
  }
  console.log("\u56FE\u7247\u8F6C\u6587\u5B57\u6BB5\u843D\u7ED3\u679C:", text);
  return text;
}

// src/prompt.ts
var GENERATE_SIMILAR_TOPIC_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6839\u636E\u5DF2\u6709\u7684\u9898\u76EE\u751F\u62105\u9053\u6269\u5C55\u9898\u76EE\uFF0C\u8FD9\u4E9B\u9898\u76EE\u8981\u7B26\u5408{GRADE}\u7684\u77E5\u8BC6\u6C34\u5E73\u3002

\u9996\u5148\uFF0C\u5DF2\u6709\u9898\u76EE\u5982\u4E0B\uFF1A
{TOPIC}

{GRADE}\u77E5\u8BC6\u6C34\u5E73\u7684\u51FA\u9898\u8981\u6C42\u5982\u4E0B\uFF1A
1. \u9898\u76EE\u4E0D\u80FD\u8FC7\u4E8E\u590D\u6742\uFF0C\u8981\u7B26\u5408{GRADE}\u5B66\u751F\u7684\u8BA4\u77E5\u80FD\u529B\u3002
2. \u5E94\u6DB5\u76D6{GRADE}\u8BFE\u7A0B\u4E2D\u7684\u5E38\u89C1\u77E5\u8BC6\u70B9\u3002

\u5728\u51FA\u9898\u65F6\uFF0C\u8BF7\u9075\u5FAA\u4EE5\u4E0B\u6307\u5BFC\uFF1A
1. \u5BF9\u4E8E\u6BCF\u4E00\u9053\u6269\u5C55\u9898\u76EE\uFF0C\u5C3D\u91CF\u4ECE\u4E0D\u540C\u7684\u77E5\u8BC6\u70B9\u89D2\u5EA6\u51FA\u53D1\uFF0C\u4F46\u8981\u57FA\u4E8E\u539F\u59CB\u9898\u76EE\u76F8\u5173\u7684\u77E5\u8BC6\u8303\u7574\u3002
2. \u5982\u679C\u539F\u59CB\u9898\u76EE\u662F\u6570\u5B66\u9898\uFF0C\u6269\u5C55\u9898\u76EE\u53EF\u4EE5\u6539\u53D8\u6570\u5B57\u3001\u8FD0\u7B97\u7B26\u53F7\u6216\u8005\u9898\u578B\u3002\u5982\u679C\u662F\u8BED\u6587\u9898\uFF0C\u53EF\u4EE5\u4ECE\u5B57\u8BCD\u3001\u8BED\u53E5\u7406\u89E3\u7B49\u4E0D\u540C\u65B9\u9762\u51FA\u9898\u3002
3. \u786E\u4FDD\u9898\u76EE\u8868\u8FF0\u6E05\u6670\uFF0C\u6CA1\u6709\u6B67\u4E49\u3002
4. \u8BF7\u7528{LANGUAGE}\u56DE\u7B54\u3002

\u8BF7\u6309\u7167\u4E0B\u9762\u7684\u683C\u5F0F\u7ED9\u51FA\u56DE\u7B54\uFF1A
\u6839\u636E\u4E0A\u8FF0\u9898\u76EE\u751F\u6210\u7684\u6269\u5C55\u9898\u76EE\u5982\u4E0B\uFF1A
...
`;
var GENERATE_SIMILAR_TOPIC_TEMPLATE_EN = `
Your task is to generate 5 extended questions based on the existing question. These questions should be in line with the knowledge level of {GRADE}.
First, the existing question is as follows:
{TOPIC}
The requirements for setting questions at the {GRADE} knowledge level are as follows:
1. The questions should not be overly complex and should match the cognitive abilities of {GRADE} students.
2. They should cover common knowledge points in the {GRADE} curriculum.

When setting the questions, please follow the following guidelines:
1. For each extended question, try to approach from different knowledge - point perspectives, but stay within the knowledge scope related to the original question.
2. If the original question is a math problem, the extended questions can change the numbers, operation symbols, or question types. If it is a Chinese language problem, questions can be set from different aspects such as words and sentence comprehension.
3. Ensure that the questions are clearly stated without ambiguity.
4. Please answer in {LANGUAGE}.

Please provide your answer in the following format:
The extended questions generated based on the above question are as follows:
...
`;
var GENERATE_LEARNING_POINTS_TEMPLATE = `
\u4F60\u7684\u4EFB\u52A1\u662F\u6839\u636E\u7ED9\u5B9A\u7684\u9898\u76EE\u603B\u7ED3\u76F8\u5173\u77E5\u8BC6\u70B9\u3002\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4EE5\u4E0B\u9898\u76EE:
{TOPIC}

\u5728\u603B\u7ED3\u77E5\u8BC6\u70B9\u65F6\uFF0C\u8BF7\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u8FDB\u884C:
1. \u4ED4\u7EC6\u9605\u8BFB\u9898\u76EE\u5185\u5BB9\uFF0C\u786E\u5B9A\u9898\u76EE\u6D89\u53CA\u7684\u4E3B\u8981\u9886\u57DF\u6216\u4E3B\u9898\u3002
2. \u8BC6\u522B\u4E0E\u4E3B\u9898\u76F8\u5173\u7684\u5173\u952E\u6982\u5FF5\u3001\u539F\u7406\u6216\u4FE1\u606F\u3002
3. \u5C06\u8FD9\u4E9B\u6982\u5FF5\u3001\u539F\u7406\u6216\u4FE1\u606F\u8FDB\u884C\u5206\u7C7B\u6574\u7406\u3002
4. \u53BB\u9664\u5197\u4F59\u6216\u4E0D\u91CD\u8981\u7684\u4FE1\u606F\u3002
4. \u8BF7\u7528{LANGUAGE}\u56DE\u7B54\u3002

\u8BF7\u6309\u7167\u4E0B\u9762\u7684\u683C\u5F0F\u7ED9\u51FA\u56DE\u7B54\uFF1A
\u672C\u9898\u76EE\u4E3B\u8981\u6D89\u53CA\u5230\u7684\u77E5\u8BC6\u70B9\u5982\u4E0B\uFF1A
...
`;
var GENERATE_LEARNING_POINTS_TEMPLATE_EN = `
Your task is to summarize the relevant knowledge points based on the given question. Please carefully read the following question:
{TOPIC}
When summarizing the knowledge points, please follow these steps:
1. Carefully read the content of the question and determine the main field or theme involved in the question.
2. Identify the key concepts, principles, or information related to the theme.
3. Classify and organize these concepts, principles, and information.
4. Remove redundant or unimportant information.
5. Please answer in {LANGUAGE}.

Please provide your answer in the following format:
The main knowledge points involved in this question are as follows:
...
`;

// src/llm.ts
var import_obsidian4 = require("obsidian");
async function sendLLMRequest(prompt, llmSettings) {
  try {
    const body = {
      "model": llmSettings.modelName,
      "tempreture": 1,
      "messages": [
        {
          "role": "system",
          "content": "\u4F60\u662F\u4E00\u4E2A\u5B66\u751F\u5B66\u4E60\u52A9\u7406\u3002"
        },
        {
          "role": "user",
          "content": prompt
        }
      ]
    };
    const jsonBody = JSON.stringify(body);
    const headers = {
      "Content-Type": "application/json",
      // 使用 API Key 进行鉴权
      "Authorization": `Bearer ${llmSettings.apiKey}`
    };
    const requestParam = {
      url: llmSettings.apiBase,
      method: "POST",
      headers,
      body: jsonBody
    };
    const response = await (0, import_obsidian4.requestUrl)(requestParam);
    if (response.status != 200) {
      console.error("Send llm request error", response);
      return "";
    }
    const result = response.json;
    return result.choices[0].message.content;
  } catch (error) {
    console.error("\u8C03\u7528\u5927\u6A21\u578B\u51FA\u9519:", error);
    throw error;
  }
}

// src/locales/en.ts
var pluginName = "Student Repo";
var similarTopics = "Similar Topics";
var learningPoints = "Knowledge Points";
var imageToText = "Image to Text";
var textToSpeech = "Text to Speech";
var translateText2 = "Translate";
var en_default = {
  pluginName: `${pluginName}`,
  similarTopics: `${similarTopics}`,
  learningPoints: `${learningPoints}`,
  imageToText: `${imageToText}`,
  textToSpeech: `${textToSpeech}`,
  translateText: `${translateText2}`,
  imageToTextMenu: `${pluginName}: ${imageToText}`,
  textToSpeechMenu: `${pluginName}: ${textToSpeech}`,
  translateTextMenu: `${pluginName}: ${translateText2}`,
  genSimilarTopicsMenu: `${pluginName}: ${similarTopics}`,
  genLearningPointsMenu: `${pluginName}: ${learningPoints}`,
  createNodeFromImagesMenu: `${pluginName}: Create note from images`,
  createNodeFromImageMenu: `${pluginName}: Create note from image`,
  analysisAndSummarize: `Analyze & Summarize`,
  // For settings
  llmProvider: "Alibaba Qwen",
  ocrProvider: "Baidu Cloud",
  ttsProvider: "Microsoft Azure",
  studentGrade: `Student Grade`,
  localLanguage: "Local Language",
  llmSetting: `LLM Settings`,
  speechSetting: "Speech and Translation",
  speechSubscriptionKey: "Speech Subscription Key",
  speechVoiceType: "Speech Voice Type",
  speechVoiceGB: "Great Britain",
  speechVoiceCN: "Mandarin",
  speechVoiceUS: "USA",
  mtSubscriptionKey: "Translation Subscription Key",
  // For status bar
  errorHappen: "Error Happened",
  imageToTexting: "Image to text...",
  textToSpeeching: "Text to speech...",
  translating: "Translating...",
  thinking: "Thinking..."
};

// src/locales/zh-CN.ts
var pluginName2 = "\u5B66\u751F\u77E5\u8BC6\u5E93";
var similarTopics2 = "\u9898\u76EE\u6269\u5C55";
var learningPoints2 = "\u77E5\u8BC6\u70B9\u5206\u6790";
var imageToText2 = "\u6587\u5B57\u8BC6\u522B";
var textToSpeech2 = "\u6587\u5B57\u8F6C\u8BED\u97F3";
var translateText3 = "\u7FFB\u8BD1";
var zh_CN_default = {
  pluginName: `${pluginName2}`,
  similarTopics: `${similarTopics2}`,
  learningPoints: `${learningPoints2}`,
  imageToText: `${imageToText2}`,
  textToSpeech: `${textToSpeech2}`,
  translateText: `${translateText3}`,
  imageToTextMenu: `${pluginName2}: ${imageToText2}`,
  textToSpeechMenu: `${pluginName2}: ${textToSpeech2}`,
  translateTextMenu: `${pluginName2}: ${translateText3}`,
  genSimilarTopicsMenu: `${pluginName2}: ${similarTopics2}`,
  genLearningPointsMenu: `${pluginName2}: ${learningPoints2}`,
  createNodeFromImagesMenu: `${pluginName2}: \u4ECE\u56FE\u7247\u751F\u6210\u7B14\u8BB0`,
  createNodeFromImageMenu: `${pluginName2}: \u4ECE\u56FE\u7247\u751F\u6210\u7B14\u8BB0`,
  analysisAndSummarize: `\u5206\u6790&\u6269\u5C55`,
  // For settings
  llmProvider: "\u963F\u91CC\u5343\u95EE",
  ocrProvider: "\u767E\u5EA6\u4E91",
  ttsProvider: "\u5FAE\u8F6FAzure",
  studentGrade: `\u5B66\u751F\u5E74\u7EA7`,
  localLanguage: "\u672C\u5730\u8BED\u8A00",
  llmSetting: `\u5927\u6A21\u578B\u914D\u7F6E`,
  speechSetting: "\u8BED\u97F3\u5408\u6210\u4E0E\u7FFB\u8BD1",
  speechSubscriptionKey: "\u8BED\u97F3\u670D\u52A1Key",
  speechVoiceType: "\u8BED\u97F3\u98CE\u683C",
  speechVoiceGB: "\u82F1\u5F0F",
  speechVoiceUS: "\u7F8E\u5F0F",
  speechVoiceCN: "\u666E\u901A\u8BDD",
  mtSubscriptionKey: "\u7FFB\u8BD1\u670D\u52A1Key",
  // For status bar
  errorHappen: "\u51FA\u9519\u4E86",
  imageToTexting: "\u6587\u5B57\u8BC6\u522B\u4E2D...",
  textToSpeeching: "\u8BED\u97F3\u5408\u6210\u4E2D...",
  translating: "\u7FFB\u8BD1\u4E2D...",
  thinking: "\u601D\u8003\u4E2D..."
};

// src/main.ts
var StudentRepoPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    var _a;
    const locale = window.localStorage.getItem("language");
    this.isLangZh = (_a = locale == null ? void 0 : locale.startsWith("zh")) != null ? _a : false;
    this.trans = this.isLangZh ? zh_CN_default : en_default;
    this.addSettingTab(new StudentRepoSettingTab(this.app, this));
    await this.loadSettings();
    console.log("Student Repository Helper loaded");
    console.log("Settings:", this.settings);
    console.log("Platform isDesktop:", import_obsidian5.Platform.isDesktop);
    console.log("Platform isMobile:", import_obsidian5.Platform.isMobile);
    console.log("Platform isWin:", import_obsidian5.Platform.isWin);
    this.registerFileMenu();
    this.registerEditorMenu();
    this.registerCommand();
  }
  registerFileMenu() {
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        var isImages = isImageFiles(files);
        if (isImages) {
          if (isImages) {
            menu.addItem((item) => {
              item.setTitle(this.trans.createNodeFromImagesMenu).setIcon("document").onClick(async () => {
                await createImagesNote(files);
              });
            });
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        const isImage = isFileImage(file.path);
        if (isImage) {
          menu.addItem((item) => {
            item.setTitle(this.trans.createNodeFromImageMenu).setIcon("document").onClick(async () => {
              var files = [file];
              await createImagesNote(files);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.imageToTextMenu).setIcon("document").onClick(async () => {
              const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
              if (view) {
                await this.handleOcrRequest(file.path, view.editor);
              }
            });
          });
        }
      })
    );
  }
  async handleOcrRequest(imageFile, editor, line = -1) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.imageToTexting);
    console.log("\u6587\u5B57\u8BC6\u522B:", imageFile);
    try {
      const file = await this.getLinkedFile(imageFile);
      if (!file) {
        new import_obsidian5.Notice(`Image file not exist: ${imageFile}`);
      } else {
        if (this.isLangZh) {
          new import_obsidian5.Notice(`\u5C06<${imageFile}>\u8F6C\u6210\u6587\u5B57`);
        } else {
          new import_obsidian5.Notice(`Convert <${imageFile}> to text`);
        }
        var imageBuffer = await this.app.vault.adapter.readBinary(file.path);
        const isUpdate = await checkAccessToken(this.settings.ocrSettings);
        if (isUpdate) {
          await this.saveSettings();
        }
        const text = await imageToTextHttp(imageBuffer, this.settings.ocrSettings);
        if (line < 0) {
          line = editor.getCursor().line + 1;
        }
        const nextLinePos = { line, ch: 0 };
        editor.replaceRange(`${text}
`, nextLinePos);
        editor.setCursor(nextLinePos);
        editor.scrollIntoView({ from: { line, ch: 0 }, to: { line: line + 20, ch: 0 } });
      }
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleImagesToTextRequest(mdFile, editor) {
    const mdContent = await this.app.vault.read(mdFile);
    const lines = mdContent.split("\n");
    const imageRegex = /!\[\[(.*\.(jpg|jpeg|png|bmp))\]\]/;
    for (let i = lines.length - 1; i >= 0; i--) {
      const line = lines[i];
      const match = line.match(imageRegex);
      if (match) {
        const imagePath = match[1];
        console.log(`Image match: ${imagePath} in line ${i}`);
        await this.handleOcrRequest(imagePath, editor, i + 1);
      }
    }
  }
  async handleTextToSpeechRequest(text, mdFile, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.textToSpeeching);
    try {
      const { full_path, rel_path } = await this.getAudioFilePath(mdFile, this.settings);
      text = removeMarkdownTags(text);
      console.time("textToSpeech");
      let audio_buffer = await textToSpeechHttp(text, this.settings.speechSettings.subscriptionKey, this.settings.speechSettings.speechVoice);
      await this.app.vault.adapter.writeBinary(rel_path, audio_buffer);
      console.timeEnd("textToSpeech");
      console.log(`Audio saved to ${rel_path}`);
      let md_text = `\`\`\`audio-player
 [[${rel_path}]]
\`\`\`
`;
      const startOffset = editor.getCursor("from");
      const nextLinePos = { line: startOffset.line, ch: 0 };
      editor.replaceRange(md_text, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleTranslateTextRequest(text, editor) {
    let translatedText = await translateText(text, this.settings.stuSettings.localLanguage, this.settings.mtSettings.subscriptionKey);
    const endOffset = editor.getCursor("to");
    editor.replaceRange(`(${translatedText})`, endOffset);
  }
  async handleGenSimilarTopicRequest(topic, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText("\u601D\u8003\u4E2D...");
    try {
      var prompt = "";
      if (this.settings.stuSettings.localLanguage === "zh-Hans") {
        prompt = GENERATE_SIMILAR_TOPIC_TEMPLATE.replace("{GRADE}", this.settings.stuSettings.grade).replace("{TOPIC}", topic).replace("{LANGUAGE}", "\u4E2D\u6587");
      } else {
        prompt = GENERATE_SIMILAR_TOPIC_TEMPLATE_EN.replace("{GRADE}", this.settings.stuSettings.grade).replace("{TOPIC}", topic).replace("{LANGUAGE}", "English");
      }
      const result = await sendLLMRequest(prompt, this.settings.llmSettings);
      const endOffset = editor.getCursor("to");
      const nextLinePos = { line: endOffset.line + 1, ch: 0 };
      editor.replaceRange(`${addQuoteToText(result, this.trans.similarTopics)}

`, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  async handleGenLearningPointRequest(topic, editor) {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.setText(this.trans.thinking);
    try {
      var prompt = "";
      if (this.settings.stuSettings.localLanguage === "zh-Hans") {
        prompt = GENERATE_LEARNING_POINTS_TEMPLATE.replace("{TOPIC}", topic).replace("{LANGUAGE}", "\u4E2D\u6587");
      } else {
        prompt = GENERATE_LEARNING_POINTS_TEMPLATE_EN.replace("{TOPIC}", topic).replace("{LANGUAGE}", "English");
      }
      const result = await sendLLMRequest(prompt, this.settings.llmSettings);
      const endOffset = editor.getCursor("to");
      const nextLinePos = { line: endOffset.line + 1, ch: 0 };
      editor.replaceRange(`${addQuoteToText(result, this.trans.learningPoints)}

`, nextLinePos);
      statusBarItem.setText("");
    } catch (error) {
      console.error(error);
      statusBarItem.setText(this.trans.errorHappen + error.message);
      setTimeout(() => {
        statusBarItem.setText("");
      }, 5e3);
    }
  }
  registerEditorMenu() {
    if (!import_obsidian5.Platform.isDesktop) {
      return;
    }
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        const imageRegex = /!?\[?\[?(.*\.(jpg|jpeg|png|bmp))\]?\]?/;
        const match = selection.match(imageRegex);
        if (!match) {
          menu.addItem((item) => {
            item.setTitle(this.trans.textToSpeechMenu).setIcon("document").onClick(async () => {
              this.handleTextToSpeechRequest(selection, view.file, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.translateTextMenu).setIcon("document").onClick(async () => {
              this.handleTranslateTextRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.genSimilarTopicsMenu).setIcon("document").onClick(async () => {
              this.handleGenSimilarTopicRequest(selection, editor);
            });
          });
          menu.addItem((item) => {
            item.setTitle(this.trans.genLearningPointsMenu).setIcon("document").onClick(async () => {
              this.handleGenLearningPointRequest(selection, editor);
            });
          });
        }
      })
    );
  }
  registerCommand() {
    this.addCommand({
      id: "translate",
      name: this.trans.translateText,
      icon: "languages",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleTranslateTextRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "text_to_speech",
      name: this.trans.textToSpeech,
      icon: "activity",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleTextToSpeechRequest(selection, view.file, editor);
      }
    });
    this.addCommand({
      id: "gen_learning_point",
      name: this.trans.analysisAndSummarize,
      icon: "brain",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        console.log("selection:", selection);
        this.handleGenSimilarTopicRequest(selection, editor);
        this.handleGenLearningPointRequest(selection, editor);
      }
    });
    this.addCommand({
      id: "image_to_text",
      name: this.trans.imageToText,
      icon: "type",
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        const imageRegex = /!?\[?\[?(.*\.(jpg|jpeg|png|bmp))\]?\]?/;
        const match = selection.match(imageRegex);
        if (match) {
          let imageFile = match[1];
          this.handleOcrRequest(imageFile, editor);
        } else {
          if (view) {
            this.handleImagesToTextRequest(view.file, editor);
          }
        }
      }
    });
  }
  async getLinkedFile(link) {
    const file = this.app.metadataCache.getFirstLinkpathDest(link, "");
    if (!file) {
      return null;
    }
    return this.app.vault.getAbstractFileByPath(file.path);
  }
  async getAudioFilePath(tfile, settings) {
    const audio_path = (0, import_obsidian5.normalizePath)(`${tfile.parent.path}/${settings.speechSettings.speechOutputPath}`);
    if (!await this.app.vault.adapter.exists(audio_path)) {
      await this.app.vault.adapter.mkdir(audio_path);
    }
    var audio_full_path = this.app.vault.adapter.getFullPath(audio_path);
    var full_path = "";
    var rel_path = "";
    var i = 0;
    do {
      var output_fname = "";
      if (i > 0) {
        output_fname = `${tfile.basename}_${i}.mp3`;
      } else {
        output_fname = `${tfile.basename}.mp3`;
      }
      full_path = (0, import_obsidian5.normalizePath)(`${audio_full_path}/${output_fname}`);
      rel_path = (0, import_obsidian5.normalizePath)(`${audio_path}/${output_fname}`);
      i++;
    } while (await this.app.vault.adapter.exists(rel_path));
    return { full_path, rel_path };
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
function isFileImage(path) {
  return path.endsWith(".png") || path.endsWith(".jpg") || path.endsWith(".jpeg") || path.endsWith(".webp") || path.endsWith(".gif") || path.endsWith(".bmp");
}
function isImageFiles(files) {
  var j;
  for (j in files) {
    var f_path = files[j].path;
    if (!isFileImage(f_path)) {
      return false;
    }
  }
  return true;
}
async function createNote(name, contents = "") {
  var _a, _b, _c;
  try {
    let pathPrefix;
    switch (app.vault.getConfig("newFileLocation")) {
      case "current":
        pathPrefix = (_c = (_b = (_a = app.workspace.getActiveFile()) == null ? void 0 : _a.parent) == null ? void 0 : _b.path) != null ? _c : "";
        break;
      case "folder":
        pathPrefix = app.vault.getConfig("newFileFolderPath");
        break;
      default:
        pathPrefix = "";
        break;
    }
    if (pathPrefix) {
      pathPrefix += "/";
    }
    let path = `${pathPrefix}${name}`;
    console.log(`pathPrefix: ${pathPrefix}, name: ${name}`);
    if (app.vault.getAbstractFileByPath(`${path}.md`)) {
      let i = 1;
      while (await app.vault.getAbstractFileByPath(`${path} ${i}.md`)) {
        i++;
      }
      path += ` ${i}`;
    }
    await app.vault.create(`${path}.md`, contents);
    await app.workspace.openLinkText(path, "");
  } catch (e) {
    new import_obsidian5.Notice("Text Extract - Could not create note: " + e.message);
    throw e;
  }
}
async function createImagesNote(files) {
  var j;
  var file_paths = new Array(files.length);
  for (j in files) {
    console.log(`ppath: ${files[j].parent.path}, pname: ${files[j].parent.name}`);
    file_paths[j] = files[j].path;
  }
  file_paths.sort();
  var contents = "";
  for (j in file_paths) {
    console.log(file_paths[j]);
    contents += `![[${file_paths[j]}]]
`;
  }
  console.log(contents);
  await createNote("Untitled", contents);
}
function addQuoteToText(text, note) {
  return `
> [!NOTE] ${note}
` + text.split("\n").map((line) => `> ${line}`).join("\n");
}
function removeMarkdownTags(text) {
  text = text.replace(/^(#+)\s/gm, "");
  text = text.replace(/(\*\*|__|_|\*)/g, "");
  text = text.replace(/^([-*+]\s|\d+\.\s)/gm, "");
  text = text.replace(/```[\s\S]*?```/g, "");
  text = text.replace(/`([^`]*)`/g, "$1");
  text = text.replace(/!?\[[^\]]*\]\([^)]*\)/g, "");
  text = text.replace(/^---+$/gm, "");
  text = text.replace(/<[^>]*>/g, "");
  return text;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9tc19henVyZS50cyIsICJzcmMvYmFpZHVfYWkudHMiLCAic3JjL3Byb21wdC50cyIsICJzcmMvbGxtLnRzIiwgInNyYy9sb2NhbGVzL2VuLnRzIiwgInNyYy9sb2NhbGVzL3poLUNOLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgUGxhdGZvcm0sIEVkaXRvciwgTWFya2Rvd25WaWV3LCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU3R1ZGVudFJlcG9TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgU3R1ZGVudFJlcG9TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyB0ZXh0VG9TcGVlY2hIdHRwLCB0cmFuc2xhdGVUZXh0LCBpbWFnZVRvVGV4dCB9IGZyb20gXCIuL21zX2F6dXJlXCI7XG5pbXBvcnQgeyBjaGVja0FjY2Vzc1Rva2VuLCBpbWFnZVRvVGV4dEh0dHAgfSBmcm9tIFwiLi9iYWlkdV9haVwiO1xuaW1wb3J0IHsgXG4gIEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUsXG4gIEdFTkVSQVRFX0xFQVJOSU5HX1BPSU5UU19URU1QTEFURSxcbiAgR0VORVJBVEVfTEVBUk5JTkdfUE9JTlRTX1RFTVBMQVRFX0VOLFxuICBHRU5FUkFURV9TSU1JTEFSX1RPUElDX1RFTVBMQVRFX0VOXG59IGZyb20gJy4vcHJvbXB0J1xuXG5pbXBvcnQgeyBzZW5kTExNUmVxdWVzdCB9IGZyb20gJy4vbGxtJ1xuaW1wb3J0IGVuIGZyb20gJy4vbG9jYWxlcy9lbidcbmltcG9ydCB6aCBmcm9tICcuL2xvY2FsZXMvemgtQ04nXG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHVkZW50UmVwb1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBTdHVkZW50UmVwb1NldHRpbmdzO1xuICB0cmFuczogYW55O1xuICBpc0xhbmdaaDogYm9vbGVhbjs7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnN0IGxvY2FsZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKVxuICAgIHRoaXMuaXNMYW5nWmggPSBsb2NhbGU/LnN0YXJ0c1dpdGgoJ3poJykgPz8gZmFsc2U7XG4gICAgdGhpcy50cmFucyA9IHRoaXMuaXNMYW5nWmggPyB6aCA6IGVuO1xuXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTdHVkZW50UmVwb1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgY29uc29sZS5sb2coJ1N0dWRlbnQgUmVwb3NpdG9yeSBIZWxwZXIgbG9hZGVkJyk7XG4gICAgY29uc29sZS5sb2coJ1NldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgIGNvbnNvbGUubG9nKCdQbGF0Zm9ybSBpc0Rlc2t0b3A6JywgUGxhdGZvcm0uaXNEZXNrdG9wKTtcbiAgICBjb25zb2xlLmxvZygnUGxhdGZvcm0gaXNNb2JpbGU6JywgUGxhdGZvcm0uaXNNb2JpbGUpO1xuICAgIGNvbnNvbGUubG9nKCdQbGF0Zm9ybSBpc1dpbjonLCBQbGF0Zm9ybS5pc1dpbik7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRmlsZU1lbnUoKTtcbiAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yTWVudSgpO1xuICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKCk7XG5cdH1cblxuICByZWdpc3RlckZpbGVNZW51KCk6IHZvaWQge1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICB2YXIgaXNJbWFnZXMgPSBpc0ltYWdlRmlsZXMoZmlsZXMpXG4gICAgICAgIGlmIChpc0ltYWdlcykge1xuICAgICAgICAgIGlmIChpc0ltYWdlcykge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUodGhpcy50cmFucy5jcmVhdGVOb2RlRnJvbUltYWdlc01lbnUpXG4gICAgICAgICAgICAgIC5zZXRJY29uKCdkb2N1bWVudCcpXG4gICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUltYWdlc05vdGUoZmlsZXMpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzSW1hZ2UgPSBpc0ZpbGVJbWFnZShmaWxlLnBhdGgpXG4gICAgICAgIGlmIChpc0ltYWdlKSB7XG4gICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKHRoaXMudHJhbnMuY3JlYXRlTm9kZUZyb21JbWFnZU1lbnUpXG4gICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgIHZhciBmaWxlcyA9IFtmaWxlXVxuICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVJbWFnZXNOb3RlKGZpbGVzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUodGhpcy50cmFucy5pbWFnZVRvVGV4dE1lbnUpXG4gICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2NyUmVxdWVzdChmaWxlLnBhdGgsIHZpZXcuZWRpdG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXHRcdFx0fSlcblx0XHQpO1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlT2NyUmVxdWVzdChpbWFnZUZpbGU6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IsIGxpbmU6IG51bWJlciA9IC0xKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLmltYWdlVG9UZXh0aW5nKTtcbiAgICBjb25zb2xlLmxvZygnXHU2NTg3XHU1QjU3XHU4QkM2XHU1MjJCOicsIGltYWdlRmlsZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmdldExpbmtlZEZpbGUoaW1hZ2VGaWxlKTtcbiAgICAgIGlmICghZmlsZSkge1xuICAgICAgICBuZXcgTm90aWNlKGBJbWFnZSBmaWxlIG5vdCBleGlzdDogJHtpbWFnZUZpbGV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5pc0xhbmdaaCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NUMwNjwke2ltYWdlRmlsZX0+XHU4RjZDXHU2MjEwXHU2NTg3XHU1QjU3YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgQ29udmVydCA8JHtpbWFnZUZpbGV9PiB0byB0ZXh0YCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlQnVmZmVyOiBBcnJheUJ1ZmZlciA9ICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWRCaW5hcnkoZmlsZS5wYXRoKVxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTc2N0VcdTVFQTZcdTRFOTFcdTYzRDBcdTRGOUJcdTc2ODRcdTY1ODdcdTVCNTdcdThCQzZcdTUyMkJcdTY3MERcdTUyQTFcbiAgICAgICAgY29uc3QgaXNVcGRhdGUgPSBhd2FpdCBjaGVja0FjY2Vzc1Rva2VuKHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpO1xuICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBpbWFnZVRvVGV4dEh0dHAoaW1hZ2VCdWZmZXIsIHRoaXMuc2V0dGluZ3Mub2NyU2V0dGluZ3MpXG4gICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NUZBRVx1OEY2Rlx1NjNEMFx1NEY5Qlx1NzY4NG9jclx1NjcwRFx1NTJBMVxuICAgICAgICAvL2NvbnN0IHRleHQgPSBhd2FpdCBpbWFnZVRvVGV4dChpbWFnZUJ1ZmZlciwgXCJ0Y0k5NER4d2tTNXE3ZVg5UWpLc2p0V3NVTmd1NjBtOEJqcFRtblZjeDA0blFkYXU3UWRYSlFRSjk5QkJBQzNwS2FSWEozdzNBQUFGQUNPRzJSQzJcIilcbiAgICAgICAgaWYgKGxpbmUgPCAwKSB7XG4gICAgICAgICAgbGluZSA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lICsgMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBsaW5lLCBjaDogMH07XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7dGV4dH1cXG5gLG5leHRMaW5lUG9zKTtcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcihuZXh0TGluZVBvcyk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7ZnJvbToge2xpbmUsIGNoOiAwfSwgdG86IHtsaW5lOiBsaW5lICsgMjAsIGNoOiAwfX0pO1xuICAgICAgfVxuICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLmVycm9ySGFwcGVuICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcIik7XG4gICAgICB9LCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVJbWFnZXNUb1RleHRSZXF1ZXN0KG1kRmlsZTogVEZpbGUsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICAvLyBQYXJzZSBtZCBmaWxlLCBnZXQgYWxsIGltYWdlIGxpbmtzXG4gICAgY29uc3QgbWRDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChtZEZpbGUpO1xuICAgIGNvbnN0IGxpbmVzID0gbWRDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBpbWFnZVJlZ2V4ID0gLyFcXFtcXFsoLipcXC4oanBnfGpwZWd8cG5nfGJtcCkpXFxdXFxdLztcbiAgICBmb3IgKGxldCBpID0gbGluZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaChpbWFnZVJlZ2V4KTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGltYWdlUGF0aCA9IG1hdGNoWzFdO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBJbWFnZSBtYXRjaDogJHtpbWFnZVBhdGh9IGluIGxpbmUgJHtpfWApXG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVPY3JSZXF1ZXN0KGltYWdlUGF0aCwgZWRpdG9yLCBpICsgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVGV4dFRvU3BlZWNoUmVxdWVzdCh0ZXh0OiBzdHJpbmcsIG1kRmlsZTogVEZpbGUsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLnRleHRUb1NwZWVjaGluZyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZnVsbF9wYXRoLCByZWxfcGF0aCB9ID0gYXdhaXQgdGhpcy5nZXRBdWRpb0ZpbGVQYXRoKG1kRmlsZSwgdGhpcy5zZXR0aW5ncylcbiAgICAgIHRleHQgPSByZW1vdmVNYXJrZG93blRhZ3ModGV4dCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUudGltZSgndGV4dFRvU3BlZWNoJylcbiAgICAgIGxldCBhdWRpb19idWZmZXIgPSBhd2FpdCB0ZXh0VG9TcGVlY2hIdHRwKHRleHQsIHRoaXMuc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5LCB0aGlzLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnNwZWVjaFZvaWNlKVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZUJpbmFyeShyZWxfcGF0aCwgYXVkaW9fYnVmZmVyKVxuICAgICAgLy9hd2FpdCB0ZXh0VG9TcGVlY2godGV4dCwgZnVsbF9wYXRoLCB0aGlzLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnN1YnNjcmlwdGlvbktleSwgdGhpcy5zZXR0aW5ncy5zcGVlY2hTZXR0aW5ncy5zcGVlY2hWb2ljZSlcbiAgICAgIGNvbnNvbGUudGltZUVuZCgndGV4dFRvU3BlZWNoJylcbiAgICAgIGNvbnNvbGUubG9nKGBBdWRpbyBzYXZlZCB0byAke3JlbF9wYXRofWApO1xuICAgICAgXG4gICAgICBsZXQgbWRfdGV4dCA9IGBcXGBcXGBcXGBhdWRpby1wbGF5ZXJcXG4gW1ske3JlbF9wYXRofV1dXFxuXFxgXFxgXFxgXFxuYFxuICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBlZGl0b3IuZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgICBjb25zdCBuZXh0TGluZVBvcyA9IHtsaW5lOiBzdGFydE9mZnNldC5saW5lLCBjaDogMH07XG4gICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG1kX3RleHQsIG5leHRMaW5lUG9zKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy5lcnJvckhhcHBlbiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVHJhbnNsYXRlVGV4dFJlcXVlc3QodGV4dDogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGxldCB0cmFuc2xhdGVkVGV4dCA9IGF3YWl0IHRyYW5zbGF0ZVRleHQodGV4dCwgdGhpcy5zZXR0aW5ncy5zdHVTZXR0aW5ncy5sb2NhbExhbmd1YWdlLCB0aGlzLnNldHRpbmdzLm10U2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5KVxuICAgIGNvbnN0IGVuZE9mZnNldCA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgKCR7dHJhbnNsYXRlZFRleHR9KWAsIGVuZE9mZnNldCk7XG4gIH1cblxuICBhc3luYyBoYW5kbGVHZW5TaW1pbGFyVG9waWNSZXF1ZXN0KHRvcGljOiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlx1NjAxRFx1ODAwM1x1NEUyRC4uLlwiKTtcbiAgICB0cnkge1xuICAgICAgdmFyIHByb21wdCA9ICcnO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc3R1U2V0dGluZ3MubG9jYWxMYW5ndWFnZSA9PT0gJ3poLUhhbnMnKSB7XG4gICAgICAgIHByb21wdCA9IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUucmVwbGFjZSgne0dSQURFfScsIHRoaXMuc2V0dGluZ3Muc3R1U2V0dGluZ3MuZ3JhZGUpLnJlcGxhY2UoJ3tUT1BJQ30nLCB0b3BpYykucmVwbGFjZSgne0xBTkdVQUdFfScsICdcdTRFMkRcdTY1ODcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21wdCA9IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEVfRU4ucmVwbGFjZSgne0dSQURFfScsIHRoaXMuc2V0dGluZ3Muc3R1U2V0dGluZ3MuZ3JhZGUpLnJlcGxhY2UoJ3tUT1BJQ30nLCB0b3BpYykucmVwbGFjZSgne0xBTkdVQUdFfScsICdFbmdsaXNoJyk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kTExNUmVxdWVzdChwcm9tcHQsIHRoaXMuc2V0dGluZ3MubGxtU2V0dGluZ3MpO1xuICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICAgIGNvbnN0IG5leHRMaW5lUG9zID0ge2xpbmU6IGVuZE9mZnNldC5saW5lICsgMSwgY2g6IDB9O1xuICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgJHthZGRRdW90ZVRvVGV4dChyZXN1bHQsIHRoaXMudHJhbnMuc2ltaWxhclRvcGljcyl9XFxuXFxuYCwgbmV4dExpbmVQb3MpO1xuICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dCh0aGlzLnRyYW5zLmVycm9ySGFwcGVuICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoXCJcIik7XG4gICAgICB9LCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVHZW5MZWFybmluZ1BvaW50UmVxdWVzdCh0b3BpYzogc3RyaW5nLCBlZGl0b3I6IEVkaXRvcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXR1c0Jhckl0ZW0gPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy50aGlua2luZyk7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBwcm9tcHQgPSAnJztcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLnN0dVNldHRpbmdzLmxvY2FsTGFuZ3VhZ2UgPT09ICd6aC1IYW5zJykge1xuICAgICAgICBwcm9tcHQgPSBHRU5FUkFURV9MRUFSTklOR19QT0lOVFNfVEVNUExBVEUucmVwbGFjZSgne1RPUElDfScsIHRvcGljKS5yZXBsYWNlKCd7TEFOR1VBR0V9JywgJ1x1NEUyRFx1NjU4NycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbXB0ID0gR0VORVJBVEVfTEVBUk5JTkdfUE9JTlRTX1RFTVBMQVRFX0VOLnJlcGxhY2UoJ3tUT1BJQ30nLCB0b3BpYykucmVwbGFjZSgne0xBTkdVQUdFfScsICdFbmdsaXNoJyk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kTExNUmVxdWVzdChwcm9tcHQsIHRoaXMuc2V0dGluZ3MubGxtU2V0dGluZ3MpO1xuICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICAgIGNvbnN0IG5leHRMaW5lUG9zID0ge2xpbmU6IGVuZE9mZnNldC5saW5lICsgMSwgY2g6IDB9O1xuICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgJHthZGRRdW90ZVRvVGV4dChyZXN1bHQsIHRoaXMudHJhbnMubGVhcm5pbmdQb2ludHMpfVxcblxcbmAsIG5leHRMaW5lUG9zKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQodGhpcy50cmFucy5lcnJvckhhcHBlbiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KFwiXCIpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJFZGl0b3JNZW51KCk6IHZvaWQge1xuICAgIGlmICghUGxhdGZvcm0uaXNEZXNrdG9wKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGlvbjonLCBzZWxlY3Rpb24pO1xuICAgICAgICBjb25zdCBpbWFnZVJlZ2V4ID0gLyE/XFxbP1xcWz8oLipcXC4oanBnfGpwZWd8cG5nfGJtcCkpXFxdP1xcXT8vO1xuICAgICAgICBjb25zdCBtYXRjaCA9IHNlbGVjdGlvbi5tYXRjaChpbWFnZVJlZ2V4KTtcbiAgICAgICAgLyoqXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSh0aGlzLnRyYW5zLmltYWdlVG9UZXh0TWVudSlcbiAgICAgICAgICAgIC5zZXRJY29uKCdkb2N1bWVudCcpXG4gICAgICAgICAgICAub25DbGljayhhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGltYWdlRmlsZSA9IG1hdGNoWzFdXG4gICAgICAgICAgICAgIHRoaXMuaGFuZGxlT2NyUmVxdWVzdChpbWFnZUZpbGUsIGVkaXRvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAqL1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIEF1ZGlvXG4gICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy50cmFucy50ZXh0VG9TcGVlY2hNZW51KVxuICAgICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgICAub25DbGljayhhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRleHRUb1NwZWVjaFJlcXVlc3Qoc2VsZWN0aW9uLCB2aWV3LmZpbGUsIGVkaXRvcilcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIFRyYW5zbGF0ZVxuICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMudHJhbnMudHJhbnNsYXRlVGV4dE1lbnUpXG4gICAgICAgICAgICAgIC5zZXRJY29uKCdkb2N1bWVudCcpXG4gICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVHJhbnNsYXRlVGV4dFJlcXVlc3Qoc2VsZWN0aW9uLCBlZGl0b3IpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gXHU5ODk4XHU3NkVFXHU2MjY5XHU1QzU1XG4gICAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy50cmFucy5nZW5TaW1pbGFyVG9waWNzTWVudSlcbiAgICAgICAgICAgICAgLnNldEljb24oJ2RvY3VtZW50JylcbiAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVHZW5TaW1pbGFyVG9waWNSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIFx1NzdFNVx1OEJDNlx1NzBCOVx1NTIwNlx1Njc5MFxuICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMudHJhbnMuZ2VuTGVhcm5pbmdQb2ludHNNZW51KVxuICAgICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQnKVxuICAgICAgICAgICAgICAub25DbGljayhhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUdlbkxlYXJuaW5nUG9pbnRSZXF1ZXN0KHNlbGVjdGlvbiwgZWRpdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHJlZ2lzdGVyQ29tbWFuZCgpOiB2b2lkIHtcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICd0cmFuc2xhdGUnLFxuICAgICAgbmFtZTogdGhpcy50cmFucy50cmFuc2xhdGVUZXh0LFxuICAgICAgaWNvbjogXCJsYW5ndWFnZXNcIixcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb246Jywgc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUcmFuc2xhdGVUZXh0UmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICd0ZXh0X3RvX3NwZWVjaCcsXG4gICAgICBuYW1lOiB0aGlzLnRyYW5zLnRleHRUb1NwZWVjaCxcbiAgICAgIGljb246IFwiYWN0aXZpdHlcIixcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Rpb246Jywgc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUZXh0VG9TcGVlY2hSZXF1ZXN0KHNlbGVjdGlvbiwgdmlldy5maWxlLCBlZGl0b3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZ2VuX2xlYXJuaW5nX3BvaW50JyxcbiAgICAgIG5hbWU6IHRoaXMudHJhbnMuYW5hbHlzaXNBbmRTdW1tYXJpemUsXG4gICAgICBpY29uOiBcImJyYWluXCIsXG4gICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uOicsIHNlbGVjdGlvbik7XG4gICAgICAgIHRoaXMuaGFuZGxlR2VuU2ltaWxhclRvcGljUmVxdWVzdChzZWxlY3Rpb24sIGVkaXRvcik7XG4gICAgICAgIHRoaXMuaGFuZGxlR2VuTGVhcm5pbmdQb2ludFJlcXVlc3Qoc2VsZWN0aW9uLCBlZGl0b3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnaW1hZ2VfdG9fdGV4dCcsXG4gICAgICBuYW1lOiB0aGlzLnRyYW5zLmltYWdlVG9UZXh0LFxuICAgICAgaWNvbjogXCJ0eXBlXCIsXG4gICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zdCBpbWFnZVJlZ2V4ID0gLyE/XFxbP1xcWz8oLipcXC4oanBnfGpwZWd8cG5nfGJtcCkpXFxdP1xcXT8vO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBzZWxlY3Rpb24ubWF0Y2goaW1hZ2VSZWdleCk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGxldCBpbWFnZUZpbGUgPSBtYXRjaFsxXVxuICAgICAgICAgIHRoaXMuaGFuZGxlT2NyUmVxdWVzdChpbWFnZUZpbGUsIGVkaXRvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VzVG9UZXh0UmVxdWVzdCh2aWV3LmZpbGUsIGVkaXRvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRMaW5rZWRGaWxlKGxpbms6IHN0cmluZyk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGluaywgJycpO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZS5wYXRoKTtcbiAgfVxuXG4gIGFzeW5jIGdldEF1ZGlvRmlsZVBhdGgodGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU3R1ZGVudFJlcG9TZXR0aW5ncyk6IHtmdWxsX3BhdGg6IHN0cmluZzsgcmVsX3BhdGg6IHN0cmluZ30ge1xuICAgIC8vIENyZWF0ZSBvdXRwdXQgYXVkaW8gZGlyXG4gICAgY29uc3QgYXVkaW9fcGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGZpbGUucGFyZW50LnBhdGh9LyR7c2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3BlZWNoT3V0cHV0UGF0aH1gKVxuICAgIC8vY29uc29sZS5sb2coYGF1ZGlvX3BhdGg6ICR7YXVkaW9fcGF0aH1gKVxuICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoYXVkaW9fcGF0aCkpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoYXVkaW9fcGF0aClcbiAgICB9XG4gICAgLy8gR2V0IG91dHB1dCBtcDMgZmlsZSBwYXRoXG4gICAgdmFyIGF1ZGlvX2Z1bGxfcGF0aCA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZ2V0RnVsbFBhdGgoYXVkaW9fcGF0aClcbiAgICAvL2NvbnNvbGUubG9nKGBhdWRpb19mdWxsX3BhdGg6ICR7YXVkaW9fZnVsbF9wYXRofWApXG4gICAgdmFyIGZ1bGxfcGF0aCA9ICcnO1xuICAgIHZhciByZWxfcGF0aCA9ICcnO1xuICAgIHZhciBpID0gMDtcbiAgICBkbyB7XG4gICAgICB2YXIgb3V0cHV0X2ZuYW1lID0gJydcbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICBvdXRwdXRfZm5hbWUgPSBgJHt0ZmlsZS5iYXNlbmFtZX1fJHtpfS5tcDNgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0X2ZuYW1lID0gYCR7dGZpbGUuYmFzZW5hbWV9Lm1wM2A7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vY29uc29sZS5sb2coYG91dHB1dF9mbmFtZTogJHtvdXRwdXRfZm5hbWV9YClcblxuICAgICAgZnVsbF9wYXRoID0gbm9ybWFsaXplUGF0aChgJHthdWRpb19mdWxsX3BhdGh9LyR7b3V0cHV0X2ZuYW1lfWApO1xuICAgICAgLy9jb25zb2xlLmxvZyhgZnVsbF9wYXRoOiAke2Z1bGxfcGF0aH1gKVxuICAgICAgcmVsX3BhdGggPSBub3JtYWxpemVQYXRoKGAke2F1ZGlvX3BhdGh9LyR7b3V0cHV0X2ZuYW1lfWApO1xuICAgICAgLy9jb25zb2xlLmxvZyhgcmVsX3BhdGg6ICR7cmVsX3BhdGh9YClcbiAgICAgIGkrKztcbiAgICB9IHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhyZWxfcGF0aCkpO1xuICAgIFxuICAgIHJldHVybiB7ZnVsbF9wYXRoLCByZWxfcGF0aH07XG4gIH1cblxuXHRvbnVubG9hZCgpIHtcblx0fVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRmlsZU1hcmtkb3duKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gcGF0aC5lbmRzV2l0aCgnLm1kJylcbn1cblxuZnVuY3Rpb24gaXNGaWxlSW1hZ2UocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgcGF0aC5lbmRzV2l0aCgnLnBuZycpIHx8IHBhdGguZW5kc1dpdGgoJy5qcGcnKSB8fCBwYXRoLmVuZHNXaXRoKCcuanBlZycpIHx8XG4gICAgcGF0aC5lbmRzV2l0aCgnLndlYnAnKSB8fCBwYXRoLmVuZHNXaXRoKCcuZ2lmJykgfHwgcGF0aC5lbmRzV2l0aCgnLmJtcCcpXG4gIClcbn1cblxuZnVuY3Rpb24gaXNJbWFnZUZpbGVzKGZpbGVzOiBURmlsZVtdKTogYm9vbGVhbiB7XG4gIHZhciBqOmFueVxuICBmb3IgKGogaW4gZmlsZXMpIHtcbiAgICB2YXIgZl9wYXRoID0gZmlsZXNbal0ucGF0aFxuICAgIGlmICghaXNGaWxlSW1hZ2UoZl9wYXRoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5vdGUobmFtZTogc3RyaW5nLCBjb250ZW50cyA9ICcnKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgbGV0IHBhdGhQcmVmaXg6IHN0cmluZ1xuICAgIHN3aXRjaCAoYXBwLnZhdWx0LmdldENvbmZpZygnbmV3RmlsZUxvY2F0aW9uJykpIHtcbiAgICAgIGNhc2UgJ2N1cnJlbnQnOlxuICAgICAgICBwYXRoUHJlZml4ID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk/LnBhcmVudD8ucGF0aCA/PyAnJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZm9sZGVyJzpcbiAgICAgICAgcGF0aFByZWZpeCA9IGFwcC52YXVsdC5nZXRDb25maWcoJ25ld0ZpbGVGb2xkZXJQYXRoJykgYXMgc3RyaW5nXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OiAvLyAncm9vdCdcbiAgICAgICAgcGF0aFByZWZpeCA9ICcnXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIFxuICAgIGlmIChwYXRoUHJlZml4KSB7XG4gICAgICBwYXRoUHJlZml4ICs9ICcvJ1xuICAgIH1cbiAgICBsZXQgcGF0aCA9IGAke3BhdGhQcmVmaXh9JHtuYW1lfWBcbiAgICBjb25zb2xlLmxvZyhgcGF0aFByZWZpeDogJHtwYXRoUHJlZml4fSwgbmFtZTogJHtuYW1lfWApXG4gICAgLy8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICAgIGlmIChhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke3BhdGh9Lm1kYCkpIHtcbiAgICAgIC8vIEFwcGVuZCBhIG51bWJlciB0byB0aGUgZW5kIG9mIHRoZSBmaWxlIG5hbWVcbiAgICAgIGxldCBpID0gMVxuICAgICAgd2hpbGUgKGF3YWl0IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7cGF0aH0gJHtpfS5tZGApKSB7XG4gICAgICAgIGkrK1xuICAgICAgfVxuICAgICAgcGF0aCArPSBgICR7aX1gXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBvcGVuIHRoZSBmaWxlXG4gICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShgJHtwYXRofS5tZGAsIGNvbnRlbnRzKVxuICAgIGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHBhdGgsICcnKVxuICB9IGNhdGNoIChlKSB7XG4gICAgbmV3IE5vdGljZSgnVGV4dCBFeHRyYWN0IC0gQ291bGQgbm90IGNyZWF0ZSBub3RlOiAnICsgKGUgYXMgYW55KS5tZXNzYWdlKVxuICAgIHRocm93IGVcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVJbWFnZXNOb3RlKGZpbGVzOiBURmlsZVtdKSB7XG4gIHZhciBqOmFueVxuICB2YXIgZmlsZV9wYXRoczpzdHJpbmdbXSA9IG5ldyBBcnJheShmaWxlcy5sZW5ndGgpXG4gIGZvciAoaiBpbiBmaWxlcykge1xuICAgIGNvbnNvbGUubG9nKGBwcGF0aDogJHtmaWxlc1tqXS5wYXJlbnQucGF0aH0sIHBuYW1lOiAke2ZpbGVzW2pdLnBhcmVudC5uYW1lfWApXG4gICAgZmlsZV9wYXRoc1tqXSA9IGZpbGVzW2pdLnBhdGhcbiAgfVxuICBmaWxlX3BhdGhzLnNvcnQoKVxuICB2YXIgY29udGVudHM6c3RyaW5nID0gJydcbiAgZm9yIChqIGluIGZpbGVfcGF0aHMpIHtcbiAgICBjb25zb2xlLmxvZyhmaWxlX3BhdGhzW2pdKVxuICAgIGNvbnRlbnRzICs9IGAhW1ske2ZpbGVfcGF0aHNbal19XV1cXG5gXG4gIH1cbiAgY29uc29sZS5sb2coY29udGVudHMpXG4gIC8vIENyZWF0ZSBhIG5ldyBub3RlIGFuZCBvcGVuIGl0XG4gIGF3YWl0IGNyZWF0ZU5vdGUoXCJVbnRpdGxlZFwiLCBjb250ZW50cylcbn1cblxuZnVuY3Rpb24gYWRkUXVvdGVUb1RleHQodGV4dDogc3RyaW5nLCBub3RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYFxcbj4gWyFOT1RFXSAke25vdGV9XFxuYCArIHRleHQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGA+ICR7bGluZX1gKS5qb2luKCdcXG4nKVxufVxuXG5mdW5jdGlvbiByZW1vdmVNYXJrZG93blRhZ3ModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gXHU1M0JCXHU5NjY0XHU2ODA3XHU5ODk4XHU2ODA3XHU4QkIwXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL14oIyspXFxzL2dtLCAnJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1NTJBMFx1N0M5N1x1MzAwMVx1NjU5Q1x1NEY1M1x1N0I0OVx1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oXFwqXFwqfF9ffF98XFwqKS9nLCAnJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1NTIxN1x1ODg2OFx1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eKFstKitdXFxzfFxcZCtcXC5cXHMpL2dtLCAnJyk7XG4gIC8vIFx1NTNCQlx1OTY2NFx1NEVFM1x1NzgwMVx1NTc1N1x1NjgwN1x1OEJCMFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9gYGBbXFxzXFxTXSo/YGBgL2csICcnKTtcbiAgLy8gXHU1M0JCXHU5NjY0XHU4ODRDXHU1MTg1XHU0RUUzXHU3ODAxXHU2ODA3XHU4QkIwXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL2AoW15gXSopYC9nLCAnJDEnKTtcbiAgLy8gXHU1M0JCXHU5NjY0XHU5NEZFXHU2M0E1XHU1NDhDXHU1NkZFXHU3MjQ3XHU2ODA3XHU4QkIwXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyE/XFxbW15cXF1dKlxcXVxcKFteKV0qXFwpL2csICcnKTtcbiAgLy8gXHU1M0JCXHU5NjY0XHU2QzM0XHU1RTczXHU3RUJGXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL14tLS0rJC9nbSwgJycpO1xuICAvLyBcdTUzQkJcdTk2NjQgSFRNTCBcdTY4MDdcdTdCN0VcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPFtePl0qPi9nLCAnJyk7XG4gIHJldHVybiB0ZXh0O1xufSIsICJpbXBvcnQgU3R1ZGVudFJlcG9QbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZGVudFNldHRpbmdzIHtcbiAgZ3JhZGU6IHN0cmluZztcbiAgbG9jYWxMYW5ndWFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjY2Vzc1Rva2VuIHtcbiAgdG9rZW46IHN0cmluZ1xuXHRleHA6IG51bWJlclxufVxuZXhwb3J0IGludGVyZmFjZSBPY3JTZXR0aW5ncyB7XG4gIGFwcElEOiBzdHJpbmc7XG4gIGFwaUtleTogc3RyaW5nO1xuICBhcGlTZWNyZXQ6IHN0cmluZztcbiAgYWNjZXNzVG9rZW46IEFjY2Vzc1Rva2VuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExMTVNldHRpbmdzIHtcbiAgYXBpQmFzZTogc3RyaW5nO1xuICBhcGlLZXk6IHN0cmluZztcbiAgbW9kZWxOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNsYXRpb25TZXR0aW5ncyB7XG4gIHN1YnNjcmlwdGlvbktleTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwZWVjaFNldHRpbmdzIHtcbiAgc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmc7XG4gIHNwZWVjaFZvaWNlOiBzdHJpbmdcbiAgc3BlZWNoTGFuZ3VhZ2U6IHN0cmluZyxcbiAgc3BlZWNoT3V0cHV0UGF0aDogc3RyaW5nLFxufVxuZXhwb3J0IGludGVyZmFjZSBTdHVkZW50UmVwb1NldHRpbmdzIHtcbiAgc3R1U2V0dGluZ3M6IFN0dWRlbnRTZXR0aW5ncztcbiAgc3BlZWNoU2V0dGluZ3M6IFNwZWVjaFNldHRpbmdzO1xuICBvY3JTZXR0aW5nczogT2NyU2V0dGluZ3M7XG4gIGxsbVNldHRpbmdzOiBMTE1TZXR0aW5ncztcbiAgbXRTZXR0aW5nczogVHJhbnNsYXRpb25TZXR0aW5ncztcbn1cblxuXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTdHVkZW50UmVwb1NldHRpbmdzID0ge1xuICBzdHVTZXR0aW5nczoge1xuICAgIGdyYWRlOiAnXHU1QzBGXHU1QjY2XHU1NkRCXHU1RTc0XHU3RUE3JyxcbiAgICBsb2NhbExhbmd1YWdlOiAnemgtSGFucycsXG4gIH0sXG4gIHNwZWVjaFNldHRpbmdzOiB7XG4gICAgc3Vic2NyaXB0aW9uS2V5OiAnJyxcbiAgICBzcGVlY2hMYW5ndWFnZTogJ2VuJyxcbiAgICBzcGVlY2hWb2ljZTogJ2VuLUdCLVNvbmlhTmV1cmFsJyxcbiAgICBzcGVlY2hPdXRwdXRQYXRoOiAnX2F1ZGlvcycsXG4gIH0sXG4gIG9jclNldHRpbmdzOiB7XG4gICAgYXBwSUQ6ICcnLFxuICAgIGFwaUtleTogJycsXG4gICAgYXBpU2VjcmV0OiAnJyxcbiAgICBhY2Nlc3NUb2tlbjoge1xuICAgICAgdG9rZW46ICcnLFxuICAgICAgZXhwOiAwXG4gICAgfSxcbiAgfSxcbiAgbGxtU2V0dGluZ3M6IHtcbiAgICBhcGlCYXNlOiAnJyxcbiAgICBhcGlLZXk6ICcnLFxuICAgIG1vZGVsTmFtZTogJydcbiAgfSxcbiAgbXRTZXR0aW5nczoge1xuICAgIHN1YnNjcmlwdGlvbktleTogJydcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3R1ZGVudFJlcG9TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogU3R1ZGVudFJlcG9QbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU3R1ZGVudFJlcG9QbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGxldCB7Y29udGFpbmVyRWx9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywge3RleHQ6IHRoaXMucGx1Z2luLnRyYW5zLnBsdWdpbk5hbWV9KTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKHRoaXMucGx1Z2luLnRyYW5zLnN0dWRlbnRHcmFkZSlcbiAgICAgIC5zZXREZXNjKHRoaXMucGx1Z2luLnRyYW5zLnN0dWRlbnRHcmFkZSlcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1x1NUMwRlx1NUI2Nlx1NTZEQlx1NUU3NFx1N0VBNycpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdHVTZXR0aW5ncy5ncmFkZSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN0dVNldHRpbmdzLmdyYWRlID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSh0aGlzLnBsdWdpbi50cmFucy5sb2NhbExhbmd1YWdlKVxuICAgIC5zZXREZXNjKHRoaXMucGx1Z2luLnRyYW5zLmxvY2FsTGFuZ3VhZ2UpXG4gICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdlbicsICdFbmdsaXNoJyk7XG4gICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3poLUhhbnMnLCAnXHU2NjZFXHU5MDFBXHU4QkREJyk7XG4gICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdHVTZXR0aW5ncy5sb2NhbExhbmd1YWdlKTtcbiAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdHVTZXR0aW5ncy5sb2NhbExhbmd1YWdlID0gb3B0aW9uO1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6IHRoaXMucGx1Z2luLnRyYW5zLmxsbVNldHRpbmd9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBUEkgVVJMJylcbiAgICAgIC5zZXREZXNjKGAke3RoaXMucGx1Z2luLnRyYW5zLmxsbVByb3ZpZGVyfSBMTE0gQVBJIFVSTGApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL2Rhc2hzY29wZS5hbGl5dW5jcy5jb20vY29tcGF0aWJsZS1tb2RlL3YxL2NoYXQvY29tcGxldGlvbnMnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtU2V0dGluZ3MuYXBpQmFzZSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbVNldHRpbmdzLmFwaUJhc2UgPSB2YWx1ZTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSkpO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoYCR7dGhpcy5wbHVnaW4udHJhbnMubGxtUHJvdmlkZXJ9IExMTSBBUEkgS2V5YClcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3NrLSoqKicpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1TZXR0aW5ncy5hcGlLZXkpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1TZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSkpO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ01vZGVsIE5hbWUnKVxuICAgICAgLnNldERlc2MoYCR7dGhpcy5wbHVnaW4udHJhbnMubGxtUHJvdmlkZXJ9IExMTSBNb2RlbCBOYW1lYClcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3F3ZW4tdHVyYm8nKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtU2V0dGluZ3MubW9kZWxOYW1lKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGxtU2V0dGluZ3MubW9kZWxOYW1lID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogdGhpcy5wbHVnaW4udHJhbnMuaW1hZ2VUb1RleHR9KTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBUFAgSUQnKVxuICAgICAgLnNldERlc2MoYCR7dGhpcy5wbHVnaW4udHJhbnMub2NyUHJvdmlkZXJ9IEFQUCBJRGApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUFAgSUQnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBwSUQpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vY3JTZXR0aW5ncy5hcHBJRCA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAuc2V0RGVzYyhgJHt0aGlzLnBsdWdpbi50cmFucy5vY3JQcm92aWRlcn0gQVBJIEtleWApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUEkgS2V5JylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaUtleSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIFNlY3JldCcpXG4gICAgICAuc2V0RGVzYyhgJHt0aGlzLnBsdWdpbi50cmFucy5vY3JQcm92aWRlcn0gQVBJIFNlY3JldGApXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTRGNjBcdTc1MzNcdThCRjdcdTUyMzBcdTc2ODRBUEkgU2VjcmV0JylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaVNlY3JldClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9jclNldHRpbmdzLmFwaVNlY3JldCA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSk7XG4gICAgLyoqXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTk3RjNcdTk4OTFcdTU0MDhcdTYyMTAnfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnXHU5N0YzXHU5ODkxXHU4QkVEXHU4QTAwJylcbiAgICAgIC5zZXREZXNjKCdcdTc1MUZcdTYyMTBcdTk3RjNcdTk4OTFcdTc2ODRcdThCRURcdThBMDAnKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2VuJywgJ1x1ODJGMVx1OEJFRCcpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3poLWNuJywgJ1x1NjY2RVx1OTAxQVx1OEJERCcpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hMYW5ndWFnZSk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaExhbmd1YWdlID0gb3B0aW9uO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnXHU5N0YzXHU5ODkxXHU0RkREXHU1QjU4XHU3NkVFXHU1RjU1JylcbiAgICAgIC5zZXREZXNjKCdcdTk3RjNcdTk4OTFcdTVCNThcdTY1M0VcdTRGNERcdTdGNkUnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignX2F1ZGlvJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaE91dHB1dFBhdGgpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hPdXRwdXRQYXRoID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICAqL1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hTZXR0aW5nfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSh0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hTdWJzY3JpcHRpb25LZXkpXG4gICAgICAuc2V0RGVzYygnTWljcm9zb2Z0IEF6dXJlIFNwZWVjaCBTdWJzY3JpcHRpb24gS2V5JylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdXIgQXp1cmUgU3BlZWNoIFN1YnNjcmlwdGlvbiBLZXknKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BlZWNoU2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5ID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKHRoaXMucGx1Z2luLnRyYW5zLnNwZWVjaFZvaWNlVHlwZSlcbiAgICAgIC5zZXREZXNjKCdTcGVlY2ggVm9pY2UgVHlwZScpXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZW4tR0ItU29uaWFOZXVyYWwnLCB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hWb2ljZUdCKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdlbi1VUy1BbWFuZGFNdWx0aWxpbmd1YWxOZXVyYWwnLCB0aGlzLnBsdWdpbi50cmFucy5zcGVlY2hWb2ljZVVTKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCd6aC1DTi1YaWFveGlhb05ldXJhbCcsIHRoaXMucGx1Z2luLnRyYW5zLnNwZWVjaFZvaWNlQ04pO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGVlY2hTZXR0aW5ncy5zcGVlY2hWb2ljZSk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNwZWVjaFNldHRpbmdzLnNwZWVjaFZvaWNlID0gb3B0aW9uO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUodGhpcy5wbHVnaW4udHJhbnMubXRTdWJzY3JpcHRpb25LZXkpXG4gICAgLnNldERlc2MoJ01pY3Jvc29mdCBBenVyZSBUcmFuc2xhdG9yIFN1YnNjcmlwdGlvbiBLZXknKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3VyIEF6dXJlIFRyYW5zbGF0b3IgU3Vic2NyaXB0aW9uIEtleScpXG4gICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXRTZXR0aW5ncy5zdWJzY3JpcHRpb25LZXkpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm10U2V0dGluZ3Muc3Vic2NyaXB0aW9uS2V5ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuICB9O1xufSIsICJpbXBvcnQgeyByZXF1ZXN0VXJsLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5jb25zdCBzZXJ2aWNlUmVnaW9uID0gXCJlYXN0YXNpYVwiO1xuXG4vLyBcdTkxNERcdTdGNkUgQXp1cmUgXHU4QkVEXHU5N0YzXHU2NzBEXHU1MkExXG5jb25zdCBzcGVlY2hTdWJzY3JpcHRpb25LZXkgPSBcIkVXMXpBM21iU2pqMWk3cWZrcFVONkhYYVN0Y3VVYVhuR2xnREVGSkNGbllRbGNYTHphNnRKUVFKOTlCQkFDM3BLYVJYSjN3M0FBQVlBQ09HcFgwS1wiO1xuY29uc3Qgc3BlZWNoQXBpVXJsID0gYGh0dHBzOi8vJHtzZXJ2aWNlUmVnaW9ufS50dHMuc3BlZWNoLm1pY3Jvc29mdC5jb20vY29nbml0aXZlc2VydmljZXMvdjFgO1xuXG4vL1x1OTE0RFx1N0Y2RSBBenVyZSBcdTdGRkJcdThCRDFcdTY3MERcdTUyQTFcbmNvbnN0IG10U3Vic2NyaXB0aW9uS2V5ID0gXCJDNnczeWRKZ1o1OEh6bUtZQ0tiNHo1RFNvUkN1OUp0T2xmUjhtWTdRMGV5YmNka0xuRjZCSlFRSjk5QkJBQzNwS2FSWEozdzNBQUFiQUNPR1B1c1JcIjtcbmNvbnN0IG10RW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLmNvZ25pdGl2ZS5taWNyb3NvZnR0cmFuc2xhdG9yLmNvbS9cIjtcblxuLy8gXHU5MTREXHU3RjZFIEF6dXJlIFx1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlx1NjcwRFx1NTJBMVxuY29uc3QgdmlzaW9uU3Vic2NyaXB0aW9uS2V5ID0gXCJ0Y0k5NER4d2tTNXE3ZVg5UWpLc2p0V3NVTmd1NjBtOEJqcFRtblZjeDA0blFkYXU3UWRYSlFRSjk5QkJBQzNwS2FSWEozdzNBQUFGQUNPRzJSQzJcIjtcbi8vY29uc3QgdmlzaW9uRW5kcG9pbnQgPSBcImh0dHBzOi8vZWFzdGFzaWEuYXBpLmNvZ25pdGl2ZS5taWNyb3NvZnQuY29tXCI7XG5jb25zdCB2aXNpb25BcGlVcmwgPSBgaHR0cHM6Ly8ke3NlcnZpY2VSZWdpb259LmFwaS5jb2duaXRpdmUubWljcm9zb2Z0LmNvbS92aXNpb24vdjMuMi9vY3JgO1xuXG4vLyBcdTU2RkVcdTcyNDdcdThGNkNcdTY1ODdcdTVCNTdcdTUxRkRcdTY1NzBcbi8vIFx1NEUyRFx1NjU4N1x1OEJDNlx1NTIyQlx1NEUwRFx1NTk3RFx1RkYwQ1x1NzZFRVx1NTI0RFx1NjUzRVx1NUYwM1x1NEY3Rlx1NzUyOFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltYWdlVG9UZXh0KGltYWdlQnVmZmVyOiBBcnJheUJ1ZmZlciwgc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBoZWFkZXJzID0ge1xuICAgICdPY3AtQXBpbS1TdWJzY3JpcHRpb24tS2V5Jzogc3Vic2NyaXB0aW9uS2V5LFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJ1xuICB9O1xuICBjb25zdCByZXF1ZXN0UGFyYW0gPSB7XG4gICAgdXJsOiB2aXNpb25BcGlVcmwsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogaGVhZGVycyxcbiAgICBib2R5OiBpbWFnZUJ1ZmZlcixcbiAgfTtcbiAgLy9jb25zb2xlLmxvZyhyZXF1ZXN0UGFyYW0pO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChyZXF1ZXN0UGFyYW0pO1xuXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7XG4gICAgY29uc29sZS5lcnJvcignSW1hZ2UgdG8gdGV4dCBlcnJvcicsIHJlc3BvbnNlKVxuICAgIG5ldyBOb3RpY2UoYEltYWdlIHRvIHRleHQgZXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICBjb25zdCByZXN1bHQgPSByZXNwb25zZS5qc29uO1xuICAvLyBcdTYzRDBcdTUzRDZcdThCQzZcdTUyMkJcdTUyMzBcdTc2ODRcdTY1ODdcdTVCNTdcbiAgbGV0IHRvdGFsX3RleHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQucmVnaW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJlZ2lvbiA9IHJlc3VsdC5yZWdpb25zW2ldO1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCByZWdpb24ubGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSByZWdpb24ubGluZXNbal07XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IGxpbmUud29yZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgY29uc3Qgd29yZCA9IGxpbmUud29yZHNba107XG4gICAgICAgIHRleHQgKz0gd29yZC50ZXh0ICsgJyAnO1xuICAgICAgfVxuICAgICAgdGV4dCArPSAnXFxuJztcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ1x1NTZGRVx1NzI0N1x1OEY2Q1x1NjU4N1x1NUI1N1x1N0VEM1x1Njc5QzonLCB0ZXh0KTtcbiAgICB0b3RhbF90ZXh0ICs9IHRleHQ7XG4gIH1cbiAgcmV0dXJuIHRvdGFsX3RleHQ7XG59XG5cbi8vIFx1NjU4N1x1NjcyQ1x1OEY2Q1x1OEJFRFx1OTdGM1x1NTFGRFx1NjU3MFxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGV4dFRvU3BlZWNoSHR0cCh0ZXh0OiBzdHJpbmcsIHN1YnNjcmlwdGlvbktleTogc3RyaW5nLCBzcGVlY2hWb2ljZTogc3RyaW5nKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAvLyBcbiAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAnT2NwLUFwaW0tU3Vic2NyaXB0aW9uLUtleSc6IHN1YnNjcmlwdGlvbktleSxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3NzbWwreG1sJyxcbiAgICAnWC1NaWNyb3NvZnQtT3V0cHV0Rm9ybWF0JzogJ2F1ZGlvLTE2a2h6LTMya2JpdHJhdGUtbW9uby1tcDMnLFxuICAgICdVc2VyLUFnZW50JzogJ015U0RLLzEuMCdcbiAgfTtcbiAgXG4gIGNvbnN0IGJvZHkgPSBgXG4gIDxzcGVhayB2ZXJzaW9uPScxLjAnIHhtbDpsYW5nPSdlbi1VUyc+XG4gICAgICA8dm9pY2UgeG1sOmxhbmc9J2VuLVVTJyB4bWw6Z2VuZGVyPSdGZW1hbGUnIG5hbWU9JyR7c3BlZWNoVm9pY2V9Jz5cbiAgICAgICAgICAke3RleHR9XG4gICAgICA8L3ZvaWNlPlxuICA8L3NwZWFrPlxuICBgO1xuICAvLyBcdTY3ODRcdTVFRkFcdThCRjdcdTZDNDJcdTRGNTNcbiAgY29uc3QgcmVxdWVzdFBhcmFtID0ge1xuICAgICAgdXJsOiBzcGVlY2hBcGlVcmwsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICBib2R5OiBib2R5LFxuICB9O1xuICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3RQYXJhbSk7XG5cbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPSAyMDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RleHQgdG8gc3BlZWNoIGVycm9yJywgcmVzcG9uc2UpXG4gICAgICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO1xuICB9XG4gIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAvLyBcdThGRDRcdTU2REVcdTk3RjNcdTk4OTFcdTY1NzBcdTYzNkVcbiAgcmV0dXJuIHJlc3BvbnNlLmFycmF5QnVmZmVyO1xufVxuXG4vLyBcdTdGRkJcdThCRDFcdTUxRkRcdTY1NzBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2xhdGVUZXh0KHRleHQ6IHN0cmluZywgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZywgc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgICAgY29uc3QgYXBpVXJsID0gYCR7bXRFbmRwb2ludH0vdHJhbnNsYXRlP2FwaS12ZXJzaW9uPTMuMCZ0bz0ke3RhcmdldExhbmd1YWdlfWA7XG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICdPY3AtQXBpbS1TdWJzY3JpcHRpb24tS2V5Jzogc3Vic2NyaXB0aW9uS2V5LFxuICAgICAgICAgICdPY3AtQXBpbS1TdWJzY3JpcHRpb24tUmVnaW9uJzogc2VydmljZVJlZ2lvbixcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9O1xuICAgICAgY29uc3QgYm9keSA9IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAgICd0ZXh0JzogdGV4dFxuICAgICAgICAgIH1cbiAgICAgIF07XG4gICAgICBjb25zdCByZXF1ZXN0UGFyYW0gPSB7XG4gICAgICAgIHVybDogYXBpVXJsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICB9O1xuICAgICAgLy9jb25zb2xlLmxvZyhyZXF1ZXN0UGFyYW0pO1xuICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3RQYXJhbSk7XG4gICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZW5kIGxsbSByZXF1ZXN0IGVycm9yJywgcmVzcG9uc2UpXG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuanNvbjtcblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFswXS50cmFuc2xhdGlvbnNbMF0udGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTY3MkFcdTgzQjdcdTUzRDZcdTUyMzBcdTY3MDlcdTY1NDhcdTc2ODRcdTdGRkJcdThCRDFcdTdFRDNcdTY3OUMnKTtcbiAgICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1N0ZGQlx1OEJEMVx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIiwgImltcG9ydCB7IHJlcXVlc3RVcmwsIE5vdGljZSwgYXJyYXlCdWZmZXJUb0Jhc2U2NCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFjY2Vzc1Rva2VuLCBPY3JTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnXG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKGFwaUtleTogc3RyaW5nLCBhcGlTZWNyZXQ6IHN0cmluZyk6IFByb21pc2U8QWNjZXNzVG9rZW4+IHtcblx0aWYgKCFhcGlLZXkgfHwgIWFwaVNlY3JldCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFQSSBrZXkgc2VjcmV0JylcblxuXHRjb25zdCB1cmwgPSBgaHR0cHM6Ly9haXAuYmFpZHViY2UuY29tL29hdXRoLzIuMC90b2tlbj9ncmFudF90eXBlPWNsaWVudF9jcmVkZW50aWFscyZjbGllbnRfaWQ9JHthcGlLZXl9JmNsaWVudF9zZWNyZXQ9JHthcGlTZWNyZXR9YFxuXG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9O1xuICBcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICB1cmw6IHVybCxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICB9KTtcblxuICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2NyZWF0ZSB0b2tlbiBlcnJvcicsIHJlc3BvbnNlKVxuICAgIHJldHVybiB7fSBhcyBBY2Nlc3NUb2tlbjtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuXHRjb25zdCB0b2tlbiA9IGRhdGEuYWNjZXNzX3Rva2VuXG5cdGNvbnN0IG5vdyA9IERhdGUubm93KClcblx0Y29uc3QgZXhwID0gbm93ICsgZGF0YS5leHBpcmVzX2luXG5cdHJldHVybiB7XG5cdFx0dG9rZW4sXG5cdFx0ZXhwXG5cdH0gYXMgQWNjZXNzVG9rZW5cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrQWNjZXNzVG9rZW4ob2NyU2V0dGluZ3M6IE9jclNldHRpbmdzKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KClcblx0aWYgKFxuICAgIG9jclNldHRpbmdzLmFjY2Vzc1Rva2VuICYmXG5cdFx0b2NyU2V0dGluZ3MuYWNjZXNzVG9rZW4udG9rZW4gJiZcblx0XHRvY3JTZXR0aW5ncy5hY2Nlc3NUb2tlbi5leHAgPiBub3cgKyAzICogNjAgKiAxMDAwXG5cdCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGNyZWF0ZVRva2VuKG9jclNldHRpbmdzLmFwaUtleSwgb2NyU2V0dGluZ3MuYXBpU2VjcmV0KVxuICBjb25zb2xlLmxvZygnY3JlYXRlIG5ldyB0b2tlbicsIG5ld1Rva2VuKTtcbiAgb2NyU2V0dGluZ3MuYWNjZXNzVG9rZW4gPSBuZXdUb2tlbjtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbWFnZVRvVGV4dEh0dHAoaW1hZ2VCdWZmZXI6IEFycmF5QnVmZmVyLCBvY3JTZXR0aW5nczogT2NyU2V0dGluZ3MpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9haXAuYmFpZHViY2UuY29tL3Jlc3QvMi4wL29jci92MS9hY2N1cmF0ZV9iYXNpYz9hY2Nlc3NfdG9rZW49JHtvY3JTZXR0aW5ncy5hY2Nlc3NUb2tlbi50b2tlbn1gXG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICB9O1xuXG4gIGNvbnN0IGltYWdlX2Jhc2U2NCA9IGFycmF5QnVmZmVyVG9CYXNlNjQoaW1hZ2VCdWZmZXIpO1xuICBjb25zdCBib2R5ID0gYGltYWdlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGltYWdlX2Jhc2U2NCl9JnBhcmFncmFwaD10cnVlYDtcblxuICBjb25zdCByZXF1ZXN0UGFyYW0gPSB7XG4gICAgdXJsOiB1cmwsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogaGVhZGVycyxcbiAgICBib2R5OiBib2R5LFxuICB9O1xuICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChyZXF1ZXN0UGFyYW0pO1xuXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7XG4gICAgY29uc29sZS5lcnJvcignSW1hZ2UgdG8gdGV4dCBlcnJvcicsIHJlc3BvbnNlKVxuICAgIG5ldyBOb3RpY2UoYEltYWdlIHRvIHRleHQgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIHJldHVybiAnJztcbiAgfVxuICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICBjb25zdCByZXN1bHQgPSByZXNwb25zZS5qc29uO1xuICAvLyBcdTYzRDBcdTUzRDZcdThCQzZcdTUyMkJcdTdFRDNcdTY3OUNcdTRFMkRcdTc2ODRcdTY1ODdcdTVCNTdcbiAgbGV0IHRleHQgPSAnJztcbiAgaWYgKHJlc3VsdC5wYXJhZ3JhcGhzX3Jlc3VsdCkge1xuICAgIHJlc3VsdC5wYXJhZ3JhcGhzX3Jlc3VsdC5mb3JFYWNoKChpdGVtOiB7IHdvcmRzX3Jlc3VsdF9pZHg6IG51bWJlcltdIH0pID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS53b3Jkc19yZXN1bHRfaWR4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRleHQgKz0gcmVzdWx0LndvcmRzX3Jlc3VsdFtpdGVtLndvcmRzX3Jlc3VsdF9pZHhbaV1dLndvcmRzICsgJyAnO1xuICAgICAgfVxuICAgICAgdGV4dCArPSAnXFxuJztcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZygnXHU1NkZFXHU3MjQ3XHU4RjZDXHU2NTg3XHU1QjU3XHU2QkI1XHU4NDNEXHU3RUQzXHU2NzlDOicsIHRleHQpO1xuICByZXR1cm4gdGV4dDtcbn1cblxuLyoqXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGV4dFRvU3BlZWNoKHRleHQ6IHN0cmluZywgdGZpbGU6IFRBYnN0cmFjdEZpbGUsIHNldHRpbmdzOiBTdHVkZW50UmVwb1NldHRpbmdzKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICBjb25zdCBQYXRoTGliID0gcmVxdWlyZSgncGF0aCcpXG4gIGNvbnN0IEFpcFNwZWVjaCA9IHJlcXVpcmUoJ2JhaWR1LWFpcC1zZGsnKS5zcGVlY2g7XG4gIFxuICAvLyBHZW5lcmF0ZSBUVFMgYXVkaW9cbiAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBQWlwU3BlZWNoXHU3Njg0XHU1QjlFXHU0RjhCXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBaXBTcGVlY2goc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBwSUQsIHNldHRpbmdzLm9jclNldHRpbmdzLmFwaUtleSwgc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBpU2VjcmV0KTtcbiAgLy8gXHU4QzAzXHU3NTI4dGV4dDJhdWRpb1x1NjVCOVx1NkNENVx1OEZEQlx1ODg0Q1x1NjU4N1x1NjcyQ1x1OEY2Q1x1OEJFRFx1OTdGM1x1NzY4NFx1NTQwOFx1NjIxMFxuICAvLyBcdTUzQzJcdTY1NzBcdTUzMDVcdTYyRUNcdUZGMUFcdTg5ODFcdTU0MDhcdTYyMTBcdTc2ODRcdTY1ODdcdTY3MkNcdTMwMDFcdTU0MDhcdTYyMTBcdTdFRDNcdTY3OUNcdTc2ODRcdTY4M0NcdTVGMEZcdUZGMDhcdTUzRUZcdTkwMDlcdUZGMENcdTlFRDhcdThCQTRcdTY2MkZtcDNcdUZGMDlcdTMwMDFcdTU0MDhcdTYyMTBcdThCRURcdTk3RjNcdTc2ODRcdThCRURcdTkwMUZcdUZGMDhcdTUzRUZcdTkwMDlcdUZGMENcdTUzRDZcdTUwM0NcdTgzMDNcdTU2RjRcdTY2MkYwLTlcdUZGMENcdTlFRDhcdThCQTRcdTY2MkY1XHVGRjA5XHUzMDAxXHU1NDA4XHU2MjEwXHU4QkVEXHU5N0YzXHU3Njg0XHU5N0YzXHU4QzAzXHVGRjA4XHU1M0VGXHU5MDA5XHVGRjBDXHU1M0Q2XHU1MDNDXHU4MzAzXHU1NkY0XHU2NjJGMC05XHVGRjBDXHU5RUQ4XHU4QkE0XHU2NjJGNVx1RkYwOVx1MzAwMVx1NTQwOFx1NjIxMFx1OEJFRFx1OTdGM1x1NzY4NFx1OTdGM1x1OTFDRlx1RkYwOFx1NTNFRlx1OTAwOVx1RkYwQ1x1NTNENlx1NTAzQ1x1ODMwM1x1NTZGNFx1NjYyRjAtOVx1RkYwQ1x1OUVEOFx1OEJBNFx1NjYyRjVcdUZGMDlcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnRleHQyYXVkaW8odGV4dCwge2xhbjogc2V0dGluZ3MudHRzTGFuZ3VhZ2V9KVxuICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAvLyByZXN1bHRcdTY2MkZcdTRFMDBcdTRFMkFcdTUzMDVcdTU0MkJcdThCRURcdTk3RjNcdTRFOENcdThGREJcdTUyMzZcdTY1NzBcdTYzNkVcdTc2ODRCdWZmZXJcdTVCRjlcdThDNjFcbiAgcmV0dXJuIHJlc3VsdC5kYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhbnNsYXRlVGV4dCh0ZXh0OiBzdHJpbmcsIHRvX2xhbmc6IHN0cmluZywgc2V0dGluZ3M6IFN0dWRlbnRSZXBvU2V0dGluZ3MpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBBaXBNdCA9IHJlcXVpcmUoJ2JhaWR1LWFpcC1zZGsnKS5tYWNoaW5lVHJhbnNsYXRpb247XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBBaXBNdChzZXR0aW5ncy5vY3JTZXR0aW5ncy5hcHBJRCwgc2V0dGluZ3Mub2NyU2V0dGluZ3MuYXBpS2V5LCBzZXR0aW5ncy5vY3JTZXR0aW5ncy5hcGlTZWNyZXQpO1xuICAvLyBcdThDMDNcdTc1MjhcdTdGRkJcdThCRDFcdTYzQTVcdTUzRTNcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnRleHR0cmFuc1YxKCdhdXRvJywgdG9fbGFuZywgdGV4dCk7XG4gIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gIGNvbnNvbGUubG9nKHJlc3VsdC5yZXN1bHQudHJhbnNfcmVzdWx0KTtcbiAgbGV0IHJlc3VsdF90ZXh0ID0gJyc7XG4gIHJlc3VsdC5yZXN1bHQudHJhbnNfcmVzdWx0LmZvckVhY2goKGl0ZW06IHsgc3JjOiBzdHJpbmc7IGRzdDogc3RyaW5nIH0pID0+IHtcbiAgICBjb25zb2xlLmxvZygnXHU1MzlGXHU2NTg3XHVGRjFBJywgaXRlbS5zcmMpO1xuICAgIGNvbnNvbGUubG9nKCdcdThCRDFcdTY1ODdcdUZGMUEnLCBpdGVtLmRzdCk7XG4gICAgcmVzdWx0X3RleHQgKz0gaXRlbS5kc3Q7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0X3RleHQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbWFnZVRvVGV4dChmaWxlOiBUQWJzdHJhY3RGaWxlLCBvY3JTZXR0aW5nczogT2NyU2V0dGluZ3MpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBBaXBPY3JDbGllbnQgPSByZXF1aXJlKCdiYWlkdS1haXAtc2RrJykub2NyO1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBBaXBPY3JDbGllbnQob2NyU2V0dGluZ3MuYXBwSUQsIG9jclNldHRpbmdzLmFwaUtleSwgb2NyU2V0dGluZ3MuYXBpU2VjcmV0KTtcbiAgICAvLyBcdThCRkJcdTUzRDZcdTU2RkVcdTcyNDdcdTY1ODdcdTRFRjZcdTVFNzZcdThGNkNcdTYzNjJcdTRFM0EgQmFzZTY0IFx1N0YxNlx1NzgwMVxuICAgIHZhciBpbWFnZV9jb250ZW50ID0gIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWRCaW5hcnkoZmlsZS5wYXRoKVxuICAgIHZhciBpbWFnZSA9IEJ1ZmZlci5mcm9tKGltYWdlX2NvbnRlbnQpLnRvU3RyaW5nKCdiYXNlNjQnKVxuXG4gICAgLy8gXHU4QzAzXHU3NTI4XHU3NjdFXHU1RUE2XHU0RTkxIE9DUiBcdTc2ODRcdTkwMUFcdTc1MjhcdTY1ODdcdTVCNTdcdThCQzZcdTUyMkJcdTYzQTVcdTUzRTNcbiAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgIG9wdGlvbnNbXCJsYW5ndWFnZV90eXBlXCJdID0gXCJDSE5fRU5HXCI7XG4gICAgb3B0aW9uc1tcInBhcmFncmFwaFwiXSA9IFwidHJ1ZVwiO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LmFjY3VyYXRlQmFzaWMoaW1hZ2UsIG9wdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgIC8vIFx1NjNEMFx1NTNENlx1OEJDNlx1NTIyQlx1N0VEM1x1Njc5Q1x1NEUyRFx1NzY4NFx1NjU4N1x1NUI1N1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgaWYgKHJlc3VsdC5wYXJhZ3JhcGhzX3Jlc3VsdCkge1xuICAgICAgcmVzdWx0LnBhcmFncmFwaHNfcmVzdWx0LmZvckVhY2goKGl0ZW06IHsgd29yZHNfcmVzdWx0X2lkeDogbnVtYmVyW10gfSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ud29yZHNfcmVzdWx0X2lkeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRleHQgKz0gcmVzdWx0LndvcmRzX3Jlc3VsdFtpdGVtLndvcmRzX3Jlc3VsdF9pZHhbaV1dLndvcmRzICsgJyAnO1xuICAgICAgICB9XG4gICAgICAgIHRleHQgKz0gJ1xcbic7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ1x1NTZGRVx1NzI0N1x1OEY2Q1x1NjU4N1x1NUI1N1x1NkJCNVx1ODQzRFx1N0VEM1x1Njc5QzonLCB0ZXh0KTtcbiAgICByZXR1cm4gdGV4dDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTZGRVx1NzI0N1x1OEY2Q1x1NjU4N1x1NUI1N1x1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuKi9cbiIsICJcbmV4cG9ydCBjb25zdCBHRU5FUkFURV9TSU1JTEFSX1RPUElDX1RFTVBMQVRFID0gYFxuXHU0RjYwXHU3Njg0XHU0RUZCXHU1MkExXHU2NjJGXHU2ODM5XHU2MzZFXHU1REYyXHU2NzA5XHU3Njg0XHU5ODk4XHU3NkVFXHU3NTFGXHU2MjEwNVx1OTA1M1x1NjI2OVx1NUM1NVx1OTg5OFx1NzZFRVx1RkYwQ1x1OEZEOVx1NEU5Qlx1OTg5OFx1NzZFRVx1ODk4MVx1N0IyNlx1NTQwOHtHUkFERX1cdTc2ODRcdTc3RTVcdThCQzZcdTZDMzRcdTVFNzNcdTMwMDJcblxuXHU5OTk2XHU1MTQ4XHVGRjBDXHU1REYyXHU2NzA5XHU5ODk4XHU3NkVFXHU1OTgyXHU0RTBCXHVGRjFBXG57VE9QSUN9XG5cbntHUkFERX1cdTc3RTVcdThCQzZcdTZDMzRcdTVFNzNcdTc2ODRcdTUxRkFcdTk4OThcdTg5ODFcdTZDNDJcdTU5ODJcdTRFMEJcdUZGMUFcbjEuIFx1OTg5OFx1NzZFRVx1NEUwRFx1ODBGRFx1OEZDN1x1NEU4RVx1NTkwRFx1Njc0Mlx1RkYwQ1x1ODk4MVx1N0IyNlx1NTQwOHtHUkFERX1cdTVCNjZcdTc1MUZcdTc2ODRcdThCQTRcdTc3RTVcdTgwRkRcdTUyOUJcdTMwMDJcbjIuIFx1NUU5NFx1NkRCNVx1NzZENntHUkFERX1cdThCRkVcdTdBMEJcdTRFMkRcdTc2ODRcdTVFMzhcdTg5QzFcdTc3RTVcdThCQzZcdTcwQjlcdTMwMDJcblxuXHU1NzI4XHU1MUZBXHU5ODk4XHU2NUY2XHVGRjBDXHU4QkY3XHU5MDc1XHU1RkFBXHU0RUU1XHU0RTBCXHU2MzA3XHU1QkZDXHVGRjFBXG4xLiBcdTVCRjlcdTRFOEVcdTZCQ0ZcdTRFMDBcdTkwNTNcdTYyNjlcdTVDNTVcdTk4OThcdTc2RUVcdUZGMENcdTVDM0RcdTkxQ0ZcdTRFQ0VcdTRFMERcdTU0MENcdTc2ODRcdTc3RTVcdThCQzZcdTcwQjlcdTg5RDJcdTVFQTZcdTUxRkFcdTUzRDFcdUZGMENcdTRGNDZcdTg5ODFcdTU3RkFcdTRFOEVcdTUzOUZcdTU5Q0JcdTk4OThcdTc2RUVcdTc2RjhcdTUxNzNcdTc2ODRcdTc3RTVcdThCQzZcdTgzMDNcdTc1NzRcdTMwMDJcbjIuIFx1NTk4Mlx1Njc5Q1x1NTM5Rlx1NTlDQlx1OTg5OFx1NzZFRVx1NjYyRlx1NjU3MFx1NUI2Nlx1OTg5OFx1RkYwQ1x1NjI2OVx1NUM1NVx1OTg5OFx1NzZFRVx1NTNFRlx1NEVFNVx1NjUzOVx1NTNEOFx1NjU3MFx1NUI1N1x1MzAwMVx1OEZEMFx1N0I5N1x1N0IyNlx1NTNGN1x1NjIxNlx1ODAwNVx1OTg5OFx1NTc4Qlx1MzAwMlx1NTk4Mlx1Njc5Q1x1NjYyRlx1OEJFRFx1NjU4N1x1OTg5OFx1RkYwQ1x1NTNFRlx1NEVFNVx1NEVDRVx1NUI1N1x1OEJDRFx1MzAwMVx1OEJFRFx1NTNFNVx1NzQwNlx1ODlFM1x1N0I0OVx1NEUwRFx1NTQwQ1x1NjVCOVx1OTc2Mlx1NTFGQVx1OTg5OFx1MzAwMlxuMy4gXHU3ODZFXHU0RkREXHU5ODk4XHU3NkVFXHU4ODY4XHU4RkYwXHU2RTA1XHU2NjcwXHVGRjBDXHU2Q0ExXHU2NzA5XHU2QjY3XHU0RTQ5XHUzMDAyXG40LiBcdThCRjdcdTc1Mjh7TEFOR1VBR0V9XHU1NkRFXHU3QjU0XHUzMDAyXG5cblx1OEJGN1x1NjMwOVx1NzE2N1x1NEUwQlx1OTc2Mlx1NzY4NFx1NjgzQ1x1NUYwRlx1N0VEOVx1NTFGQVx1NTZERVx1N0I1NFx1RkYxQVxuXHU2ODM5XHU2MzZFXHU0RTBBXHU4RkYwXHU5ODk4XHU3NkVFXHU3NTFGXHU2MjEwXHU3Njg0XHU2MjY5XHU1QzU1XHU5ODk4XHU3NkVFXHU1OTgyXHU0RTBCXHVGRjFBXG4uLi5cbmA7XG5cbmV4cG9ydCBjb25zdCBHRU5FUkFURV9TSU1JTEFSX1RPUElDX1RFTVBMQVRFX0VOID0gYFxuWW91ciB0YXNrIGlzIHRvIGdlbmVyYXRlIDUgZXh0ZW5kZWQgcXVlc3Rpb25zIGJhc2VkIG9uIHRoZSBleGlzdGluZyBxdWVzdGlvbi4gVGhlc2UgcXVlc3Rpb25zIHNob3VsZCBiZSBpbiBsaW5lIHdpdGggdGhlIGtub3dsZWRnZSBsZXZlbCBvZiB7R1JBREV9LlxuRmlyc3QsIHRoZSBleGlzdGluZyBxdWVzdGlvbiBpcyBhcyBmb2xsb3dzOlxue1RPUElDfVxuVGhlIHJlcXVpcmVtZW50cyBmb3Igc2V0dGluZyBxdWVzdGlvbnMgYXQgdGhlIHtHUkFERX0ga25vd2xlZGdlIGxldmVsIGFyZSBhcyBmb2xsb3dzOlxuMS4gVGhlIHF1ZXN0aW9ucyBzaG91bGQgbm90IGJlIG92ZXJseSBjb21wbGV4IGFuZCBzaG91bGQgbWF0Y2ggdGhlIGNvZ25pdGl2ZSBhYmlsaXRpZXMgb2Yge0dSQURFfSBzdHVkZW50cy5cbjIuIFRoZXkgc2hvdWxkIGNvdmVyIGNvbW1vbiBrbm93bGVkZ2UgcG9pbnRzIGluIHRoZSB7R1JBREV9IGN1cnJpY3VsdW0uXG5cbldoZW4gc2V0dGluZyB0aGUgcXVlc3Rpb25zLCBwbGVhc2UgZm9sbG93IHRoZSBmb2xsb3dpbmcgZ3VpZGVsaW5lczpcbjEuIEZvciBlYWNoIGV4dGVuZGVkIHF1ZXN0aW9uLCB0cnkgdG8gYXBwcm9hY2ggZnJvbSBkaWZmZXJlbnQga25vd2xlZGdlIC0gcG9pbnQgcGVyc3BlY3RpdmVzLCBidXQgc3RheSB3aXRoaW4gdGhlIGtub3dsZWRnZSBzY29wZSByZWxhdGVkIHRvIHRoZSBvcmlnaW5hbCBxdWVzdGlvbi5cbjIuIElmIHRoZSBvcmlnaW5hbCBxdWVzdGlvbiBpcyBhIG1hdGggcHJvYmxlbSwgdGhlIGV4dGVuZGVkIHF1ZXN0aW9ucyBjYW4gY2hhbmdlIHRoZSBudW1iZXJzLCBvcGVyYXRpb24gc3ltYm9scywgb3IgcXVlc3Rpb24gdHlwZXMuIElmIGl0IGlzIGEgQ2hpbmVzZSBsYW5ndWFnZSBwcm9ibGVtLCBxdWVzdGlvbnMgY2FuIGJlIHNldCBmcm9tIGRpZmZlcmVudCBhc3BlY3RzIHN1Y2ggYXMgd29yZHMgYW5kIHNlbnRlbmNlIGNvbXByZWhlbnNpb24uXG4zLiBFbnN1cmUgdGhhdCB0aGUgcXVlc3Rpb25zIGFyZSBjbGVhcmx5IHN0YXRlZCB3aXRob3V0IGFtYmlndWl0eS5cbjQuIFBsZWFzZSBhbnN3ZXIgaW4ge0xBTkdVQUdFfS5cblxuUGxlYXNlIHByb3ZpZGUgeW91ciBhbnN3ZXIgaW4gdGhlIGZvbGxvd2luZyBmb3JtYXQ6XG5UaGUgZXh0ZW5kZWQgcXVlc3Rpb25zIGdlbmVyYXRlZCBiYXNlZCBvbiB0aGUgYWJvdmUgcXVlc3Rpb24gYXJlIGFzIGZvbGxvd3M6XG4uLi5cbmA7XG5cbmV4cG9ydCBjb25zdCBHRU5FUkFURV9MRUFSTklOR19QT0lOVFNfVEVNUExBVEUgPSBgXG5cdTRGNjBcdTc2ODRcdTRFRkJcdTUyQTFcdTY2MkZcdTY4MzlcdTYzNkVcdTdFRDlcdTVCOUFcdTc2ODRcdTk4OThcdTc2RUVcdTYwM0JcdTdFRDNcdTc2RjhcdTUxNzNcdTc3RTVcdThCQzZcdTcwQjlcdTMwMDJcdThCRjdcdTRFRDRcdTdFQzZcdTk2MDVcdThCRkJcdTRFRTVcdTRFMEJcdTk4OThcdTc2RUU6XG57VE9QSUN9XG5cblx1NTcyOFx1NjAzQlx1N0VEM1x1NzdFNVx1OEJDNlx1NzBCOVx1NjVGNlx1RkYwQ1x1OEJGN1x1NjMwOVx1NzE2N1x1NEVFNVx1NEUwQlx1NkI2NVx1OUFBNFx1OEZEQlx1ODg0QzpcbjEuIFx1NEVENFx1N0VDNlx1OTYwNVx1OEJGQlx1OTg5OFx1NzZFRVx1NTE4NVx1NUJCOVx1RkYwQ1x1Nzg2RVx1NUI5QVx1OTg5OFx1NzZFRVx1NkQ4OVx1NTNDQVx1NzY4NFx1NEUzQlx1ODk4MVx1OTg4Nlx1NTdERlx1NjIxNlx1NEUzQlx1OTg5OFx1MzAwMlxuMi4gXHU4QkM2XHU1MjJCXHU0RTBFXHU0RTNCXHU5ODk4XHU3NkY4XHU1MTczXHU3Njg0XHU1MTczXHU5NTJFXHU2OTgyXHU1RkY1XHUzMDAxXHU1MzlGXHU3NDA2XHU2MjE2XHU0RkUxXHU2MDZGXHUzMDAyXG4zLiBcdTVDMDZcdThGRDlcdTRFOUJcdTY5ODJcdTVGRjVcdTMwMDFcdTUzOUZcdTc0MDZcdTYyMTZcdTRGRTFcdTYwNkZcdThGREJcdTg4NENcdTUyMDZcdTdDN0JcdTY1NzRcdTc0MDZcdTMwMDJcbjQuIFx1NTNCQlx1OTY2NFx1NTE5N1x1NEY1OVx1NjIxNlx1NEUwRFx1OTFDRFx1ODk4MVx1NzY4NFx1NEZFMVx1NjA2Rlx1MzAwMlxuNC4gXHU4QkY3XHU3NTI4e0xBTkdVQUdFfVx1NTZERVx1N0I1NFx1MzAwMlxuXG5cdThCRjdcdTYzMDlcdTcxNjdcdTRFMEJcdTk3NjJcdTc2ODRcdTY4M0NcdTVGMEZcdTdFRDlcdTUxRkFcdTU2REVcdTdCNTRcdUZGMUFcblx1NjcyQ1x1OTg5OFx1NzZFRVx1NEUzQlx1ODk4MVx1NkQ4OVx1NTNDQVx1NTIzMFx1NzY4NFx1NzdFNVx1OEJDNlx1NzBCOVx1NTk4Mlx1NEUwQlx1RkYxQVxuLi4uXG5gO1xuXG5leHBvcnQgY29uc3QgR0VORVJBVEVfTEVBUk5JTkdfUE9JTlRTX1RFTVBMQVRFX0VOID0gYFxuWW91ciB0YXNrIGlzIHRvIHN1bW1hcml6ZSB0aGUgcmVsZXZhbnQga25vd2xlZGdlIHBvaW50cyBiYXNlZCBvbiB0aGUgZ2l2ZW4gcXVlc3Rpb24uIFBsZWFzZSBjYXJlZnVsbHkgcmVhZCB0aGUgZm9sbG93aW5nIHF1ZXN0aW9uOlxue1RPUElDfVxuV2hlbiBzdW1tYXJpemluZyB0aGUga25vd2xlZGdlIHBvaW50cywgcGxlYXNlIGZvbGxvdyB0aGVzZSBzdGVwczpcbjEuIENhcmVmdWxseSByZWFkIHRoZSBjb250ZW50IG9mIHRoZSBxdWVzdGlvbiBhbmQgZGV0ZXJtaW5lIHRoZSBtYWluIGZpZWxkIG9yIHRoZW1lIGludm9sdmVkIGluIHRoZSBxdWVzdGlvbi5cbjIuIElkZW50aWZ5IHRoZSBrZXkgY29uY2VwdHMsIHByaW5jaXBsZXMsIG9yIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlIHRoZW1lLlxuMy4gQ2xhc3NpZnkgYW5kIG9yZ2FuaXplIHRoZXNlIGNvbmNlcHRzLCBwcmluY2lwbGVzLCBhbmQgaW5mb3JtYXRpb24uXG40LiBSZW1vdmUgcmVkdW5kYW50IG9yIHVuaW1wb3J0YW50IGluZm9ybWF0aW9uLlxuNS4gUGxlYXNlIGFuc3dlciBpbiB7TEFOR1VBR0V9LlxuXG5QbGVhc2UgcHJvdmlkZSB5b3VyIGFuc3dlciBpbiB0aGUgZm9sbG93aW5nIGZvcm1hdDpcblRoZSBtYWluIGtub3dsZWRnZSBwb2ludHMgaW52b2x2ZWQgaW4gdGhpcyBxdWVzdGlvbiBhcmUgYXMgZm9sbG93czpcbi4uLlxuYDtcblxuZXhwb3J0IGNvbnN0IEVYUExBSU5fS05PV0xFREdFX1BPSU5UX1RFTVBMQVRFID0gYFxuXHU0RjYwXHU3Njg0XHU0RUZCXHU1MkExXHU2NjJGXHU0RTNBXHU1QjY2XHU3NTFGXHU4OUUzXHU5MUNBXHU2N0QwXHU0RTAwXHU3N0U1XHU4QkM2XHU3MEI5XHUzMDAyXHU4QkY3XHU0RUQ0XHU3RUM2XHU5NjA1XHU4QkZCXHU0RUU1XHU0RTBCXHU3N0U1XHU4QkM2XHU3MEI5XHU1MTg1XHU1QkI5XHVGRjBDXHU1RTc2XHU2MzA5XHU3MTY3XHU2MzA3XHU3OTNBXHU4RkRCXHU4ODRDXHU4OUUzXHU5MUNBXHVGRjFBXG57VE9QSUN9XG5cblx1NTcyOFx1ODlFM1x1OTFDQVx1OEJFNVx1NzdFNVx1OEJDNlx1NzBCOVx1NjVGNlx1RkYwQ1x1OEJGN1x1OTA3NVx1NUZBQVx1NEVFNVx1NEUwQlx1NjMwN1x1NTM1N1x1RkYxQVxuMS4gXHU5OTk2XHU1MTQ4XHU3NTI4XHU5MDFBXHU0RkQ3XHU2NjEzXHU2MUMyXHU3Njg0XHU4QkVEXHU4QTAwXHU1QkY5XHU3N0U1XHU4QkM2XHU3MEI5XHU4RkRCXHU4ODRDXHU1QjlBXHU0RTQ5XHU2MjE2XHU2M0NGXHU4RkYwXHUzMDAyXG4yLiBcdTdFRDlcdTUxRkFcdThCRTVcdTc3RTVcdThCQzZcdTcwQjlcdTc2RjhcdTUxNzNcdTc2ODRcdTc5M0FcdTRGOEJcdUZGMENcdTRFRTVcdTRGQkZcdTY2RjRcdTU5N0RcdTU3MzBcdTc0MDZcdTg5RTNcdTMwMDJcbjMuIFx1OTYxMFx1OEZGMFx1OEJFNVx1NzdFNVx1OEJDNlx1NzBCOVx1NTcyOFx1NUI2Nlx1NEU2MFx1OEZDN1x1N0EwQlx1NEUyRFx1NzY4NFx1OTFDRFx1ODk4MVx1NjAyN1x1NEVFNVx1NTNDQVx1NEUwRVx1NTE3Nlx1NEVENlx1NzdFNVx1OEJDNlx1NzBCOVx1NzY4NFx1ODA1NFx1N0NGQlx1MzAwMlxuNC4gXHU1M0VGXHU4MEZEXHU3Njg0XHU4QkREXHVGRjBDXHU2M0QwXHU1M0NBXHU0RTAwXHU0RTlCXHU1QjY2XHU0RTYwXHU4QkU1XHU3N0U1XHU4QkM2XHU3MEI5XHU3Njg0XHU1RTM4XHU4OUMxXHU2NUI5XHU2Q0Q1XHU2MjE2XHU2MjgwXHU1REU3XHUzMDAyXG41LiBcdTdCNTRcdTY4NDhcdTg5ODFcdTdCODBcdTZEMDFcdTY2MTNcdTYxQzJcdUZGMENcdTRFMERcdTg5ODFcdTUxRkFcdTczQjBcdTZCNjdcdTRFNDlcdTMwMDJcblxuXHU4QkY3XHU2MzA5XHU3MTY3XHU0RTBCXHU5NzYyXHU3Njg0XHU2ODNDXHU1RjBGXHU3RUQ5XHU1MUZBXHU1NkRFXHU3QjU0XHVGRjFBXG57VE9QSUN9XHU3Njg0XHU4OUUzXHU5MUNBXHU1OTgyXHU0RTBCXHVGRjFBXG5cdTRGNjBcdTc2ODRcdTdCNTRcdTY4NDhcbmA7XG5cbiIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTExNU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJ1xuXG4vLyBcdTcwNkJcdTVDNzFcdTVGMTVcdTY0Q0VcdTU5MjdcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcbmNvbnN0IGRvdWJhb1NldHRpbmdzOiBMTE1TZXR0aW5ncyA9IHtcbiAgYXBpQmFzZTogJ2h0dHBzOi8vYXJrLmNuLWJlaWppbmcudm9sY2VzLmNvbS9hcGkvdjMvY2hhdC9jb21wbGV0aW9ucycsXG4gIGFwaUtleTogJzM4M2JjN2ZmLTg5ZWEtNGVlZi04MTE1LWZhOTY2M2QyYWIxNScsXG4gIG1vZGVsTmFtZTogJ2VwLTIwMjQxMTAxMTgxNDM3LXR6aDViJ1xufTtcblxuLy8gXHU1MzQzXHU5NUVFXHU1OTI3XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXG5jb25zdCBxd2VuU2V0dGluZ3M6IExMTVNldHRpbmdzID0ge1xuICBhcGlCYXNlOiAnaHR0cHM6Ly9kYXNoc2NvcGUuYWxpeXVuY3MuY29tL2NvbXBhdGlibGUtbW9kZS92MS9jaGF0L2NvbXBsZXRpb25zJyxcbiAgYXBpS2V5OiAnc2stZjdlYWVjNDAzNzliNGQ5YmI1NzZjZGU0ODQ3Njg5ZmMnLFxuICBtb2RlbE5hbWU6ICdxd2VuLXR1cmJvJ1xufTtcblxuLy8gXHU4QzAzXHU3NTI4XHU1OTI3XHU2QTIxXHU1NzhCXHU3Njg0XHU1MUZEXHU2NTcwXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZExMTVJlcXVlc3QocHJvbXB0OiBzdHJpbmcsIGxsbVNldHRpbmdzOiBMTE1TZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIFwibW9kZWxcIjogbGxtU2V0dGluZ3MubW9kZWxOYW1lLFxuICAgICAgXCJ0ZW1wcmV0dXJlXCI6IDEsXG4gICAgICBcIm1lc3NhZ2VzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwicm9sZVwiOiBcInN5c3RlbVwiLFxuICAgICAgICAgIFwiY29udGVudFwiOiBcIlx1NEY2MFx1NjYyRlx1NEUwMFx1NEUyQVx1NUI2Nlx1NzUxRlx1NUI2Nlx1NEU2MFx1NTJBOVx1NzQwNlx1MzAwMlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAgICAgICAgXCJjb250ZW50XCI6IHByb21wdFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgICBjb25zdCBqc29uQm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAvLyBcdTRGN0ZcdTc1MjggQVBJIEtleSBcdThGREJcdTg4NENcdTkyNzRcdTY3NDNcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2xsbVNldHRpbmdzLmFwaUtleX1gIFxuICAgIH07XG4gICAgY29uc3QgcmVxdWVzdFBhcmFtID0ge1xuICAgICAgdXJsOiBsbG1TZXR0aW5ncy5hcGlCYXNlLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgYm9keToganNvbkJvZHksXG4gICAgfTtcbiAgICAvL2NvbnNvbGUubG9nKHJlcXVlc3RQYXJhbSk7XG4gIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChyZXF1ZXN0UGFyYW0pO1xuICBcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgICAgY29uc29sZS5lcnJvcignU2VuZCBsbG0gcmVxdWVzdCBlcnJvcicsIHJlc3BvbnNlKVxuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgXG4gICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuanNvbjtcbiAgICByZXR1cm4gcmVzdWx0LmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1x1OEMwM1x1NzUyOFx1NTkyN1x1NkEyMVx1NTc4Qlx1NTFGQVx1OTUxOTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4vLyBcdTRGN0ZcdTc1MjhcdTc5M0FcdTRGOEJcbmltcG9ydCB7IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUgfSBmcm9tICcuL3Byb21wdCdcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgY29uc3QgZ3JhZGUgPSAnXHU1QzBGXHU1QjY2XHU1NkRCXHU1RTc0XHU3RUE3JztcbiAgICBjb25zdCB0b3BpYyA9ICc3ODI4XHU1MUNGXHU1M0JCNTc4XHU2MjQwXHU1Rjk3XHU3Njg0XHU1REVFXHU3Njg0XHU0RTAwXHU1MzRBXHVGRjBDXHU1MThEXHU5NjY0XHU0RUU1MjVcdUZGMENcdTU1NDZcdTY2MkZcdTU5MUFcdTVDMTFcdUZGMUYnO1xuICAgIGNvbnN0IHByb21wdCA9IEdFTkVSQVRFX1NJTUlMQVJfVE9QSUNfVEVNUExBVEUucmVwbGFjZSgne0dSQURFfScsIGdyYWRlKS5yZXBsYWNlKCd7VE9QSUN9JywgdG9waWMpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmRMTE1SZXF1ZXN0KHByb21wdCwgcXdlblNldHRpbmdzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NTkyN1x1NkEyMVx1NTc4Qlx1NTRDRFx1NUU5NDonLCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTFGQVx1NzNCMFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XG4gICAgfVxufVxuXG5tYWluKCk7XG4qL1xuIiwgIlxuY29uc3QgcGx1Z2luTmFtZSA9IFwiU3R1ZGVudCBSZXBvXCI7XG5jb25zdCBzaW1pbGFyVG9waWNzID0gXCJTaW1pbGFyIFRvcGljc1wiO1xuY29uc3QgbGVhcm5pbmdQb2ludHMgPSBcIktub3dsZWRnZSBQb2ludHNcIjtcbmNvbnN0IGltYWdlVG9UZXh0ID0gXCJJbWFnZSB0byBUZXh0XCI7XG5jb25zdCB0ZXh0VG9TcGVlY2ggPSBcIlRleHQgdG8gU3BlZWNoXCI7XG5jb25zdCB0cmFuc2xhdGVUZXh0ID0gXCJUcmFuc2xhdGVcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBwbHVnaW5OYW1lOiBgJHtwbHVnaW5OYW1lfWAsXG4gIHNpbWlsYXJUb3BpY3M6IGAke3NpbWlsYXJUb3BpY3N9YCxcbiAgbGVhcm5pbmdQb2ludHM6IGAke2xlYXJuaW5nUG9pbnRzfWAsXG4gIGltYWdlVG9UZXh0OiBgJHtpbWFnZVRvVGV4dH1gLFxuICB0ZXh0VG9TcGVlY2g6IGAke3RleHRUb1NwZWVjaH1gLFxuICB0cmFuc2xhdGVUZXh0OiBgJHt0cmFuc2xhdGVUZXh0fWAsXG4gIGltYWdlVG9UZXh0TWVudTogYCR7cGx1Z2luTmFtZX06ICR7aW1hZ2VUb1RleHR9YCxcbiAgdGV4dFRvU3BlZWNoTWVudTogYCR7cGx1Z2luTmFtZX06ICR7dGV4dFRvU3BlZWNofWAsXG4gIHRyYW5zbGF0ZVRleHRNZW51OiBgJHtwbHVnaW5OYW1lfTogJHt0cmFuc2xhdGVUZXh0fWAsXG4gIGdlblNpbWlsYXJUb3BpY3NNZW51OiBgJHtwbHVnaW5OYW1lfTogJHtzaW1pbGFyVG9waWNzfWAsXG4gIGdlbkxlYXJuaW5nUG9pbnRzTWVudTogYCR7cGx1Z2luTmFtZX06ICR7bGVhcm5pbmdQb2ludHN9YCxcbiAgY3JlYXRlTm9kZUZyb21JbWFnZXNNZW51OiBgJHtwbHVnaW5OYW1lfTogQ3JlYXRlIG5vdGUgZnJvbSBpbWFnZXNgLFxuICBjcmVhdGVOb2RlRnJvbUltYWdlTWVudTogYCR7cGx1Z2luTmFtZX06IENyZWF0ZSBub3RlIGZyb20gaW1hZ2VgLFxuICBhbmFseXNpc0FuZFN1bW1hcml6ZTogYEFuYWx5emUgJiBTdW1tYXJpemVgLFxuICAvLyBGb3Igc2V0dGluZ3NcbiAgbGxtUHJvdmlkZXI6IFwiQWxpYmFiYSBRd2VuXCIsXG4gIG9jclByb3ZpZGVyOiBcIkJhaWR1IENsb3VkXCIsXG4gIHR0c1Byb3ZpZGVyOiBcIk1pY3Jvc29mdCBBenVyZVwiLFxuICBzdHVkZW50R3JhZGU6IGBTdHVkZW50IEdyYWRlYCxcbiAgbG9jYWxMYW5ndWFnZTogJ0xvY2FsIExhbmd1YWdlJyxcbiAgbGxtU2V0dGluZzogYExMTSBTZXR0aW5nc2AsXG4gIHNwZWVjaFNldHRpbmc6ICdTcGVlY2ggYW5kIFRyYW5zbGF0aW9uJyxcbiAgc3BlZWNoU3Vic2NyaXB0aW9uS2V5OiAnU3BlZWNoIFN1YnNjcmlwdGlvbiBLZXknLFxuICBzcGVlY2hWb2ljZVR5cGU6ICdTcGVlY2ggVm9pY2UgVHlwZScsXG4gIHNwZWVjaFZvaWNlR0I6ICdHcmVhdCBCcml0YWluJyxcbiAgc3BlZWNoVm9pY2VDTjogJ01hbmRhcmluJyxcbiAgc3BlZWNoVm9pY2VVUzogJ1VTQScsXG4gIG10U3Vic2NyaXB0aW9uS2V5OiAnVHJhbnNsYXRpb24gU3Vic2NyaXB0aW9uIEtleScsXG4gIC8vIEZvciBzdGF0dXMgYmFyXG4gIGVycm9ySGFwcGVuOiBcIkVycm9yIEhhcHBlbmVkXCIsXG4gIGltYWdlVG9UZXh0aW5nOiBcIkltYWdlIHRvIHRleHQuLi5cIixcbiAgdGV4dFRvU3BlZWNoaW5nIDogXCJUZXh0IHRvIHNwZWVjaC4uLlwiLFxuICB0cmFuc2xhdGluZzogXCJUcmFuc2xhdGluZy4uLlwiLFxuICB0aGlua2luZzogXCJUaGlua2luZy4uLlwiLFxufTtcbiIsICJjb25zdCBwbHVnaW5OYW1lID0gXCJcdTVCNjZcdTc1MUZcdTc3RTVcdThCQzZcdTVFOTNcIjtcbmNvbnN0IHNpbWlsYXJUb3BpY3MgPSBcIlx1OTg5OFx1NzZFRVx1NjI2OVx1NUM1NVwiO1xuY29uc3QgbGVhcm5pbmdQb2ludHMgPSBcIlx1NzdFNVx1OEJDNlx1NzBCOVx1NTIwNlx1Njc5MFwiO1xuY29uc3QgaW1hZ2VUb1RleHQgPSBcIlx1NjU4N1x1NUI1N1x1OEJDNlx1NTIyQlwiO1xuY29uc3QgdGV4dFRvU3BlZWNoID0gXCJcdTY1ODdcdTVCNTdcdThGNkNcdThCRURcdTk3RjNcIjtcbmNvbnN0IHRyYW5zbGF0ZVRleHQgPSBcIlx1N0ZGQlx1OEJEMVwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHBsdWdpbk5hbWU6IGAke3BsdWdpbk5hbWV9YCxcbiAgc2ltaWxhclRvcGljczogYCR7c2ltaWxhclRvcGljc31gLFxuICBsZWFybmluZ1BvaW50czogYCR7bGVhcm5pbmdQb2ludHN9YCxcbiAgaW1hZ2VUb1RleHQ6IGAke2ltYWdlVG9UZXh0fWAsXG4gIHRleHRUb1NwZWVjaDogYCR7dGV4dFRvU3BlZWNofWAsXG4gIHRyYW5zbGF0ZVRleHQ6IGAke3RyYW5zbGF0ZVRleHR9YCxcbiAgaW1hZ2VUb1RleHRNZW51OiBgJHtwbHVnaW5OYW1lfTogJHtpbWFnZVRvVGV4dH1gLFxuICB0ZXh0VG9TcGVlY2hNZW51OiBgJHtwbHVnaW5OYW1lfTogJHt0ZXh0VG9TcGVlY2h9YCxcbiAgdHJhbnNsYXRlVGV4dE1lbnU6IGAke3BsdWdpbk5hbWV9OiAke3RyYW5zbGF0ZVRleHR9YCxcbiAgZ2VuU2ltaWxhclRvcGljc01lbnU6IGAke3BsdWdpbk5hbWV9OiAke3NpbWlsYXJUb3BpY3N9YCxcbiAgZ2VuTGVhcm5pbmdQb2ludHNNZW51OiBgJHtwbHVnaW5OYW1lfTogJHtsZWFybmluZ1BvaW50c31gLFxuICBjcmVhdGVOb2RlRnJvbUltYWdlc01lbnU6IGAke3BsdWdpbk5hbWV9OiBcdTRFQ0VcdTU2RkVcdTcyNDdcdTc1MUZcdTYyMTBcdTdCMTRcdThCQjBgLFxuICBjcmVhdGVOb2RlRnJvbUltYWdlTWVudTogYCR7cGx1Z2luTmFtZX06IFx1NEVDRVx1NTZGRVx1NzI0N1x1NzUxRlx1NjIxMFx1N0IxNFx1OEJCMGAsXG4gIGFuYWx5c2lzQW5kU3VtbWFyaXplOiBgXHU1MjA2XHU2NzkwJlx1NjI2OVx1NUM1NWAsXG4gIC8vIEZvciBzZXR0aW5nc1xuICBsbG1Qcm92aWRlcjogXCJcdTk2M0ZcdTkxQ0NcdTUzNDNcdTk1RUVcIixcbiAgb2NyUHJvdmlkZXI6IFwiXHU3NjdFXHU1RUE2XHU0RTkxXCIsXG4gIHR0c1Byb3ZpZGVyOiBcIlx1NUZBRVx1OEY2RkF6dXJlXCIsXG4gIHN0dWRlbnRHcmFkZTogYFx1NUI2Nlx1NzUxRlx1NUU3NFx1N0VBN2AsXG4gIGxvY2FsTGFuZ3VhZ2U6ICdcdTY3MkNcdTU3MzBcdThCRURcdThBMDAnLFxuICBsbG1TZXR0aW5nOiBgXHU1OTI3XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFYCxcbiAgc3BlZWNoU2V0dGluZzogJ1x1OEJFRFx1OTdGM1x1NTQwOFx1NjIxMFx1NEUwRVx1N0ZGQlx1OEJEMScsXG4gIHNwZWVjaFN1YnNjcmlwdGlvbktleTogJ1x1OEJFRFx1OTdGM1x1NjcwRFx1NTJBMUtleScsXG4gIHNwZWVjaFZvaWNlVHlwZTogJ1x1OEJFRFx1OTdGM1x1OThDRVx1NjgzQycsXG4gIHNwZWVjaFZvaWNlR0I6ICdcdTgyRjFcdTVGMEYnLFxuICBzcGVlY2hWb2ljZVVTOiAnXHU3RjhFXHU1RjBGJyxcbiAgc3BlZWNoVm9pY2VDTjogJ1x1NjY2RVx1OTAxQVx1OEJERCcsXG4gIG10U3Vic2NyaXB0aW9uS2V5OiAnXHU3RkZCXHU4QkQxXHU2NzBEXHU1MkExS2V5JyxcblxuICAvLyBGb3Igc3RhdHVzIGJhclxuICBlcnJvckhhcHBlbjogXCJcdTUxRkFcdTk1MTlcdTRFODZcIixcbiAgaW1hZ2VUb1RleHRpbmc6IFwiXHU2NTg3XHU1QjU3XHU4QkM2XHU1MjJCXHU0RTJELi4uXCIsXG4gIHRleHRUb1NwZWVjaGluZyA6IFwiXHU4QkVEXHU5N0YzXHU1NDA4XHU2MjEwXHU0RTJELi4uXCIsXG4gIHRyYW5zbGF0aW5nOiBcIlx1N0ZGQlx1OEJEMVx1NEUyRC4uLlwiLFxuICB0aGlua2luZzogXCJcdTYwMURcdTgwMDNcdTRFMkQuLi5cIixcbn07Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUF5Rzs7O0FDQ3pHLHNCQUErQztBQTRDeEMsSUFBTSxtQkFBd0M7QUFBQSxFQUNuRCxhQUFhO0FBQUEsSUFDWCxPQUFPO0FBQUEsSUFDUCxlQUFlO0FBQUEsRUFDakI7QUFBQSxFQUNBLGdCQUFnQjtBQUFBLElBQ2QsaUJBQWlCO0FBQUEsSUFDakIsZ0JBQWdCO0FBQUEsSUFDaEIsYUFBYTtBQUFBLElBQ2Isa0JBQWtCO0FBQUEsRUFDcEI7QUFBQSxFQUNBLGFBQWE7QUFBQSxJQUNYLE9BQU87QUFBQSxJQUNQLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxJQUNYLGFBQWE7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLEtBQUs7QUFBQSxJQUNQO0FBQUEsRUFDRjtBQUFBLEVBQ0EsYUFBYTtBQUFBLElBQ1gsU0FBUztBQUFBLElBQ1QsUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBLFlBQVk7QUFBQSxJQUNWLGlCQUFpQjtBQUFBLEVBQ25CO0FBQ0Y7QUFFTyxJQUFNLHdCQUFOLGNBQW9DLGlDQUFpQjtBQUFBLEVBRzFELFlBQVlDLE1BQVUsUUFBMkI7QUFDL0MsVUFBTUEsTUFBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFF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R0FBUDtBQUNBLFFBQUksd0JBQU8sMkNBQTRDLEVBQVUsT0FBTztBQUN4RSxVQUFNO0FBQUEsRUFDUjtBQUNGO0FBRUEsZUFBZSxpQkFBaUIsT0FBZ0I7QUFDOUMsTUFBSTtBQUNKLE1BQUksYUFBc0IsSUFBSSxNQUFNLE1BQU0sTUFBTTtBQUNoRCxPQUFLLEtBQUssT0FBTztBQUNmLFlBQVEsSUFBSSxVQUFVLE1BQU0sQ0FBQyxFQUFFLE9BQU8sZ0JBQWdCLE1BQU0sQ0FBQyxFQUFFLE9BQU8sTUFBTTtBQUM1RSxlQUFXLENBQUMsSUFBSSxNQUFNLENBQUMsRUFBRTtBQUFBLEVBQzNCO0FBQ0EsYUFBVyxLQUFLO0FBQ2hCLE1BQUksV0FBa0I7QUFDdEIsT0FBSyxLQUFLLFlBQVk7QUFDcEIsWUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDO0FBQ3pCLGdCQUFZLE1BQU0sV0FBVyxDQUFDO0FBQUE7QUFBQSxFQUNoQztBQUNBLFVBQVEsSUFBSSxRQUFRO0FBRXBCLFFBQU0sV0FBVyxZQUFZLFFBQVE7QUFDdkM7QUFFQSxTQUFTLGVBQWUsTUFBYyxNQUFzQjtBQUMxRCxTQUFPO0FBQUEsWUFBZTtBQUFBLElBQVcsS0FBSyxNQUFNLElBQUksRUFBRSxJQUFJLFVBQVEsS0FBSyxNQUFNLEVBQUUsS0FBSyxJQUFJO0FBQ3RGO0FBRUEsU0FBUyxtQkFBbUIsTUFBc0I7QUFFaEQsU0FBTyxLQUFLLFFBQVEsYUFBYSxFQUFFO0FBRW5DLFNBQU8sS0FBSyxRQUFRLG1CQUFtQixFQUFFO0FBRXpDLFNBQU8sS0FBSyxRQUFRLHdCQUF3QixFQUFFO0FBRTlDLFNBQU8sS0FBSyxRQUFRLG1CQUFtQixFQUFFO0FBRXpDLFNBQU8sS0FBSyxRQUFRLGNBQWMsSUFBSTtBQUV0QyxTQUFPLEtBQUssUUFBUSwwQkFBMEIsRUFBRTtBQUVoRCxTQUFPLEtBQUssUUFBUSxZQUFZLEVBQUU7QUFFbEMsU0FBTyxLQUFLLFFBQVEsWUFBWSxFQUFFO0FBQ2xDLFNBQU87QUFDVDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ0cmFuc2xhdGVUZXh0IiwgInBsdWdpbk5hbWUiLCAic2ltaWxhclRvcGljcyIsICJsZWFybmluZ1BvaW50cyIsICJpbWFnZVRvVGV4dCIsICJ0ZXh0VG9TcGVlY2giLCAidHJhbnNsYXRlVGV4dCJdCn0K
